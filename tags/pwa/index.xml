<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>PWA on å¼ ä¸‰çš„ç½‘ç»œæ—¥å¿—</title>
    <link>https://blog.zsan.ml/tags/pwa/</link>
    <description>Recent content in PWA on å¼ ä¸‰çš„ç½‘ç»œæ—¥å¿—</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>&lt;a href=&#34;https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh&#34; target=&#34;_blank&#34;&gt;CC BY-NC-SA 4.0&lt;/a&gt;</copyright>
    <lastBuildDate>Sun, 07 Aug 2022 16:28:27 +0800</lastBuildDate><atom:link href="https://blog.zsan.ml/tags/pwa/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ç”¨PWA æ”¹é€ WEB ä¸ºåŸç”ŸApp</title>
      <link>https://blog.zsan.ml/posts/pwa-retrofitting/</link>
      <pubDate>Sun, 07 Aug 2022 16:28:27 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/pwa-retrofitting/</guid>
      <description>PWAä½¿WEBç½‘ç«™æ›´ä¸æ»‘</description>
      <content:encoded><![CDATA[<blockquote>
<p>æœ€è¿‘é—²æ¥æ— äº‹ï¼ŒæŠŠç½‘ç«™å‡çº§äº†ï¼Œæ›´åŠ åƒåŸç”ŸAPP</p>
<p>è®°å½•ä¸‹å‡çº§è¿‡ç¨‹ï¼Œå…å¾—ä»¥åå¿˜äº†</p>
<p>PWAæ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥å»ç½‘ä¸Šæœä¸€ä¸‹ï¼Œbutä¸­æ–‡æ–‡ç« å°‘ä¸€ç‚¹</p>
<p>ç”¨Google å°è£…çš„ å¥½çš„ workbox æ¥å‡çº§</p>
</blockquote>
<h2 id="æ³¨å†Œservice-worker">æ³¨å†ŒService Worker</h2>
<p>åœ¨htmlé¡µé¢æ³¨å†Œ SW</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>&lt;script&gt;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span> (<span style="color:#0ff;font-weight:bold">&#39;serviceWorker&#39;</span> <span style="color:#fff;font-weight:bold">in</span> navigator) {
</span></span><span style="display:flex;"><span>        navigator.serviceWorker.getRegistrations()
</span></span><span style="display:flex;"><span>            .then(regs =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">let</span> reg <span style="color:#fff;font-weight:bold">of</span> regs) {
</span></span><span style="display:flex;"><span>                    <span style="color:#007f7f">// æ³¨é”€æ‰ä¸æ˜¯å½“å‰ä½œç”¨åŸŸçš„æ‰€æœ‰çš„ Service Worker
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                     <span style="color:#fff;font-weight:bold">if</span> (reg.scope !== <span style="color:#0ff;font-weight:bold">&#39;http://localhost:8000/&#39;</span>) {
</span></span><span style="display:flex;"><span>                        reg.unregister()
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">// æ³¨é”€æ‰æ±¡æŸ“ Service Worker ä¹‹åå†é‡æ–°æ³¨å†Œè‡ªå·±ä½œç”¨åŸŸçš„ Service Worker
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#fff;font-weight:bold">window</span>.addEventListener(<span style="color:#0ff;font-weight:bold">&#39;load&#39;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>                    navigator.serviceWorker.register(<span style="color:#0ff;font-weight:bold">&#39;./sw.js&#39;</span>).then(<span style="color:#fff;font-weight:bold">function</span> (e) { console.log(<span style="color:#0ff;font-weight:bold">&#34;æ”¯æŒsw:&#34;</span>, e.scope) })
</span></span><span style="display:flex;"><span>                })
</span></span><span style="display:flex;"><span>            })
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f00">/script&gt;</span>
</span></span></code></pre></div><h2 id="ç”Ÿæˆswjsæ–‡ä»¶">ç”ŸæˆSW.jsæ–‡ä»¶</h2>
<h3 id="google-cdn">google cdn</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>importScripts(<span style="color:#0ff;font-weight:bold">&#34;  &#39;https://storage.googleapis.com/workbox-cdn/releases/6.1.1/workbox-sw.js&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">&#34;</span>);
</span></span></code></pre></div><p>å›½å†…å»ºè®®ä¸ä½¿ç”¨Google</p>
<h3 id="jsdelivr-cdn">jsdelivr cdn</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>importScripts(<span style="color:#0ff;font-weight:bold">&#34;https://fastly.jsdelivr.net/npm/workbox-sw@6.5.4/build/workbox-sw.min.js&#34;</span>);
</span></span></code></pre></div><h2 id="swjs-ç¼–å†™">SW.js ç¼–å†™</h2>
<h3 id="é…ç½®ç›¸å…³">é…ç½®ç›¸å…³</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>workbox.setConfig(
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ˜¯å¦å¼€å¯debug
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        debug: <span style="color:#fff;font-weight:bold">false</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">let</span> cacheSuffixVersion = <span style="color:#0ff;font-weight:bold">&#39;-220806&#39;</span>; <span style="color:#007f7f">// ç¼“å­˜ç‰ˆæœ¬å·
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">const</span> maxEntries = <span style="color:#ff0;font-weight:bold">100</span>; <span style="color:#007f7f">// æœ€å¤§æ¡ç›®æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>workbox.core.setCacheNameDetails({
</span></span><span style="display:flex;"><span>    prefix: <span style="color:#0ff;font-weight:bold">&#39;zsan&#39;</span>, <span style="color:#007f7f">// å‰ç¼€
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    suffix: cacheSuffixVersion, <span style="color:#007f7f">// åç¼€
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">if</span> (workbox) {
</span></span><span style="display:flex;"><span>    console.log(<span style="color:#0ff;font-weight:bold">&#34;Yay! Workbox is loaded ğŸ‰&#34;</span>)
</span></span><span style="display:flex;"><span>} <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>    console.log(<span style="color:#0ff;font-weight:bold">&#34;Boo! Workbox didn&#39;t load ğŸ˜¬&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="é¢„ç¼“å­˜æ–‡ä»¶">é¢„ç¼“å­˜æ–‡ä»¶</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">let</span> cacheFiles = [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        url: <span style="color:#0ff;font-weight:bold">&#34;/index.html&#34;</span>,
</span></span><span style="display:flex;"><span>        revision: cacheSuffixVersion
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>workbox.precaching.precacheAndRoute(cacheFiles);
</span></span></code></pre></div><h2 id="workboxç­–ç•¥">workboxç­–ç•¥</h2>
<h3 id="cdnç­–ç•¥">cdnç­–ç•¥</h3>
<p>å¯¹äºä¸€äº›cdnçš„ä½¿ç”¨ï¼Œä½¿ç”¨CacheFirst ç¼“å­˜ä¼˜å…ˆç­–ç•¥ï¼Œæ­¤ç­–ç•¥å°†é¦–å…ˆæ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦æœ‰å“åº”ï¼Œå¦‚æœæœ‰å“åº”ï¼Œåˆ™ä½¿ç”¨è¯¥ç­–ç•¥ã€‚å¦‚æœè¯·æ±‚ä¸åœ¨ç¼“å­˜ä¸­ï¼Œåˆ™å°†ä½¿ç”¨ç½‘ç»œï¼Œå¹¶å°†ä»»ä½•æœ‰æ•ˆå“åº”æ·»åŠ åˆ°ç¼“å­˜ä¸­ï¼Œç„¶åå†ä¼ é€’ç»™æµè§ˆå™¨ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>workbox.routing.registerRoute(
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">RegExp</span>(<span style="color:#0ff;font-weight:bold">&#39;^https://fastly\\.jsdelivr\\.net&#39;</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> workbox.strategies.CacheFirst({
</span></span><span style="display:flex;"><span>        cacheName: <span style="color:#0ff;font-weight:bold">&#39;static-immutable&#39;</span> + cacheSuffixVersion,
</span></span><span style="display:flex;"><span>        fetchOptions: {
</span></span><span style="display:flex;"><span>            mode: <span style="color:#0ff;font-weight:bold">&#39;cors&#39;</span>,
</span></span><span style="display:flex;"><span>            credentials: <span style="color:#0ff;font-weight:bold">&#39;omit&#39;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        plugins: [
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">new</span> workbox.expiration.ExpirationPlugin({
</span></span><span style="display:flex;"><span>                maxAgeSeconds: <span style="color:#ff0;font-weight:bold">30</span> * <span style="color:#ff0;font-weight:bold">24</span> * <span style="color:#ff0;font-weight:bold">60</span> * <span style="color:#ff0;font-weight:bold">60</span>,
</span></span><span style="display:flex;"><span>                purgeOnQuotaError: <span style="color:#fff;font-weight:bold">true</span>,
</span></span><span style="display:flex;"><span>            }),
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h3 id="å­—ä½“æ–‡ä»¶">å­—ä½“æ–‡ä»¶</h3>
<p>å¯¹äºå­—ä½“æ–‡ä»¶ï¼ŒåŸºæœ¬ä¸Šç¡®å®šå¥½å°±ä¸ä¼šæ”¹åŠ¨äº†ï¼Œè¿™é‡Œä½¿ç”¨StaleWhileRevalidateï¼Œæ­¤ç­–ç•¥å°†å¯¹ç½‘ç»œè¯·æ±‚ä½¿ç”¨ç¼“å­˜æ¥å“åº”ï¼ˆå¦‚æœæœ‰ï¼‰ï¼Œå¹¶åœ¨åå°æ›´æ–°ç¼“å­˜ã€‚å¦‚æœæœªç¼“å­˜ï¼Œå®ƒå°†ç­‰å¾…ç½‘ç»œå“åº”å¹¶ä½¿ç”¨å®ƒã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>workbox.routing.registerRoute(
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åŒ¹é… woff å­—ä½“
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">RegExp</span>(<span style="color:#0ff;font-weight:bold">&#39;.*.woff&#39;</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> workbox.strategies.StaleWhileRevalidate({
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// cache storage åç§°å’Œç‰ˆæœ¬å·
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        cacheName: <span style="color:#0ff;font-weight:bold">&#39;font-cache&#39;</span> + cacheSuffixVersion,
</span></span><span style="display:flex;"><span>        plugins: [
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// ä½¿ç”¨ expiration æ’ä»¶å®ç°ç¼“å­˜æ¡ç›®æ•°ç›®å’Œæ—¶é—´æ§åˆ¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">new</span> workbox.expiration.ExpirationPlugin({
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">// æœ€å¤§ä¿å­˜é¡¹ç›®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                maxEntries,
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">// ç¼“å­˜ 30 å¤©
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                maxAgeSeconds: <span style="color:#ff0;font-weight:bold">30</span> * <span style="color:#ff0;font-weight:bold">24</span> * <span style="color:#ff0;font-weight:bold">60</span> * <span style="color:#ff0;font-weight:bold">60</span>,
</span></span><span style="display:flex;"><span>            }),
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// ä½¿ç”¨ cacheableResponse æ’ä»¶ç¼“å­˜çŠ¶æ€ç ä¸º 0 çš„è¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">new</span> workbox.cacheableResponse.CacheableResponsePlugin({
</span></span><span style="display:flex;"><span>                statuses: [<span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">200</span>],
</span></span><span style="display:flex;"><span>            }),
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h3 id="apièµ„æº">APIèµ„æº</h3>
<p>APIæ•°æ®çš„è¯·æ±‚ä½¿ç”¨NetworkFirst ç­–ç•¥ï¼Œæ­¤ç­–ç•¥å°†å°è¯•é¦–å…ˆä»ç½‘ç»œè·å¾—å“åº”ã€‚å¦‚æœæ”¶åˆ°å“åº”ï¼Œå®ƒå°†æŠŠå®ƒä¼ é€’ç»™æµè§ˆå™¨ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°ç¼“å­˜ä¸­ã€‚å¦‚æœç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œå°†ä½¿ç”¨æœ€åä¸€ä¸ªç¼“å­˜çš„å“åº”ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>workbox.routing.registerRoute(
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åŒ¹é… leancloudapi.xsbb.ml
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">RegExp</span>(<span style="color:#0ff;font-weight:bold">&#39;^https://(?:blog\\.zsan\\.ml)&#39;</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> workbox.strategies.NetworkFirst({
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// cache storage åç§°å’Œç‰ˆæœ¬å·
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        cacheName: <span style="color:#0ff;font-weight:bold">&#39;blog-api-cache&#39;</span> + cacheSuffixVersion,
</span></span><span style="display:flex;"><span>        fetchOptions: {
</span></span><span style="display:flex;"><span>            mode: <span style="color:#0ff;font-weight:bold">&#39;cors&#39;</span>,
</span></span><span style="display:flex;"><span>            credentials: <span style="color:#0ff;font-weight:bold">&#39;omit&#39;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        networkTimeoutSeconds: <span style="color:#ff0;font-weight:bold">3</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h3 id="google-analytics">Google-Analytics</h3>
<p>å®˜æ–¹æœ‰<a href="https://developers.google.com/web/tools/workbox/guides/enable-offline-analytics">Google Analytics ç¦»çº¿ç»Ÿè®¡æ’ä»¶</a>,ä½†æ˜¯è‹±æ–‡çš„ï¼Œç›¸å…³èµ„æ–™ä¹Ÿå°‘ï¼ŒæŠ˜è…¾äº†å¥½ä¸€é˜µå­</p>
<p>1ã€ç®€å•ç‚¹ï¼Œä¸€å¥ä»£ç å°±è¡Œ,æ³¨æ„ç”¨è¿™ä¸ªæ—¶å€™ï¼Œheadé‡Œçš„ä»£ç éœ€è¦æ˜¯å®˜æ–¹è·å–çš„æœ€æ–°çš„</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>workbox.googleAnalytics.initialize()
</span></span></code></pre></div><p>2ã€å¸¦ç¦»çº¿ç»Ÿè®¡</p>
<p>éœ€è¦å»Google analytics æ·»åŠ è‡ªå®šä¹‰æŒ‡æ ‡å’Œè‡ªå®šä¹‰ç»´åº¦</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>workbox.googleAnalytics.initialize({
</span></span><span style="display:flex;"><span>    parameterOverrides: {
</span></span><span style="display:flex;"><span>        cd1: <span style="color:#0ff;font-weight:bold">&#39;offline&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    hitFilter: (params) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">const</span> queueTimeInSeconds = <span style="color:#fff;font-weight:bold">Math</span>.round(params.get(<span style="color:#0ff;font-weight:bold">&#39;qt&#39;</span>) / <span style="color:#ff0;font-weight:bold">1000</span>);
</span></span><span style="display:flex;"><span>        params.set(<span style="color:#0ff;font-weight:bold">&#39;cm1&#39;</span>, queueTimeInSeconds);
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="å…¶ä»–åç¼€åŒ¹é…">å…¶ä»–åç¼€åŒ¹é…</h3>
<p>ä¿è¯ä½“éªŒè‰¯å¥½</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>workbox.routing.registerRoute(
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">RegExp</span>(<span style="color:#0ff;font-weight:bold">&#39;.*.(?:png|jpg|jpeg|svg|gif|webp|ico)&#39;</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> workbox.strategies.StaleWhileRevalidate()
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>workbox.routing.registerRoute(
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">RegExp</span>(<span style="color:#0ff;font-weight:bold">&#39;.*.(css|js)&#39;</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> workbox.strategies.StaleWhileRevalidate()
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// é»˜è®¤
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>workbox.routing.setDefaultHandler(
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> workbox.strategies.NetworkFirst({
</span></span><span style="display:flex;"><span>        networkTimeoutSeconds: <span style="color:#ff0;font-weight:bold">3</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>æ”¹é€ å®Œæˆï¼Œå°½æƒ…äº«ç”¨ğŸ‰</p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<blockquote>
<p><a href="https://blog.baoshuo.ren/post/workbox-service-worker/">åˆè¯† Service Worker â€”â€” ä½¿ç”¨ Workbox å¿«é€Ÿå¼€å‘ Service Worker - å®ç¡•åšå®¢</a></p>
<p><a href="https://pwa.alienzhou.com/">PWAæ¥äº†ï¼Œä½ å‡†å¤‡å¥½äº†ä¹ˆï¼Ÿ - PWAå­¦ä¹ æ‰‹å†Œ</a></p>
<p><a href="https://lavas-project.github.io/pwa-book/">HOME Â· PWA åº”ç”¨å®æˆ˜</a></p>
<p><a href="https://developer.chrome.com/docs/workbox/service-worker-overview/">Service worker overview - Chrome Developers</a></p>
</blockquote>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
