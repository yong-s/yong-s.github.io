<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>å¼ ä¸‰çš„ç½‘ç»œæ—¥å¿—</title>
    <link>https://blog.zsan.ml/</link>
    <description>Recent content on å¼ ä¸‰çš„ç½‘ç»œæ—¥å¿—</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>&lt;a href=&#34;https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh&#34; target=&#34;_blank&#34;&gt;CC BY-NC-SA 4.0&lt;/a&gt;</copyright>
    <lastBuildDate>Sun, 07 Aug 2022 16:28:27 +0800</lastBuildDate><atom:link href="https://blog.zsan.ml/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ç”¨PWA æ”¹é€ WEB ä¸ºåŸç”ŸApp</title>
      <link>https://blog.zsan.ml/posts/pwa-retrofitting/</link>
      <pubDate>Sun, 07 Aug 2022 16:28:27 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/pwa-retrofitting/</guid>
      <description>PWAä½¿WEBç½‘ç«™æ›´ä¸æ»‘</description>
      <content:encoded><![CDATA[<blockquote>
<p>æœ€è¿‘é—²æ¥æ— äº‹ï¼ŒæŠŠç½‘ç«™å‡çº§äº†ï¼Œæ›´åŠ åƒåŸç”ŸAPP</p>
<p>è®°å½•ä¸‹å‡çº§è¿‡ç¨‹ï¼Œå…å¾—ä»¥åå¿˜äº†</p>
<p>PWAæ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥å»ç½‘ä¸Šæœä¸€ä¸‹ï¼Œbutä¸­æ–‡æ–‡ç« å°‘ä¸€ç‚¹</p>
<p>ç”¨Google å°è£…çš„ å¥½çš„ workbox æ¥å‡çº§</p>
</blockquote>
<h2 id="æ³¨å†Œservice-worker">æ³¨å†ŒService Worker</h2>
<p>åœ¨htmlé¡µé¢æ³¨å†Œ SW</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>&lt;script&gt;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span> (<span style="color:#0ff;font-weight:bold">&#39;serviceWorker&#39;</span> <span style="color:#fff;font-weight:bold">in</span> navigator) {
</span></span><span style="display:flex;"><span>        navigator.serviceWorker.getRegistrations()
</span></span><span style="display:flex;"><span>            .then(regs =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">let</span> reg <span style="color:#fff;font-weight:bold">of</span> regs) {
</span></span><span style="display:flex;"><span>                    <span style="color:#007f7f">// æ³¨é”€æ‰ä¸æ˜¯å½“å‰ä½œç”¨åŸŸçš„æ‰€æœ‰çš„ Service Worker
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                     <span style="color:#fff;font-weight:bold">if</span> (reg.scope !== <span style="color:#0ff;font-weight:bold">&#39;http://localhost:8000/&#39;</span>) {
</span></span><span style="display:flex;"><span>                        reg.unregister()
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">// æ³¨é”€æ‰æ±¡æŸ“ Service Worker ä¹‹åå†é‡æ–°æ³¨å†Œè‡ªå·±ä½œç”¨åŸŸçš„ Service Worker
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#fff;font-weight:bold">window</span>.addEventListener(<span style="color:#0ff;font-weight:bold">&#39;load&#39;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>                    navigator.serviceWorker.register(<span style="color:#0ff;font-weight:bold">&#39;./sw.js&#39;</span>).then(<span style="color:#fff;font-weight:bold">function</span> (e) { console.log(<span style="color:#0ff;font-weight:bold">&#34;æ”¯æŒsw:&#34;</span>, e.scope) })
</span></span><span style="display:flex;"><span>                })
</span></span><span style="display:flex;"><span>            })
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f00">/script&gt;</span>
</span></span></code></pre></div><h2 id="ç”Ÿæˆswjsæ–‡ä»¶">ç”ŸæˆSW.jsæ–‡ä»¶</h2>
<h3 id="google-cdn">google cdn</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>importScripts(<span style="color:#0ff;font-weight:bold">&#34;  &#39;https://storage.googleapis.com/workbox-cdn/releases/6.1.1/workbox-sw.js&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">&#34;</span>);
</span></span></code></pre></div><p>å›½å†…å»ºè®®ä¸ä½¿ç”¨Google</p>
<h3 id="jsdelivr-cdn">jsdelivr cdn</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>importScripts(<span style="color:#0ff;font-weight:bold">&#34;https://fastly.jsdelivr.net/npm/workbox-sw@6.5.4/build/workbox-sw.min.js&#34;</span>);
</span></span></code></pre></div><h2 id="swjs-ç¼–å†™">SW.js ç¼–å†™</h2>
<h3 id="é…ç½®ç›¸å…³">é…ç½®ç›¸å…³</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>workbox.setConfig(
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ˜¯å¦å¼€å¯debug
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        debug: <span style="color:#fff;font-weight:bold">false</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">let</span> cacheSuffixVersion = <span style="color:#0ff;font-weight:bold">&#39;-220806&#39;</span>; <span style="color:#007f7f">// ç¼“å­˜ç‰ˆæœ¬å·
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">const</span> maxEntries = <span style="color:#ff0;font-weight:bold">100</span>; <span style="color:#007f7f">// æœ€å¤§æ¡ç›®æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>workbox.core.setCacheNameDetails({
</span></span><span style="display:flex;"><span>    prefix: <span style="color:#0ff;font-weight:bold">&#39;zsan&#39;</span>, <span style="color:#007f7f">// å‰ç¼€
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    suffix: cacheSuffixVersion, <span style="color:#007f7f">// åç¼€
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">if</span> (workbox) {
</span></span><span style="display:flex;"><span>    console.log(<span style="color:#0ff;font-weight:bold">&#34;Yay! Workbox is loaded ğŸ‰&#34;</span>)
</span></span><span style="display:flex;"><span>} <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>    console.log(<span style="color:#0ff;font-weight:bold">&#34;Boo! Workbox didn&#39;t load ğŸ˜¬&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="é¢„ç¼“å­˜æ–‡ä»¶">é¢„ç¼“å­˜æ–‡ä»¶</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>et cacheFiles = [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        url: <span style="color:#0ff;font-weight:bold">&#34;/index.html&#34;</span>,
</span></span><span style="display:flex;"><span>        revision: cacheSuffixVersion
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>workbox.precaching.precacheAndRoute(cacheFiles);
</span></span></code></pre></div><h2 id="workboxç­–ç•¥">workboxç­–ç•¥</h2>
<h3 id="cdnç­–ç•¥">cdnç­–ç•¥</h3>
<p>å¯¹äºä¸€äº›cdnçš„ä½¿ç”¨ï¼Œä½¿ç”¨CacheFirst ç¼“å­˜ä¼˜å…ˆç­–ç•¥ï¼Œæ­¤ç­–ç•¥å°†é¦–å…ˆæ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦æœ‰å“åº”ï¼Œå¦‚æœæœ‰å“åº”ï¼Œåˆ™ä½¿ç”¨è¯¥ç­–ç•¥ã€‚å¦‚æœè¯·æ±‚ä¸åœ¨ç¼“å­˜ä¸­ï¼Œåˆ™å°†ä½¿ç”¨ç½‘ç»œï¼Œå¹¶å°†ä»»ä½•æœ‰æ•ˆå“åº”æ·»åŠ åˆ°ç¼“å­˜ä¸­ï¼Œç„¶åå†ä¼ é€’ç»™æµè§ˆå™¨ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>workbox.routing.registerRoute(
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">RegExp</span>(<span style="color:#0ff;font-weight:bold">&#39;^https://fastly\\.jsdelivr\\.net&#39;</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> workbox.strategies.CacheFirst({
</span></span><span style="display:flex;"><span>        cacheName: <span style="color:#0ff;font-weight:bold">&#39;static-immutable&#39;</span> + cacheSuffixVersion,
</span></span><span style="display:flex;"><span>        fetchOptions: {
</span></span><span style="display:flex;"><span>            mode: <span style="color:#0ff;font-weight:bold">&#39;cors&#39;</span>,
</span></span><span style="display:flex;"><span>            credentials: <span style="color:#0ff;font-weight:bold">&#39;omit&#39;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        plugins: [
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">new</span> workbox.expiration.ExpirationPlugin({
</span></span><span style="display:flex;"><span>                maxAgeSeconds: <span style="color:#ff0;font-weight:bold">30</span> * <span style="color:#ff0;font-weight:bold">24</span> * <span style="color:#ff0;font-weight:bold">60</span> * <span style="color:#ff0;font-weight:bold">60</span>,
</span></span><span style="display:flex;"><span>                purgeOnQuotaError: <span style="color:#fff;font-weight:bold">true</span>,
</span></span><span style="display:flex;"><span>            }),
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h3 id="å­—ä½“æ–‡ä»¶">å­—ä½“æ–‡ä»¶</h3>
<p>å¯¹äºå­—ä½“æ–‡ä»¶ï¼ŒåŸºæœ¬ä¸Šç¡®å®šå¥½å°±ä¸ä¼šæ”¹åŠ¨äº†ï¼Œè¿™é‡Œä½¿ç”¨StaleWhileRevalidateï¼Œæ­¤ç­–ç•¥å°†å¯¹ç½‘ç»œè¯·æ±‚ä½¿ç”¨ç¼“å­˜æ¥å“åº”ï¼ˆå¦‚æœæœ‰ï¼‰ï¼Œå¹¶åœ¨åå°æ›´æ–°ç¼“å­˜ã€‚å¦‚æœæœªç¼“å­˜ï¼Œå®ƒå°†ç­‰å¾…ç½‘ç»œå“åº”å¹¶ä½¿ç”¨å®ƒã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>workbox.routing.registerRoute(
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åŒ¹é… woff å­—ä½“
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">RegExp</span>(<span style="color:#0ff;font-weight:bold">&#39;.*.woff&#39;</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> workbox.strategies.StaleWhileRevalidate({
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// cache storage åç§°å’Œç‰ˆæœ¬å·
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        cacheName: <span style="color:#0ff;font-weight:bold">&#39;font-cache&#39;</span> + cacheSuffixVersion,
</span></span><span style="display:flex;"><span>        plugins: [
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// ä½¿ç”¨ expiration æ’ä»¶å®ç°ç¼“å­˜æ¡ç›®æ•°ç›®å’Œæ—¶é—´æ§åˆ¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">new</span> workbox.expiration.ExpirationPlugin({
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">// æœ€å¤§ä¿å­˜é¡¹ç›®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                maxEntries,
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">// ç¼“å­˜ 30 å¤©
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                maxAgeSeconds: <span style="color:#ff0;font-weight:bold">30</span> * <span style="color:#ff0;font-weight:bold">24</span> * <span style="color:#ff0;font-weight:bold">60</span> * <span style="color:#ff0;font-weight:bold">60</span>,
</span></span><span style="display:flex;"><span>            }),
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// ä½¿ç”¨ cacheableResponse æ’ä»¶ç¼“å­˜çŠ¶æ€ç ä¸º 0 çš„è¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">new</span> workbox.cacheableResponse.CacheableResponsePlugin({
</span></span><span style="display:flex;"><span>                statuses: [<span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">200</span>],
</span></span><span style="display:flex;"><span>            }),
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h3 id="apièµ„æº">APIèµ„æº</h3>
<p>APIæ•°æ®çš„è¯·æ±‚ä½¿ç”¨NetworkFirst ç­–ç•¥ï¼Œæ­¤ç­–ç•¥å°†å°è¯•é¦–å…ˆä»ç½‘ç»œè·å¾—å“åº”ã€‚å¦‚æœæ”¶åˆ°å“åº”ï¼Œå®ƒå°†æŠŠå®ƒä¼ é€’ç»™æµè§ˆå™¨ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°ç¼“å­˜ä¸­ã€‚å¦‚æœç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œå°†ä½¿ç”¨æœ€åä¸€ä¸ªç¼“å­˜çš„å“åº”ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>workbox.routing.registerRoute(
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åŒ¹é… leancloudapi.xsbb.ml
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">RegExp</span>(<span style="color:#0ff;font-weight:bold">&#39;^https://(?:blog\\.zsan\\.ml)&#39;</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> workbox.strategies.NetworkFirst({
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// cache storage åç§°å’Œç‰ˆæœ¬å·
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        cacheName: <span style="color:#0ff;font-weight:bold">&#39;blog-api-cache&#39;</span> + cacheSuffixVersion,
</span></span><span style="display:flex;"><span>        fetchOptions: {
</span></span><span style="display:flex;"><span>            mode: <span style="color:#0ff;font-weight:bold">&#39;cors&#39;</span>,
</span></span><span style="display:flex;"><span>            credentials: <span style="color:#0ff;font-weight:bold">&#39;omit&#39;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        networkTimeoutSeconds: <span style="color:#ff0;font-weight:bold">3</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h3 id="google-analytics">Google-Analytics</h3>
<p>å®˜æ–¹æœ‰<a href="https://developers.google.com/web/tools/workbox/guides/enable-offline-analytics">Google Analytics ç¦»çº¿ç»Ÿè®¡æ’ä»¶</a>,ä½†æ˜¯è‹±æ–‡çš„ï¼Œç›¸å…³èµ„æ–™ä¹Ÿå°‘ï¼ŒæŠ˜è…¾äº†å¥½ä¸€é˜µå­</p>
<p>1ã€ç®€å•ç‚¹ï¼Œä¸€å¥ä»£ç å°±è¡Œ,æ³¨æ„ç”¨è¿™ä¸ªæ—¶å€™ï¼Œheadé‡Œçš„ä»£ç éœ€è¦æ˜¯å®˜æ–¹è·å–çš„æœ€æ–°çš„</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>workbox.googleAnalytics.initialize()
</span></span></code></pre></div><p>2ã€å¸¦ç¦»çº¿ç»Ÿè®¡</p>
<p>éœ€è¦å»Google analytics æ·»åŠ è‡ªå®šä¹‰æŒ‡æ ‡å’Œè‡ªå®šä¹‰ç»´åº¦</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>workbox.googleAnalytics.initialize({
</span></span><span style="display:flex;"><span>    parameterOverrides: {
</span></span><span style="display:flex;"><span>        cd1: <span style="color:#0ff;font-weight:bold">&#39;offline&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    hitFilter: (params) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">const</span> queueTimeInSeconds = <span style="color:#fff;font-weight:bold">Math</span>.round(params.get(<span style="color:#0ff;font-weight:bold">&#39;qt&#39;</span>) / <span style="color:#ff0;font-weight:bold">1000</span>);
</span></span><span style="display:flex;"><span>        params.set(<span style="color:#0ff;font-weight:bold">&#39;cm1&#39;</span>, queueTimeInSeconds);
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="å…¶ä»–åç¼€åŒ¹é…">å…¶ä»–åç¼€åŒ¹é…</h3>
<p>ä¿è¯ä½“éªŒè‰¯å¥½</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>workbox.routing.registerRoute(
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">RegExp</span>(<span style="color:#0ff;font-weight:bold">&#39;.*.(?:png|jpg|jpeg|svg|gif|webp|ico)&#39;</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> workbox.strategies.StaleWhileRevalidate()
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>workbox.routing.registerRoute(
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">RegExp</span>(<span style="color:#0ff;font-weight:bold">&#39;.*.(css|js)&#39;</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> workbox.strategies.StaleWhileRevalidate()
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// é»˜è®¤
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>workbox.routing.setDefaultHandler(
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> workbox.strategies.NetworkFirst({
</span></span><span style="display:flex;"><span>        networkTimeoutSeconds: <span style="color:#ff0;font-weight:bold">3</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>æ”¹é€ å®Œæˆï¼Œå°½æƒ…äº«ç”¨ğŸ‰</p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<blockquote>
<p><a href="https://blog.baoshuo.ren/post/workbox-service-worker/">åˆè¯† Service Worker â€”â€” ä½¿ç”¨ Workbox å¿«é€Ÿå¼€å‘ Service Worker - å®ç¡•åšå®¢</a></p>
<p><a href="https://pwa.alienzhou.com/">PWAæ¥äº†ï¼Œä½ å‡†å¤‡å¥½äº†ä¹ˆï¼Ÿ - PWAå­¦ä¹ æ‰‹å†Œ</a></p>
<p><a href="https://lavas-project.github.io/pwa-book/">HOME Â· PWA åº”ç”¨å®æˆ˜</a></p>
<p><a href="https://developer.chrome.com/docs/workbox/service-worker-overview/">Service worker overview - Chrome Developers</a></p>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>åœ¨Cloudflare è®¾ç½®åŸŸå 301 é‡å®šå‘</title>
      <link>https://blog.zsan.ml/posts/cloudflare-301-set/</link>
      <pubDate>Sun, 31 Jul 2022 19:54:01 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/cloudflare-301-set/</guid>
      <description>åœ¨Cloudflare è®¾ç½®åŸŸå 301 é‡å®šå‘ æœ‰ç‚¹å°å‘</description>
      <content:encoded><![CDATA[<blockquote>
<p>å¾ˆä¹…ä»¥å‰é‡åˆ°çš„é—®é¢˜äº†ï¼Œç”¨cloudflare è®¾ç½®æœ‰å¤§å‘ï¼Œä»Šå¤©æ¥è®°å½•ä¸‹</p>
<p>ä¹‹å‰ç½‘ç«™çš„åŸŸåéœ€è¦æ›´æ¢ï¼Œblogç­‰åŸŸåä¹Ÿéœ€è¦ä»æ—§åŸŸååˆ°æ–°åŸŸå</p>
</blockquote>
<p>æ—§åŸŸåï¼šolddona.com</p>
<p>æ–°åŸŸåï¼šnewdona.com</p>
<p>ç°åœ¨éœ€è¦è®¿é—® olddona.com æ—¶è·³è½¬åˆ° newdona.com</p>
<p>1ã€clourflare ä¸Š dns è§£æ olddona.com</p>
<p>ç™»å½•clourflareã€ç‚¹å‡» dnsã€ç‚¹å‡»æ·»åŠ ä¸€æ¡aè®°å½•</p>
<blockquote>
<p>ç±»å‹ï¼šA</p>
<p>åç§°ï¼šolddona.com</p>
<p>ipv4åœ°å€ï¼š8.8.8.8</p>
</blockquote>
<p>psï¼šipv4 åœ°å€ä¸€å®šè¦å¡«ä¸€ä¸ªå¯ç”¨çš„ï¼Œè¿™æ˜¯ä¸ªå‘</p>
<p>2ã€cloudflare æ·»åŠ é‡å®šå‘</p>
<ol>
<li>
<p>ç‚¹å‡»è§„åˆ™</p>
</li>
<li>
<p>ç‚¹å‡»åˆ›å»ºé¡µé¢è§„åˆ™</p>
</li>
<li>
<blockquote>
<p>url: olddona.com/*</p>
<p>é€‰å–è®¾ç½®ï¼šè½¬å‘URLã€301æ°¸ä¹…</p>
<p>è¾“å…¥ç›®æ ‡URLï¼šhttps://newdona.com/$1</p>
</blockquote>
</li>
</ol>
<p>ä¿å­˜ä¹‹åï¼Œå»è®¿é—®olddona.com å¯ä»¥è·³åˆ° newdona.com æˆåŠŸğŸ‰</p>
<p>ä¹Ÿå¯ä»¥è¯•ä¸‹olddona.com/* æ˜¯å¦æˆåŠŸè·³è½¬å³å¯</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Mac Brew Tab å‘½ä»¤è‡ªåŠ¨è¡¥å…¨</title>
      <link>https://blog.zsan.ml/posts/mac-brew-tab/</link>
      <pubDate>Tue, 26 Jul 2022 22:17:56 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/mac-brew-tab/</guid>
      <description>Macç³»ç»Ÿä¸‹brew æŒ‰tabå‘½ä»¤ è‡ªåŠ¨è¡¥å…¨</description>
      <content:encoded><![CDATA[<blockquote>
<p>mac armç‰ˆ 2021ç‰ˆçš„brew ä¸€é”®å®‰è£…å å‘½ä»¤ æŒ‰tab ä¸èƒ½è¡¥å…¨ï¼Œä»Šå¤©æœ‰ç‚¹é—²ï¼Œå°±æœäº†ä¸€ä¸‹ï¼Œç»™è§£å†³äº†</p>
<p>ç”¨çš„ Oh My Zshï¼Œå®˜æ–¹æ–‡æ¡£é‡Œå†™çš„å¾ˆè¯¦ç»†ï¼Œä¸è¿‡æ˜¯è‹±æ–‡çš„ï¼Œè¿™é‡Œç»™ç¿»è¯‘è®°å½•ä¸‹</p>
</blockquote>
<p>1ã€åœ¨ ~/.zshrc é‡Œæ·»åŠ ä¸‹é¢code</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span> <span style="color:#fff;font-weight:bold">type</span> brew &amp;&gt;/dev/null
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>  FPATH=<span style="color:#0ff;font-weight:bold">&#34;</span><span style="color:#fff;font-weight:bold">$(</span>brew --prefix<span style="color:#fff;font-weight:bold">)</span><span style="color:#0ff;font-weight:bold">/share/zsh/site-functions:</span><span style="color:#0ff;font-weight:bold">${</span>FPATH<span style="color:#0ff;font-weight:bold">}</span><span style="color:#0ff;font-weight:bold">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  autoload -Uz compinit
</span></span><span style="display:flex;"><span>  compinit
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">fi</span>
</span></span></code></pre></div><p>2ã€åœ¨ ~/.zprofile é‡Œæ·»åŠ ä¸‹é¢code</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>FPATH=<span style="color:#0ff;font-weight:bold">&#34;</span><span style="color:#fff;font-weight:bold">$(</span>brew --prefix<span style="color:#fff;font-weight:bold">)</span><span style="color:#0ff;font-weight:bold">/share/zsh/site-functions:</span><span style="color:#0ff;font-weight:bold">${</span>FPATH<span style="color:#0ff;font-weight:bold">}</span><span style="color:#0ff;font-weight:bold">&#34;</span>
</span></span></code></pre></div><p>3ã€å¼ºåˆ¶é‡å»º<code>zcompdump</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>rm -f ~/.zcompdump; compinit
</span></span></code></pre></div><p>4ã€å¦‚æœå‡ºç° zsh compinit: insecure directory è­¦å‘Š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>chmod -R go-w <span style="color:#0ff;font-weight:bold">&#34;</span><span style="color:#fff;font-weight:bold">$(</span>brew --prefix<span style="color:#fff;font-weight:bold">)</span><span style="color:#0ff;font-weight:bold">/share&#34;</span>
</span></span></code></pre></div><p>å‚è€ƒï¼š</p>
<blockquote>
<p><a href="https://docs.brew.sh/Shell-Completion">Homebrew Shell Completion â€” Homebrew Documentation</a></p>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>ä½æˆæœ¬æ­å»ºé«˜è´¨é‡æ’­å®¢å‘å¸ƒæœåŠ¡</title>
      <link>https://blog.zsan.ml/posts/how-to-make-podcast/</link>
      <pubDate>Tue, 12 Jul 2022 22:04:47 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/how-to-make-podcast/</guid>
      <description>ç”¨æ’­å®¢åœ¨iPhoneä¸Šå¬é‚£äº›è‡ªå·±å–œæ¬¢çš„æ­Œæ›²</description>
      <content:encoded><![CDATA[<blockquote>
<p>å¼•è¨€ï¼šæœ€è¿‘ç”¨äº†iPhoneæ‰‹æœºï¼Œå¬Apple musicçš„æ—¶å€™ï¼Œæœ‰äº›å–œæ¬¢çš„æ­Œæ›²å¹¶æ²¡æœ‰ï¼Œæƒ³ä¸‹è½½åˆ°æœ¬åœ°ä½†ç”±äºiOSçš„ç”Ÿæ€å°é—­ï¼Œæ“ä½œå¤ªéº»çƒ¦ï¼›</p>
<p>åœ¨å¯»æ‰¾è§£å†³æ–¹æ¡ˆæ—¶å‘ç°ç”¨è‡ªå»ºæ’­å®¢æ¥å®ç°ä¸‹è½½éŸ³ä¹æ–¹æ¡ˆå¯è¡Œï¼Œäºæ˜¯å°±æœ‰äº†ä¸‹é¢çš„æ•™ç¨‹</p>
</blockquote>
<h2 id="what">What</h2>
<p>æ’­å®¢ï¼ˆpodcastï¼‰åˆ›ä½œè€…å°†éŸ³é¢‘æˆ–è§†é¢‘ä¸Šä¼ è‡³<a href="https://zh.wikipedia.org/wiki/RSS" title="RSS">RSS</a>æˆ–åœ¨çº¿æ’­å®¢å¹³å°ï¼Œå¬ä¼—æˆ–è§‚ä¼—åˆ™é€šè¿‡<a href="https://zh.wikipedia.org/wiki/%E8%BB%9F%E4%BB%B6" title="è½¯ä»¶">è½¯ä»¶</a>è·å–èŠ‚ç›®æ›´æ–°ã€‚</p>
<h2 id="how">How</h2>
<p>åˆ¶ä½œè¿‡ç¨‹ä¸è¯´äº†ï¼Œæ¥è°ˆè°ˆå‘å¸ƒè¿‡ç¨‹ï¼Œå¾ˆç®€å•ï¼Œä¸€ä¸ªæ”¯æŒRSSçš„ç½‘ç«™å‘å¸ƒéŸ³é¢‘ä¿¡æ¯ä¾›ç”¨æˆ·æ‹‰å–ï¼Œä¸€ä¸ªéŸ³é¢‘æ‰˜ç®¡å¹³å°å­˜æ”¾éŸ³é¢‘</p>
<ul>
<li>ç½‘ç«™ç›´æ¥Hugoæ­å»ºï¼Œç”¨zenä¸»é¢˜æ”¯æŒpodcastï¼Œæ”¾åœ¨GitHub pageä¸Šï¼ŒåŸŸåå¯ä»¥åœ¨freedomä¸Šæ³¨å†Œï¼Œç”¨cloudflare DNSè§£æå’ŒåŠ é€Ÿ</li>
</ul>
<p>hugo æ­å»ºæ’­å®¢</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#007f7f">#æ–°å»ºç½‘ç«™</span>
</span></span><span style="display:flex;"><span>hugo new site podcast
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#å®‰è£… zenä¸»é¢˜</span>
</span></span><span style="display:flex;"><span>git clone https://github.com/frjo/hugo-theme-zen.git themes/zen
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#åœ¨contentå†…æ–°å»ºpodcastæ–‡ä»¶å¤¹ï¼Œæ­¤é¡µé¢å†…æ–°å¢éŸ³é¢‘</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> content
</span></span><span style="display:flex;"><span>mkdir podcast
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#podcastçš„ä¸€äº›è®¾ç½®</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#è®¾ç½®çš„å›¾ç‰‡ï¼Œéœ€è¦ç°åœ¨æ ¹ç›®å½•æ–°å»º assets/images ç›®å½•ï¼Œå–ç›¸å¯¹è·¯å¾„å³å¯</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#podcast éŸ³é¢‘ä¸‹é¢æ˜¾ç¤ºé“¾æ¥ï¼Œå¦‚ä½•å–æ¶ˆ</span>
</span></span><span style="display:flex;"><span>vim layouts/partials/podcast.html
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#æ³¨é‡Šæ‰ä¸‹é¢è¡Œ</span>
</span></span><span style="display:flex;"><span>&lt;figcaption&gt;&lt;a href=<span style="color:#0ff;font-weight:bold">&#34;{{ </span>$src<span style="color:#0ff;font-weight:bold"> }}&#34;</span>&gt;{{ .Title }}&lt;/a&gt;&lt;/figcaption&gt;
</span></span></code></pre></div><p>podcast é…ç½®</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#007f7f">#æ–‡ç« é¡¶éƒ¨æ–°å¢å‚æ•°</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">podcast</span>:
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">mp3</span>:
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">duration</span>:
</span></span></code></pre></div><ul>
<li>éŸ³é¢‘æ‰˜ç®¡å¹³å°è‡ªå»ºmininæœåŠ¡å­˜å‚¨éŸ³é¢‘</li>
</ul>
<p>minioæœåŠ¡å¾ˆå¼ºå¤§ï¼Œæ„Ÿå…´è¶£å¯ä»¥äº†è§£ä¸€ä¸‹</p>
<p>docker éƒ¨ç½²</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="font-weight:bold">version</span>: <span style="color:#0ff;font-weight:bold">&#39;3.3&#39;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">services</span>:
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">minio</span>:
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">image</span>: quay.io/minio/minio
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">container_name</span>: minio1
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">ports</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#ff0;font-weight:bold">9090</span>:<span style="color:#ff0;font-weight:bold">9090</span>   <span style="color:#007f7f">#æ§åˆ¶å°ç«¯å£</span>
</span></span><span style="display:flex;"><span>        - <span style="color:#ff0;font-weight:bold">9000</span>:<span style="color:#ff0;font-weight:bold">9000</span>   <span style="color:#007f7f">#APIç«¯å£</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">volumes</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#0ff;font-weight:bold">&#39;./data:/data&#39;</span>
</span></span><span style="display:flex;"><span>        - <span style="color:#0ff;font-weight:bold">&#39;./config:/root/.minio&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">environment</span>:
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">MINIO_ROOT_USER</span>: admin     <span style="color:#007f7f">#ç®¡ç†ç”¨æˆ·å</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">MINIO_ROOT_PASSWORD</span>: admin   <span style="color:#007f7f">#ç®¡ç†å¯†ç </span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">command</span>: server /data --console-address &#39;:9090&#39;
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">restart</span>: always
</span></span></code></pre></div><p>éƒ¨ç½²æˆåŠŸï¼Œip:9090è®¿é—®ç™»å½•</p>
<p>æ§åˆ¶å°æ“ä½œ</p>
<p>1ã€åˆ›å»ºå­˜å‚¨æ¡¶</p>
<p>create bucket</p>
<p>2ã€ç‚¹å‡»manageï¼ŒAccess Rules</p>
<p>add rule</p>
<div>
prefixï¼š*.* </br>
access:readonly
</div>
<p>3ã€ä¸Šä¼ éŸ³é¢‘</p>
<p>4ã€åˆ†äº«æ–‡ä»¶ï¼Œé“¾æ¥åœ°å€ å¤åˆ¶å‡ºæ¥ï¼Œå‰é¢ipæ¢æˆå¤–éƒ¨ipå³å¯</p>
<p>æŠŠåœ°å€è´´åœ¨ä¸Šé¢podcast å‚æ•° mp3 çš„åœ°æ–¹</p>
<h2 id="enjoy">enjoy</h2>
<p>è¿™æ ·ç®—ä¸‹æ¥ï¼Œé™¤äº†ç”¨äº†ä¸€å°æœåŠ¡å™¨å¤–ï¼Œå…¶ä»–å…¨éƒ¨è´¹ç”¨ä¸ºé›¶ï¼Œæ€»è´¹ç”¨ç™¾å…ƒä¸åˆ°</p>
<p>éƒ¨ç½²å…¨éƒ¨å®Œæˆï¼Œç‚¹å‡»RSSé“¾æ¥æ”¾åˆ°è®¢é˜…çš„åœ°æ–¹ï¼Œå°½æƒ…äº«ç”¨å§ï¼ğŸ‰</p>
<blockquote>
<p>å‚è€ƒï¼š</p>
<p><a href="https://themes.gohugo.io/themes/hugo-theme-zen/">Zen | Hugo Themes</a></p>
<p><a href="https://github.com/frjo/hugo-theme-zen">GitHub - frjo/hugo-theme-zen: A fast and clean Hugo base theme with css-grid and Hugo pipes support.</a></p>
<p><a href="https://liujiacai.net/blog/2022/01/08/how-to-make-podcast/#headline-7">å¦‚ä½•é›¶æˆæœ¬å¼€å§‹ä¸€æ¡£æ–°æ’­å®¢ - Keep Coding</a></p>
<p><a href="https://help.apple.com/itc/podcasts_connect/#/">è‹¹æœåšå®¢æŒ‡å—</a></p>
<p><a href="https://github.com/minio/minio">GitHub - minio/minio: Multi-Cloud Object Storage</a></p>
<p><a href="https://docs.min.io/docs/minio-quickstart-guide.html">MinIO | The MinIO Quickstart Guide</a></p>
<p><a href="https://blog.foundme.top/archives/154">è‡ªå»ºå¯¹è±¡å­˜å‚¨Minio - åšå®¢å°ç«™</a></p>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>Autojs ç¬”è®°</title>
      <link>https://blog.zsan.ml/posts/autojs-notes/</link>
      <pubDate>Sun, 26 Jun 2022 15:08:44 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/autojs-notes/</guid>
      <description>ç”¨autojsåœ¨Androidä¸Šå†™äº›å°è„šæœ¬å§ï¼</description>
      <content:encoded><![CDATA[<blockquote>
<p>æœ€è¿‘è–…ğŸ¦™æ¥è§¦äº†autojsï¼Œåœ¨Androidæ‰‹æœºä¸Šå¯è‡ªåŠ¨åŒ–è¿è¡Œçš„è„šæœ¬ï¼Œä¸ç”¨rootï¼Œå¯ç›´æ¥è¿è¡Œï¼Œè½»é‡å°å·§ï¼Œåº•å±‚è°ƒç”¨Android APIï¼Œè‡ªå·±å¯å°è£…APIğŸ‘</p>
</blockquote>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p>autojsåŸä½œè€…å·²ä¸å†ç»´æŠ¤ï¼Œæ¨å‡ºäº†autojs.proç‰ˆï¼Œæœ‰é’±çš„å¤§ä½¬å¯ä»¥ç›´æ¥å»å®‰è£…ä¸‹è½½ï¼Œå®˜æ–¹æ–‡æ¡£ä¹Ÿå¾ˆå…¨</p>
<p>æ²¡é’±çš„è¯ï¼Œå¯ä»¥ç”¨autoxjsï¼Œä»åŸæœ‰å¼€æºåº“æ¥æ‰‹è¿‡æ¥çš„ï¼Œå¼€æºå…è´¹</p>
<p><a href="https://github.com/kkevsekk1/AutoX">GitHub - kkevsekk1/AutoX: A UiAutomator on android, does not need root access(å®‰å“å¹³å°ä¸Šçš„JavaScriptè‡ªåŠ¨åŒ–å·¥å…·)</a></p>
<h2 id="å¸¸ç”¨è¯­æ³•">å¸¸ç”¨è¯­æ³•</h2>
<h3 id="è·å–è®¾å¤‡ä¿¡æ¯">è·å–è®¾å¤‡ä¿¡æ¯</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#007f7f">// æ‰“å°è¿è¡Œç¯å¢ƒä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">let</span> str = <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">let</span> str = <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;å±å¹•å®½åº¦:&#34;</span> + device.width;
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;\nå±å¹•é«˜åº¦:&#34;</span> + device.height;
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;\nbuildId:&#34;</span> + device.buildId;
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;\nä¸»æ¿:&#34;</span> + device.board;
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;\nåˆ¶é€ å•†:&#34;</span> + device.brand;
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;\nå‹å·:&#34;</span> + device.model;
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;\näº§å“åç§°:&#34;</span> + device.product;
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;\nbootloaderç‰ˆæœ¬:&#34;</span>
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;\nbootloaderç‰ˆæœ¬:&#34;</span> + device.bootloader;
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;\nç¡¬ä»¶åç§°:&#34;</span> + device.hardware;
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;\nå”¯ä¸€æ ‡è¯†ç :&#34;</span> + device.fingerprint;
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;\nIMEI: &#34;</span> + device.getIMEI();
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;\nAndroidId: &#34;</span> + device.getAndroidId();
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;\nMac: &#34;</span> + device.getMacAddress();
</span></span><span style="display:flex;"><span>str += <span style="color:#0ff;font-weight:bold">&#34;\nAPI: &#34;</span> + device.sdkInt;
</span></span><span style="display:flex;"><span>log(str);
</span></span></code></pre></div><h3 id="æ‰“å¼€åº”ç”¨å¸‚åœºappè¯¦æƒ…é¡µ">æ‰“å¼€åº”ç”¨å¸‚åœºappè¯¦æƒ…é¡µ</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#007f7f">//æ‰“å¼€åº”ç”¨å¸‚åœºappè¯¦æƒ…é¡µ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">function</span> startAppStore() {
</span></span><span style="display:flex;"><span>    toastLog(<span style="color:#0ff;font-weight:bold">&#34;å»åº”ç”¨å¸‚åœº...&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> i = app.intent({
</span></span><span style="display:flex;"><span>        action: <span style="color:#0ff;font-weight:bold">&#34;VIEW&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// type: &#34;image/png&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        data: app.parseUri(<span style="color:#0ff;font-weight:bold">&#39;market://details?id=&#39;</span> + pkgName),
</span></span><span style="display:flex;"><span>        flags: [<span style="color:#0ff;font-weight:bold">&#34;activity_new_task&#34;</span>],
</span></span><span style="display:flex;"><span>        packageName: myDevice(<span style="color:#0ff;font-weight:bold">&#34;Markets&#34;</span>),
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    context.startActivity(i);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="æ£€æµ‹appå®‰è£…çŠ¶æ€">æ£€æµ‹appå®‰è£…çŠ¶æ€</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#007f7f">// é€šè¿‡åˆ¤æ–­åŒ…ååˆ¤æ–­æ˜¯å¦å®‰è£…app
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>getAppName(pkgName)
</span></span></code></pre></div><h3 id="è·å–å½“å‰æ—¶é—´">è·å–å½“å‰æ—¶é—´</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">function</span> getCurData() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> now = <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">Date</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> timeNow;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> y = now.getFullYear(); <span style="color:#007f7f">//å¾—åˆ°å¹´ä»½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">let</span> m = now.getMonth() + <span style="color:#ff0;font-weight:bold">1</span>;<span style="color:#007f7f">//å¾—åˆ°æœˆä»½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">let</span> d = now.getDate();<span style="color:#007f7f">//å¾—åˆ°æ—¥æœŸ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">// let day = now.getDay();//å¾—åˆ°å‘¨å‡ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">let</span> h = now.getHours();<span style="color:#007f7f">//å¾—åˆ°å°æ—¶æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">let</span> i = now.getMinutes();<span style="color:#007f7f">//å¾—åˆ°åˆ†é’Ÿæ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">let</span> s = now.getSeconds();<span style="color:#007f7f">//å¾—åˆ°ç§’æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>    timeNow = y + <span style="color:#0ff;font-weight:bold">&#34;-&#34;</span> + m + <span style="color:#0ff;font-weight:bold">&#34;-&#34;</span> + d + <span style="color:#0ff;font-weight:bold">&#34; &#34;</span> + h + <span style="color:#0ff;font-weight:bold">&#34;:&#34;</span> + i + <span style="color:#0ff;font-weight:bold">&#34;:&#34;</span> + s;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// log(timeNow);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> timeNow;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="è°ƒè¯•">è°ƒè¯•</h2>
<p>åœ¨vscodeå†…å®‰è£…<a href="https://marketplace.visualstudio.com/items?itemName=aaroncheng.auto-js-vsce-fixed">è°ƒè¯•æ’ä»¶</a></p>
<blockquote>
<p>1ã€æŒ‰Â <code>Ctrl+Shift+P</code>Â æˆ–ç‚¹å‡»&quot;æŸ¥çœ‹&quot;-&gt;&ldquo;å‘½ä»¤é¢æ¿&quot;å¯è°ƒå‡ºå‘½ä»¤é¢æ¿ï¼Œè¾“å…¥Â <code>Autox.js</code>Â å¯ä»¥çœ‹åˆ°å‡ ä¸ªå‘½ä»¤ï¼Œç§»åŠ¨å…‰æ ‡åˆ°å‘½ä»¤<code>Auto.js Autox,js: Start All Server</code>ï¼ŒæŒ‰å›è½¦é”®æ‰§è¡Œè¯¥å‘½ä»¤ã€‚</p>
<p>2ã€é€šè¿‡æ— çº¿æˆ–æœ‰çº¿è¿æ¥</p>
<p>3ã€ä¹‹åå°±å¯ä»¥åœ¨ç”µè„‘ä¸Šç¼–è¾‘JavaScriptæ–‡ä»¶å¹¶é€šè¿‡å‘½ä»¤<code>Run</code>æˆ–è€…æŒ‰é”®<code>F5</code>åœ¨æ‰‹æœºä¸Šè¿è¡Œäº†ã€‚</p>
</blockquote>
<h2 id="æ‰“åŒ…">æ‰“åŒ…</h2>
<p>è°ƒè¯•å®Œæˆåï¼ŒæŒ‰Â <code>Ctrl+Shift+P</code>Â æˆ–ç‚¹å‡»&quot;æŸ¥çœ‹&rdquo;-&gt;&ldquo;å‘½ä»¤é¢æ¿&quot;å¯è°ƒå‡ºå‘½ä»¤é¢æ¿ï¼Œè¾“å…¥Â <code>Autox.js</code>Â å¯ä»¥çœ‹åˆ°å‡ ä¸ªå‘½ä»¤ï¼Œç§»åŠ¨å…‰æ ‡åˆ°å‘½ä»¤<code>Auto.js Autox,js: Save On Device</code>ï¼ŒæŒ‰å›è½¦é”®æ‰§è¡Œè¯¥å‘½ä»¤ã€‚</p>
<p>ä¿å­˜åˆ°æ‰‹æœºä¸Šåï¼Œé€‰æ‹©æ›´å¤šâ€”æ‰“åŒ…åº”ç”¨</p>
<p>ç­‰å¾…æ‰“åŒ…æˆåŠŸåï¼Œå°½æƒ…äº«ç”¨å§ï¼ğŸ‰</p>
<p>psï¼šç›®å‰æœ€æ–°ç‰ˆéƒ½æ˜¯X64æ¶æ„çš„ï¼Œå¦‚éœ€X32æ¶æ„éœ€è¦è£…è€ç‰ˆæœ¬å³å¯</p>
<hr>
<blockquote>
<p>psï¼šå¦‚æœæƒ³æƒ³å†™ä¸ªç®€å•çš„å°è„šæœ¬ï¼Œè¿˜æ˜¯ç”¨autojsä¸é”™ï¼Œç®€å•è½»ä¾¿ï¼Œç”¨appiumé‚£ä¸€å¥—æ¶æ„å¤ªé‡äº†ï¼Œæ€é¸¡ç„‰ç”¨ç‰›åˆ€å•Šï¼</p>
<p>æé«˜è®¤çŸ¥ï¼Œé™ç»´æ‰“å‡»ï¼</p>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>æµ‹è¯•ç¬”è®°</title>
      <link>https://blog.zsan.ml/posts/test-notes/</link>
      <pubDate>Sun, 26 Jun 2022 13:52:23 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/test-notes/</guid>
      <description>å…³äºæµ‹è¯•çš„ä¸€äº›ç¬”è®°</description>
      <content:encoded><![CDATA[<blockquote>
<p>å…³äºæµ‹è¯•çš„ä¸€äº›ç¬”è®°ï¼ˆé“ï¼‰</p>
<p>é“æ˜¯å¿ƒæ³•ï¼Œæ˜¯æœ€éš¾è€ƒå¯Ÿçš„</p>
<p>æœ¯æ˜¯å·¥å…·ï¼Œæ˜¯å¯ä»¥ç®€å•è€ƒå¯Ÿå‡ºæ¥çš„</p>
<p>ç›®å‰å…¬å¸JDè¿˜éƒ½æ˜¯åå‘æœ¯æ–¹é¢çš„</p>
<p>é—¨æ§›ä½ï¼Œå¯¼è‡´æµ‹è¯•çš„åœ°ä½ä½ä¸‹ï¼Œè¿˜å¸Œæœ›åŒè¡Œä»¬å…±åŒåŠªåŠ›ğŸ’ªå‘€</p>
</blockquote>
<p>1ã€æµ‹è¯•æŠ€æœ¯é¢†åŸŸæœ€éš¾çš„æŠ€æœ¯åº”è¯¥æ˜¯æµ‹è¯•åˆ†æå’Œè®¾è®¡</p>
<blockquote>
<p>æµ‹è¯•æœ€é‡è¦çš„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æœ‰äººè¯´ æˆ‘ä¼š è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä»€ä¹ˆseleniumï¼Œappiumï¼Œpythonï¼Œç©çš„é£æºœğŸ™„ï¸</p>
<p>è€Œå´å¿˜äº† æœ€é‡è¦çš„è¾“å…¥â€”â€”æµ‹è¯•ç”¨ä¾‹</p>
<p>ä¸€ä¸ªç³»ç»Ÿï¼Œåªè¦è¾“å…¥æ˜¯é”™çš„ï¼Œä»–å†èªæ˜ã€å¿«é€Ÿï¼Œé‚£è¾“å‡ºçš„ä¹Ÿæ˜¯é”™çš„</p>
</blockquote>
<p>2ã€æµ‹è¯•ä»·å€¼çš„ä½“ç°æœ€ä¸»è¦è¿˜æ˜¯ä¿éšœè‡ªå·±ç»„ç»‡å¼€å‘çš„è½¯ä»¶åœ¨å…³é”®åº”ç”¨æ—¶ä¸è¦å‡ºæ•…éšœï¼Œç»™ç»„ç»‡é€ æˆå•†ä¸šæŸå¤±ã€‚</p>
<p>3ã€æµ‹è¯•åˆ†æå’Œè®¾è®¡çš„æ·±åº¦åŠç³»ç»ŸåŒ–ï¼Œä»¥åŠæŒæ¡å¹¿æ³›çš„ä¸“é¡¹æµ‹è¯•ç±»å‹ã€‚</p>
<p>4ã€æµ‹è¯•å·¥ç¨‹å¸ˆæŠ€æœ¯æ°´å¹³</p>
<p>5ã€å¿«é€Ÿç¼–å†™æµ‹è¯•ç”¨ä¾‹</p>
<blockquote>
<p>1ã€æ ¹æ®ç”¨æˆ·è¡Œä¸ºä¹ æƒ¯ç¼–å†™ä¸€å¥—case</p>
<p>2ã€æ ¹æ®éœ€æ±‚åŠŸèƒ½ç¼–å†™ä¸€å¥—case</p>
<p>3ã€æ¢ç´¢æ€§æµ‹è¯•ç¼–å†™ä¸€å¥—case</p>
</blockquote>
<hr>
<p>å¦‚ä½•ç”¨æœ€é€šä¿—çš„æ–¹å¼ç»™éæµ‹è¯•è€…æè¿°æµ‹è¯•è€…å­˜åœ¨çš„ä»·å€¼ï¼Œ</p>
<p>ä¾‹å¦‚ï¼šç»™è€æ¿è®²ã€ç»™é¡¹ç›®ç»ç†è®²ã€ç»™å¼€å‘ç»ç†è®²ã€ç»™äº§å“æ€»è´Ÿè´£äººè®²ï¼š</p>
<p>1ã€å‡å°‘é—æ¼ç»™ç”¨æˆ·çš„ä¸¥é‡è´¨é‡é—®é¢˜ ï¼ˆæµ‹è¯•è€…åœ¨å‘å¸ƒå‰å°½å¯èƒ½å‘ç°å½±å“ç”¨æˆ·ä½“éªŒçš„é—®é¢˜ï¼‰</p>
<p>2ã€å‡å°‘äº§å“çš„ç ”å‘å’Œç»´æŠ¤æˆæœ¬ ï¼ˆå‡å°‘å¼€å‘äººå‘˜å®šä½é—®é¢˜å’Œä¿®å¤é—®é¢˜çš„æˆæœ¬ï¼Œå‡å°‘äº§å“å”®åç»´æŠ¤æˆæœ¬ï¼‰</p>
<p>3ã€ç¼©çŸ­äº§å“ç ”å‘çš„å‘¨æœŸ ï¼ˆå¸®åŠ©ç¼ºé™·é¢„é˜²ï¼Œå°½æ—©å‘ç°é—®é¢˜ï¼Œå¤ç°é—®é¢˜ï¼Œç¼©çŸ­å¼€å‘ä¿®å¤å’Œå®šä½é—®é¢˜çš„æˆæœ¬)</p>
<p>å‚è€ƒæ–‡æ¡£ï¼š</p>
<blockquote>
<p>1ã€<a href="http://www.51testing.com/html/57/293557.html">æ¶æ„å¸ˆJack</a></p>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>Docker éƒ¨ç½² Snapdrop</title>
      <link>https://blog.zsan.ml/posts/docker-deploy-snapdrop/</link>
      <pubDate>Sun, 19 Jun 2022 17:44:20 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/docker-deploy-snapdrop/</guid>
      <description>å¥½ç”¨çš„è·¨å¹³å°æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼ˆæ— éœ€ä¸‹è½½å®‰è£…ã€æ‰“å¼€ç½‘é¡µå³å¯ä½¿ç”¨ï¼‰</description>
      <content:encoded><![CDATA[<blockquote>
<p>SnapdropÂ æ˜¯ä¸€ä¸ªå¼€æºçš„åœ¨çº¿æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼Œå¯ä»¥åœ¨Â Windowsã€Macã€Linuxã€iOSã€AndroidÂ ä»»ä½•å¹³å°ä½¿ç”¨ï¼Œåªè¦æˆ‘ä»¬çš„è®¾å¤‡æœ‰æµè§ˆå™¨å°±èƒ½ç”¨ä»–æ¥ä¼ è¾“æ–‡ä»¶</p>
<p>å®˜ç½‘æœ‰demoï¼Œbutä¸ç¨³å®šï¼Œè‡ªéƒ¨ç½²ä¸€å¥—ç¨³å®šå¯é å¯æ§</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#007f7f">#git clone ä¸‹è½½</span>
</span></span><span style="display:flex;"><span>git clone https://github.com/RobinLinus/snapdrop.git
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> snapdrop
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#å›½å†…æœåŠ¡éœ€æ¢æº</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> docker
</span></span><span style="display:flex;"><span>vim nginx-with-openssl.Dockerfile
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#RUN apk add --no-cache openssl ä¸Šæ–¹æ·»åŠ å‘½ä»¤</span>
</span></span><span style="display:flex;"><span>RUN sed -i <span style="color:#0ff;font-weight:bold">&#39;s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g&#39;</span> /etc/apk/repositories
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#ä¿å­˜ å¯åŠ¨</span>
</span></span><span style="display:flex;"><span>docker-compose up -d
</span></span></code></pre></div><p>å¸¸è§é—®é¢˜ï¼š</p>
<p>Â Â Â Â 1ã€å¯åŠ¨åæ—¥å¿—é‡ŒæŠ¥</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>npm ERR! <span style="color:#fff;font-weight:bold">Error</span>: EACCES: permission denied, access <span style="color:#0ff;font-weight:bold">&#39;/home/node/app&#39;</span>
</span></span><span style="display:flex;"><span>npm ERR!  { <span style="color:#fff;font-weight:bold">Error</span>: EACCES: permission denied, access <span style="color:#0ff;font-weight:bold">&#39;/home/node/app&#39;</span>
</span></span><span style="display:flex;"><span>npm ERR!   stack: <span style="color:#0ff;font-weight:bold">&#39;Error: EACCES: permission denied, access \&#39;/home/node/app\&#39;&#39;</span>,
</span></span><span style="display:flex;"><span>npm ERR!   errno: -<span style="color:#ff0;font-weight:bold">13</span>,
</span></span><span style="display:flex;"><span>npm ERR!   code: <span style="color:#0ff;font-weight:bold">&#39;EACCES&#39;</span>,
</span></span><span style="display:flex;"><span>npm ERR!   syscall: <span style="color:#0ff;font-weight:bold">&#39;access&#39;</span>,
</span></span><span style="display:flex;"><span>npm ERR!   path: <span style="color:#0ff;font-weight:bold">&#39;/home/node/app&#39;</span> }
</span></span></code></pre></div><p>æƒé™ userçš„å‘ï¼Œæˆ‘é»˜è®¤æ˜¯rootç”¨æˆ·ï¼Œymlé‡Œnodeå¯åŠ¨ä¸ºnodeç”¨æˆ·ï¼Œå¯¼è‡´æƒé™è¿‡ä½ï¼Œå¯åŠ¨å¤±è´¥</p>
<p>æ­¤æ—¶åªéœ€è¦æŠŠdocker-compose.yml é‡Œçš„user: &ldquo;nodeâ€ æ³¨é‡Šå³å¯</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim docker-compose
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#user: &#34;nodeâ€</span>
</span></span></code></pre></div>]]></content:encoded>
    </item>
    
    <item>
      <title>ã€èººèµšã€‘dockeréƒ¨ç½²ç½‘å¿ƒäº‘å®¹å™¨é­”æ–¹</title>
      <link>https://blog.zsan.ml/posts/docker-deploying-netcentric-cloud-containers/</link>
      <pubDate>Mon, 09 May 2022 21:05:31 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/docker-deploying-netcentric-cloud-containers/</guid>
      <description>N1ç›’å­å¤–æŒ‚ç¡¬ç›˜è·‘ç½‘å¿ƒäº‘èµšé’±</description>
      <content:encoded><![CDATA[<blockquote>
<p>è®¾å¤‡ï¼šN1</p>
<p>ç¡¬ç›˜ï¼š400g ssd</p>
<p>å·²å®‰è£…æœåŠ¡ï¼šdockerã€docker-compose</p>
</blockquote>
<p>å¼€å¹²ï¼</p>
<h3 id="ä¸€æŒ‚è½½ssdæŒ‚è½½è¿‡ç›´æ¥è·³åˆ°ç¬¬äºŒæ­¥">ä¸€ã€æŒ‚è½½ssdï¼ˆæŒ‚è½½è¿‡ç›´æ¥è·³åˆ°ç¬¬äºŒæ­¥ï¼‰</h3>
<p>ç¡¬ç›˜æ’åˆ°N1ä¸Š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>lsblk   <span style="color:#007f7f">#æŸ¥çœ‹å½“å‰ç£ç›˜æƒ…å†µ</span>
</span></span><span style="display:flex;"><span>fdisk -l <span style="color:#007f7f">#æŸ¥çœ‹å½“å‰æœªæŒ‚è½½çš„ç£ç›˜</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#å‡è®¾ç£ç›˜åä¸º dev/sda</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#åˆ›å»ºåˆ†åŒº</span>
</span></span><span style="display:flex;"><span>fdisk  dev/sda
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#è¾“å…¥n, p, 1, ä¸¤æ¬¡å›è½¦ï¼Œwq</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#æ–°å»ºä¸€ä¸ªä¸»åˆ†åŒºï¼Œå¤§å°æ•´ä¸ªç£ç›˜ï¼Œä¿å­˜å†™å…¥</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#å†™å…¥æ–‡ä»¶æ ¼å¼</span>
</span></span><span style="display:flex;"><span>mkfs.ext4 /dev/sda  <span style="color:#007f7f">#ext4æ ¼å¼</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#æŒ‚è½½</span>
</span></span><span style="display:flex;"><span>mount /dev/sda /media/data
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#æŸ¥çœ‹æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>df -lh    <span style="color:#007f7f">#æŸ¥çœ‹åˆ°åˆšæ‰æŒ‚è½½çš„ç¡¬ç›˜</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#è®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½</span>
</span></span><span style="display:flex;"><span>vim /etc/fstab
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># åœ¨æœ€åæ–°å¢ä¸€è¡Œ</span>
</span></span><span style="display:flex;"><span>/dev/sdb   /media/data    ext4   defaults   <span style="color:#ff0;font-weight:bold">0</span>   <span style="color:#ff0;font-weight:bold">0</span>
</span></span></code></pre></div><h3 id="äºŒéƒ¨ç½²">äºŒã€éƒ¨ç½²</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir wxedge
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> wxedge
</span></span><span style="display:flex;"><span>vim docker-compose.yml
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="font-weight:bold">version</span>: <span style="color:#0ff;font-weight:bold">&#39;3.3&#39;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">services</span>:
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">wxedge</span>:
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">container_name</span>: wxedge
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">restart</span>: always
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">privileged</span>: <span style="color:#fff;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">network_mode</span>: host
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">tmpfs</span>: 
</span></span><span style="display:flex;"><span>            - /run
</span></span><span style="display:flex;"><span>            - /tmp
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">volumes</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#0ff;font-weight:bold">&#39;/media/data/wxedge:/storage:rw&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">image</span>: onething1/wxedge
</span></span></code></pre></div><p>ip:18888 æ‰“å¼€ æˆåŠŸğŸ‰ğŸ‰ğŸ‰</p>
<p>èººç€èµšé’±å§ï¼</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Docker éƒ¨ç½² NginxæœåŠ¡</title>
      <link>https://blog.zsan.ml/posts/docker-build-nginx/</link>
      <pubDate>Fri, 08 Apr 2022 16:23:01 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/docker-build-nginx/</guid>
      <description>ç”¨dockeréƒ¨ç½²nginxå®˜æ–¹åªç»™äº†dockerç‰ˆæœ¬çš„ï¼Œæ²¡æœ‰composeçš„ï¼Œåªå¥½</description>
      <content:encoded><![CDATA[<blockquote>
<p>ç”¨dockeréƒ¨ç½²nginxå®˜æ–¹åªç»™äº†dockerç‰ˆæœ¬çš„ï¼Œæ²¡æœ‰composeçš„ï¼Œåªå¥½è‡ªå·±è½¬æ¢ä¸€ä¸‹äº†ï¼Œè®°å½•ä¸€ä¸‹ï¼Œæ–¹ä¾¿ä¸‹æ¬¡éƒ¨ç½²ï¼Œè¿™åªæ˜¯ç®€å•çš„éƒ¨ç½²ï¼Œè‡³äºnginxé…ç½®çš„è¯ï¼Œæœ‰ç©ºå†è¡¥å§ğŸ« </p>
</blockquote>
<h2 id="1åˆ›å»ºdocker-nginxç›®å½•">1ã€åˆ›å»ºdocker-nginxç›®å½•</h2>
<p>æ–°å»º docker-compose.yml æ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>mkdir docekr-nginx
</span></span><span style="display:flex;"><span>mkdir nginx
</span></span><span style="display:flex;"><span>mkdir log
</span></span><span style="display:flex;"><span>mkdir html
</span></span><span style="display:flex;"><span>vim docker-compose.yml
</span></span></code></pre></div><h2 id="2docker-composeyml">2ã€docker-compose.yml</h2>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="font-weight:bold">version</span>: <span style="color:#0ff;font-weight:bold">&#39;3.3&#39;</span> 
</span></span><span style="display:flex;"><span><span style="font-weight:bold">services</span>:
</span></span><span style="display:flex;"><span> <span style="font-weight:bold">web</span>:
</span></span><span style="display:flex;"><span> <span style="font-weight:bold">image</span>: nginx:latest
</span></span><span style="display:flex;"><span> <span style="font-weight:bold">container_name</span>: nginx
</span></span><span style="display:flex;"><span> <span style="font-weight:bold">volumes</span>:
</span></span><span style="display:flex;"><span>     - ./nginx:/etc/nginx
</span></span><span style="display:flex;"><span>     - ./log:/var/log/nginx
</span></span><span style="display:flex;"><span>     - ./html:/usr/share/nginx/html  //ç½‘ç«™æ”¾ç½®ç›®å½•
</span></span><span style="display:flex;"><span> <span style="font-weight:bold">ports</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#0ff;font-weight:bold">&#34;8081:80&#34;</span>
</span></span><span style="display:flex;"><span> <span style="font-weight:bold">environment</span>:
</span></span><span style="display:flex;"><span>     - NGINX_HOST=&#34;192.168.116.10&#34; //è®¿é—®åœ°å€/åŸŸå
</span></span><span style="display:flex;"><span>     - NGINX_PORT=&#34;80&#34; //è®¿é—®ç«¯å£
</span></span><span style="display:flex;"><span>     - TZ=&#34;Asia/Shanghai&#34; //æ—¶åŒº
</span></span><span style="display:flex;"><span> <span style="font-weight:bold">restart</span>: always
</span></span></code></pre></div><h2 id="3æ‰‹åŠ¨cpé…ç½®æ–‡ä»¶">3ã€æ‰‹åŠ¨cpé…ç½®æ–‡ä»¶</h2>
<p>ç”±äºå®˜æ–¹imageæ²¡æœ‰é»˜è®¤æ˜ å°„å¤–éƒ¨æ–‡ä»¶ï¼Œéœ€è¦æ‰‹åŠ¨æŠŠé…ç½®æ–‡ä»¶cpå‡ºæ¥</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#007f7f"># è¿è¡Œå®˜æ–¹å‘½ä»¤åˆ›å»ºé»˜è®¤å®¹å™¨</span>
</span></span><span style="display:flex;"><span>docker run --name nginx -p 8080:80 -d nginx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°nginxé‡Œ,å…¶ä»–æ–‡ä»¶å¯ç”¨å¤åˆ¶</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#æ˜¯ä¸ªå‘ï¼Œè·¯å¾„å¿…é¡»æ˜¯å…¨è·¯å¾„</span>
</span></span><span style="display:flex;"><span>docker cp nginx:/etc/nginx /opt/docker-nginx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#åˆ é™¤é»˜è®¤å®¹å™¨</span>
</span></span><span style="display:flex;"><span>docekr stop nginx &amp;&amp; docekr rm nginx
</span></span></code></pre></div><h2 id="4ä¿®æ”¹nginxé…ç½®æ–‡ä»¶">4ã€ä¿®æ”¹nginxé…ç½®æ–‡ä»¶</h2>
<p>ç«¯å£å·ã€åŸŸåï¼Œsslç­‰å’Œä»¥å‰é…ç½®ä¸€æ ·ï¼Œä¸å†èµ˜è¿°</p>
<h2 id="5è¿è¡Œæµ‹è¯•">5ã€è¿è¡Œ&amp;æµ‹è¯•</h2>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docekr-compose up -d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#æŸ¥çœ‹æ—¥å¿—</span>
</span></span><span style="display:flex;"><span>docekr-compose logs -f     
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#æµè§ˆå™¨è¾“å…¥IPæˆ–åŸŸåæŸ¥çœ‹æ˜¯å¦å¯ä»¥è®¿é—®</span>
</span></span></code></pre></div><hr>
<p>å‚è€ƒæ–‡æ¡£ï¼š</p>
<blockquote>
<p>1ã€<a href="https://hub.docker.com/_/nginx">Docker Hub-nginx</a></p>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>æ‰“ç ´ä¿¡æ¯èŒ§æˆ¿</title>
      <link>https://blog.zsan.ml/posts/rss-build/</link>
      <pubDate>Sun, 13 Mar 2022 13:05:35 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/rss-build/</guid>
      <description>RSSæœåŠ¡å¿«é€Ÿæ­å»º</description>
      <content:encoded><![CDATA[<p>ä½•ä¸ºä¿¡æ¯èŒ§æˆ¿ï¼š</p>
<blockquote>
<p>å“ˆä½›å¤§å­¦å‡¯æ–¯Â·æ¡‘æ–¯å¦æ•™æˆåœ¨ã€Šä¿¡æ¯ä¹Œæ‰˜é‚¦ã€‹ä¸€ä¹¦ä¸­æå‡ºï¼Œäººç±»ç¤¾ä¼šå­˜åœ¨ä¸€ç§â€œä¿¡æ¯èŒ§æˆ¿â€ç°è±¡ã€‚ä»–è®¤ä¸ºï¼Œåœ¨ä¿¡æ¯ä¼ æ’­ä¸­äººä»¬è‡ªèº«çš„ä¿¡æ¯éœ€æ±‚å¹¶éå…¨æ–¹ä½çš„ï¼Œåªä¼šæ³¨æ„é€‰æ‹©æƒ³è¦çš„æˆ–èƒ½ä½¿è‡ªå·±æ„‰æ‚¦çš„ä¿¡æ¯ï¼Œä¹…è€Œä¹…ä¹‹æ¥è§¦çš„ä¿¡æ¯å°±è¶Šæ¥è¶Šå±€é™ï¼Œè¶Šæ¥è¶Šçª„ï¼Œå°±åƒèš•åå‡ºæ¥çš„ä¸ä¸€æ ·ï¼Œç»†ç»†å¯†å¯†åœ°æŠŠè‡ªå·±åŒ…è£¹èµ·æ¥ï¼Œæœ€ç»ˆåƒä¸€ä¸ªèš•å®å®ä¸€æ ·è¢«æ¡æ¢åœ¨â€œä¿¡æ¯èŒ§æˆ¿â€å†…ï¼Œå¤±å»å¯¹å…¶ä»–ä¸åŒäº‹ç‰©çš„äº†è§£èƒ½åŠ›å’Œæ¥è§¦æœºä¼šã€‚å½“æ—¶ï¼Œä»–çš„è¿™ä¸€è§‚ç‚¹è¿˜åªæ˜¯ä½œä¸ºä¸€ç§æ¨è®ºå’Œé¢„æµ‹ï¼Œä½†éšç€ç½‘ç»œä¿¡æ¯å’Œäººå·¥æ™ºèƒ½æŠ€æœ¯çš„é£é€Ÿå‘å±•ï¼Œè¿™ç§â€œä¿¡æ¯èŒ§æˆ¿â€ç°è±¡ï¼Œæ­£è¶Šæ¥è¶Šå¤šåœ°å‘ç”Ÿåœ¨ç°å®ç”Ÿæ´»ä¸­å’Œæˆ‘ä»¬çš„èº«è¾¹ã€‚</p>
</blockquote>
<p>è¯´äººè¯å°±æ˜¯ï¼š</p>
<blockquote>
<p>åœ¨ç°å¦‚ä»Šçš„ç”Ÿæ´»ä¸­ï¼Œäººä»¬æ¥å—ä¿¡æ¯çš„æ¥æºï¼ˆä¸»è¦æŒ‡ç”Ÿæ´»åœ¨å¤§é™†ï¼Œå›½å¤–ä¹Ÿå·®ä¸å¤šï¼‰ï¼Œä¸»è¦ä»å¾®ä¿¡ã€å¾®åšã€æŠ–éŸ³ã€å¿«æ‰‹ç­‰ä¸­å¿ƒåŒ–çš„å¹³å°ï¼Œå„å®¶ç›¸äº’å…³é—­è‡ªå·±çš„å¼€æ”¾æ¥å£ï¼Œå¼ºè¿«ç”¨æˆ·ç•™åœ¨è‡ªå·±å¹³å°ä¸Šï¼Œæœ‰æ—¶å€™åªå…³æ³¨æŸä¸ªå¤§Vçš„ä¿¡æ¯ï¼Œå´ä¸å¾—ä¸å®‰è£…ä¸€ä¸ªappï¼Œå°±è¿™æ ·æ‰‹æœºä¸Šè£…äº†å¾ˆå¤šappï¼ˆè¿™äº›appä»¬å¹³å‡ä¸€å‘¨æ›´æ–°ä¸€æ¬¡ï¼Œè¦åäº†ï¼‰å†åŠ ä¸Šå¹³å°çš„æ¨èç®—æ³•ï¼Œåªæ¨èä½ å–œæ¬¢çš„ï¼ˆå…¼å¬åˆ™æ˜ï¼Œåä¿¡åˆ™æš—ï¼‰ï¼Œè¿™æ ·ä¸‹å»ï¼Œæ•´ä¸ªäººçš„è®¤çŸ¥æ— æ³•è¢«æé«˜</p>
</blockquote>
<p>ç»è¿‡ä¸€æ®µæ—¶é—´çš„æ¢ç´¢ï¼Œæ­å»ºäº†RSSè¿™å¥—æœåŠ¡ï¼ŒRSSæœåŠ¡å±äºå¤è€æœåŠ¡äº†ï¼Œä¼°è®¡åªæœ‰æ•°å­—åŸä½æ°‘æ‰å¬è¯´è¿‡ï¼Œç›®å‰æ¥è¯´è¿˜å¯ä»¥ï¼Œæ­£åœ¨æ…¢æ…¢è¿‡æ¸¡ï¼Œåœ¨æ­¤è®°å½•ä¸‹æ­å»ºè¿‡ç¨‹ï¼Œæ–¹ä¾¿ä¸‹æ¬¡è¿ç§»</p>
<blockquote>
<p><strong>RSS</strong>ï¼ˆè‹±æ–‡å…¨ç§°ï¼š<a href="https://zh.wikipedia.org/wiki/Resource_Description_Framework" title="Resource Description Framework">RDF</a>Â Site Summary æˆ– Really Simple Syndication<a href="https://zh.wikipedia.org/wiki/RSS#cite_note-powers-2003-1-2">[2]</a>ï¼‰ï¼Œä¸­æ–‡è¯‘ä½œ<strong>ç®€æ˜“ä¿¡æ¯èšåˆ</strong><a href="https://zh.wikipedia.org/wiki/RSS#cite_note-3">[3]</a>ï¼Œä¹Ÿç§°<strong>èšåˆå†…å®¹</strong><a href="https://zh.wikipedia.org/wiki/RSS#cite_note-%E5%BC%A0%E9%94%902015-4">[4]</a>ï¼Œæ˜¯ä¸€ç§<a href="https://zh.wikipedia.org/wiki/%E6%B6%88%E6%81%AF%E4%BE%86%E6%BA%90" title="æ¶ˆæ¯æ¥æº">æ¶ˆæ¯æ¥æº</a>æ ¼å¼è§„èŒƒï¼Œç”¨ä»¥èšåˆå¤šä¸ªç½‘ç«™æ›´æ–°çš„å†…å®¹å¹¶è‡ªåŠ¨é€šçŸ¥ç½‘ç«™è®¢é˜…è€…ã€‚ä½¿ç”¨ RSS åï¼Œç½‘ç«™è®¢é˜…è€…ä¾¿æ— éœ€å†æ‰‹åŠ¨æŸ¥çœ‹ç½‘ç«™æ˜¯å¦æœ‰æ–°çš„å†…å®¹ï¼ŒåŒæ—¶ RSS å¯å°†å¤šä¸ªç½‘ç«™æ›´æ–°çš„å†…å®¹è¿›è¡Œæ•´åˆï¼Œä»¥æ‘˜è¦çš„å½¢å¼å‘ˆç°ï¼Œæœ‰åŠ©äºè®¢é˜…è€…å¿«é€Ÿè·å–é‡è¦ä¿¡æ¯ï¼Œå¹¶é€‰æ‹©æ€§åœ°ç‚¹é˜…æŸ¥çœ‹ã€‚</p>
<p>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â   Â Â  â€”â€”å¼•ç”¨wikipedia</p>
</blockquote>
<p>å‡†å¤‡ï¼š</p>
<ul>
<li>éœ€è¦ä¸€å°æœåŠ¡å™¨ï¼Œè¿è¡Œlinuxå³å¯Â Â Â Â Â Â Â </li>
</ul>
<blockquote>
<p>é…ç½®ä¸ç”¨å¤ªå¤§ï¼Œæˆ‘ç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„æœåŠ¡å™¨ï¼Œç”Ÿæ´»åœ¨å¤§é™†ï¼Œå›½å†…è®¿é—®æ¯”è¾ƒå¿«</p>
</blockquote>
<p>ç”¨åˆ°çš„æœåŠ¡ï¼š</p>
<blockquote>
<p><a href="https://docs.rsshub.app/">RSSHub</a>ï¼šä¸€ä¸ªå¼€æºã€ç®€å•æ˜“ç”¨ã€æ˜“äºæ‰©å±•çš„ RSS ç”Ÿæˆå™¨ï¼Œå¯ä»¥ç»™ä»»ä½•å¥‡å¥‡æ€ªæ€ªçš„å†…å®¹ç”Ÿæˆ RSS è®¢é˜…æºã€‚</p>
<p><a href="http://ttrss.henry.wang/">TTRSS</a>ï¼šä¸€æ¬¾åŸºäº PHP çš„å…è´¹å¼€æº RSS èšåˆé˜…è¯»å™¨ã€‚</p>
</blockquote>
<p>ç”¨rsshubç”Ÿæˆå®˜æ–¹æ²¡æœ‰çš„è®¢é˜…æºï¼Œttrssæ¥ç®¡ç†è®¢é˜…æºçš„é˜…è¯»è®°å½•ï¼Œæ”¯æŒå„ç«¯åŒæ­¥</p>
<h3 id="ä¸€éƒ¨ç½²rsshub">ä¸€ã€éƒ¨ç½²RSSHub</h3>
<p>æ”¯æŒdockeréƒ¨ç½²ï¼Œä¸è¿‡ï¼Œæˆ‘æ˜¯éƒ¨ç½²åˆ° Vercel ä¸Šçš„ï¼Œå¥½å¤„æ˜¯å…è´¹ã€å›½å¤–çš„æœºå­ï¼ŒçœŸæ­£è¿æ¥åˆ°äº’è”ç½‘çš„ï¼Œå›½å†…å¯è®¿é—®ã€‚</p>
<p>1ã€æ³¨å†Œ <a href="https://vercel.com/import/project?template=https://github.com/DIYgod/RSSHub"> Vercel</a></p>
<blockquote>
<p>æœ‰å¸æˆ·çš„ç›´æ¥å¯ä»¥ç™»å½•éƒ¨ç½²</p>
<p>æ²¡æœ‰çš„å…ˆæ³¨å†Œï¼Œå»ºè®®ç”¨GitHubè´¦å·ç™»å½•æ³¨å†Œï¼Œgithubè´¦å·é‚®ç®±å»ºè®®ç”¨gmailç­‰å›½å¤–çš„ï¼Œé€šè¿‡ç‡é«˜ï¼Œå¦‚æœæç¤ºå¤±è´¥ï¼Œå¯ä»¥å’Œå®˜æ–¹äººå‘˜å‘emailè§£å°ï¼Œæˆ‘çš„å½“æ—¶å°±ç›´æ¥è¢«å†»ç»“äº†ï¼Œå‘äº†emailåï¼Œä¸€ä¼šå°±è§£å°äº†ï¼Œæ€åº¦è¶…å¥½ğŸ‘</p>
</blockquote>
<p>2ã€æˆåŠŸåå¯ä»¥ç›´æ¥ç‚¹å»éƒ¨ç½²äº†ï¼Œæˆ‘æ˜¯æ²¡æœ‰ç”¨å®˜æ–¹çš„åº“éƒ¨ç½²ï¼Œforkå®˜æ–¹åº“åå»æˆæƒéƒ¨ç½²çš„ï¼Œæ•ˆæœä¸€æ ·ï¼Œvercel ç”¨é»˜è®¤çš„å°±è¡Œï¼Œç­‰å¾…ä¸€ä¼šï¼Œæ’’èŠ±ï¼Œè¡¨ç¤ºéƒ¨ç½²æˆåŠŸ</p>
<p>3ã€ç›´æ¥è®¿é—®åŸŸåæˆåŠŸæ‰“å¼€å³éƒ¨ç½²æˆåŠŸ</p>
<p>4ã€rsshubé…ç½®ç¯å¢ƒå¯å‚è€ƒ <a href="https://docs.rsshub.app/install/#pei-zhi">éƒ¨ç½² | RSSHub</a> é…ç½®</p>
<ul>
<li>
<p>ç”¨æˆ·è®¤è¯</p>
</li>
<li>
<p>æ—¥å¿—é…ç½®</p>
</li>
<li>
<p>å…¶ä»–ä¸€äº›æœåŠ¡éœ€è¦çš„api-key</p>
</li>
</ul>
<p>5ã€åœ¨vercel é…ç½®å®Œ é‡æ–°éƒ¨ç½²æœåŠ¡ï¼Œæ‰ç”Ÿæ•ˆ</p>
<h5 id="æ›´æ–°">æ›´æ–°</h5>
<p>æ”¯æŒvercelè‡ªåŠ¨æ‹‰å–ä»£ç æ›´æ–°</p>
<h3 id="äºŒéƒ¨ç½²ttrss">äºŒã€éƒ¨ç½²TTRSS</h3>
<p>éƒ¨ç½²åˆ°vps é˜¿é‡Œäº‘ä¸Šï¼Œæ”¯æŒdockerã€docker-composrå³å¯</p>
<h4 id="docker-composeéƒ¨ç½²">docker-composeéƒ¨ç½²</h4>
<ol>
<li>ä¸‹è½½Â <a href="https://github.com/HenryQW/Awesome-TTRSS/blob/main/docker-compose.yml">docker-compose.yml</a>è‡³ä»»æ„ç›®å½•ã€‚</li>
<li>æ›´æ”¹Â <code>docker-compose.yml</code>Â ä¸­çš„è®¾ç½®ï¼Œè¯·åŠ¡å¿…æ›´æ”¹ postgres ç”¨æˆ·å¯†ç ã€‚</li>
<li>é€šè¿‡ç»ˆç«¯åœ¨åŒç›®å½•ä¸‹è¿è¡ŒÂ <code>docker-compose up -d</code>Â åç­‰å¾…éƒ¨ç½²å®Œæˆã€‚</li>
<li>é»˜è®¤é€šè¿‡ 181 ç«¯å£è®¿é—® TTRSSï¼Œé»˜è®¤è´¦æˆ·ï¼š<code>admin</code>Â å¯†ç ï¼š<code>password</code>ï¼Œè¯·ç¬¬ä¸€æ—¶é—´æ›´æ”¹ã€‚</li>
<li><code>wangqiru/mercury-parser-api</code>Â åŠÂ <code>wangqiru/opencc-api-server</code>Â ä¸ºæ”¯æŒé«˜çº§åŠŸèƒ½è€ŒåŠ å…¥çš„å¯é€‰æœåŠ¡ç±»å®¹å™¨ï¼Œåˆ é™¤ä¸ä¼šå½±å“ TTRSS åŸºç¡€åŠŸèƒ½ã€‚</li>
</ol>
<p>SELF_URL_PATH: TTRSS å®ä¾‹åœ°å€ã€‚<strong>ğŸ”´ è¯·æ³¨æ„ï¼Œè¯¥å˜é‡å€¼å¿…é¡»ä¸ä½ åœ¨æµè§ˆå™¨ä¸­ç”¨äºè®¿é—® TTRSS çš„ URL ä¿æŒå®Œå…¨ä¸€è‡´ï¼Œå¦åˆ™ TTRSS å°†æ— æ³•å¯åŠ¨ã€‚</strong></p>
<p>è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œå¦‚æœæ²¡æœ‰åŸŸåå°±è¦é…ç½®ä¸º ip:ç«¯å£å· çš„å½¢å¼</p>
<p>æ›´å¤šé…ç½®å‚è€ƒ <a href="http://ttrss.henry.wang/zh/#%E9%83%A8%E7%BD%B2">å®˜æ–¹æ–‡æ¡£</a></p>
<h4 id="æ›´æ–°-1">æ›´æ–°</h4>
<p>æ¨èä½¿ç”¨æ‰‹åŠ¨æ›´æ–°</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span> <span style="color:#007f7f">#è‡ªç”¨</span>
</span></span><span style="display:flex;"><span> docker-compose pull
</span></span><span style="display:flex;"><span> <span style="color:#007f7f">#å®˜æ–¹æ¨è</span>
</span></span><span style="display:flex;"><span> docker pull wangqiru/ttrss:latest
</span></span><span style="display:flex;"><span> <span style="color:#007f7f"># docker pull wangqiru/mercury-parser-api:latest</span>
</span></span><span style="display:flex;"><span> <span style="color:#007f7f"># docker pull wangqiru/opencc-api-server:latest</span>
</span></span><span style="display:flex;"><span> docker-compose up -d <span style="color:#007f7f"># å¦‚æœæ‚¨æ²¡æœ‰ä½¿ç”¨ docker-composeï¼Œæˆ‘ç¡®ä¿¡æ‚¨çŸ¥é“è¯¥æ€ä¹ˆåšã€‚</span>
</span></span></code></pre></div><h4 id="å¤‡ä»½">å¤‡ä»½</h4>
<p>å…»æˆå®šæœŸå¤‡ä»½çš„ä¹ æƒ¯ï¼Œæœ‰äº›è®¢é˜…æºå¾ˆé‡è¦çš„èµ„æ–™å¯ä»¥æ°¸ä¹…ä¿å­˜ï¼Œé¿å…404</p>
<ul>
<li>
<p>å¤åˆ¶ Postgres æ•°æ®å·Â <code>~/postgres/data/</code>ï¼ˆæˆ–è€…ä½ åœ¨ docker-compose ä¸­æŒ‡å®šçš„ç›®å½•ï¼‰è‡³å…¶ä»–ä»»ä½•åœ°æ–¹ä½œä¸ºå¤‡ä»½ï¼Œè¿™éå¸¸é‡è¦ï¼</p>
</li>
<li>
<p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥å¯¼å‡ºæ‰€æœ‰æ•°æ®ï¼š</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#007f7f">#docker exec postgres pg_dumpall -c -U æ•°æ®åº“ç”¨æˆ·å &gt; export.sql</span>
</span></span><span style="display:flex;"><span>docker <span style="color:#fff;font-weight:bold">exec</span> postgres pg_dumpall -c -U postgres &gt; export.sql
</span></span></code></pre></div><ul>
<li>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥å¯¼å…¥æ‰€æœ‰æ•°æ®ï¼š</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#007f7f">#cat export.sql | docker exec -i postgres psql -U æ•°æ®åº“ç”¨æˆ·å</span>
</span></span><span style="display:flex;"><span>cat export.sql | docker <span style="color:#fff;font-weight:bold">exec</span> -i postgres psql -U postgres
</span></span></code></pre></div><h3 id="ä¸‰å®¢æˆ·ç«¯æ¨è">ä¸‰ã€å®¢æˆ·ç«¯æ¨è</h3>
<p>æœåŠ¡ç«¯éƒ½é…ç½®å¥½äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•é˜…è¯»äº†</p>
<p>iOS/macOSï¼š<a href="https://reederapp.com/">Reeder 5</a> å†…ç½®çš„Â <a href="http://ttrss.henry.wang/zh/#fever-api">Fever API æ¨¡æ‹Ÿæ’ä»¶</a> å¯ä»¥ä½¿ç”¨</p>
<p>androidï¼šFeedMe</p>
<p>Webï¼šç›´æ¥ç½‘é¡µç™»å½•æŸ¥çœ‹å³å¯</p>
<h3 id="å››è®¢é˜…æºè®¢é˜…å°æŠ€å·§">å››ã€è®¢é˜…æºè®¢é˜…å°æŠ€å·§</h3>
<p>æœåŠ¡éƒ½æ­å»ºå¥½äº†ï¼Œä¸‹é¢å°±è¯¥è®¢é˜…è®¢é˜…æºäº†ï¼Œåˆ†äº«ä¸€äº›å°æŠ€å·§</p>
<ul>
<li>
<p>å¾®åšçš„å¯ä»¥ä½¿ç”¨ <a href="https://rssfeed.today/weibo/">Weibo to RSS</a> è®¢é˜…</p>
</li>
<li>
<p>å¾®ä¿¡çš„å°é”ä¸¥é‡ï¼Œrsshubè®¢é˜…æœ‰é™ï¼Œå¯ä»¥ç”¨ <a href="https://wechat2rss.xlab.app/posts/list/">å…¬ä¼—å·åˆ—è¡¨ | å¾®ä¿¡å…¬ä¼—å·è½¬RSSæœåŠ¡</a> æ¥è®¢é˜…ï¼Œå¦‚æœæ²¡æœ‰æƒ³è®¢é˜…çš„ï¼Œå¯ä»¥æ <a href="https://github.com/ttttmr/wechat2rss/issues/7">æäº¤æ–°å…¬ä¼—å·å‰çœ‹è¿™é‡Œ Â· Issue #7 Â· ttttmr/wechat2rss Â· GitHub</a></p>
</li>
<li>
<p>blogspotçš„rsshubæ²¡æœ‰æä¾›ï¼Œå¯ä»¥ç”¨cfåä»£åè®¢é˜…</p>
</li>
<li>
<p>twitter çš„å¼€å‘è€…apiå¤ªéš¾ç”³è¯·äº†ï¼Œå¯ä»¥ç”¨ <a href="https://nitter.net/">nitter</a> è¾“å‡ºçš„rss è®¿é—®å›°éš¾å†ç»“åˆcfåä»£ï¼Œå®Œç¾</p>
</li>
</ul>
<p>ä»¥ä¸Šï¼Œä¸€ä¸ªä½æˆæœ¬ï¼ŒæœåŠ¡ç¨³å®šï¼Œæ•°æ®å¯æ§RSSç”Ÿæ€éƒ¨ç½²æˆåŠŸï¼Œå°½æƒ…äº«ç”¨å§ï¼ğŸ‰</p>
<hr>
<p>å‚è€ƒæ–‡æ¡£ï¼š</p>
<blockquote>
<p><a href="https://docs.rsshub.app">RSSHub</a></p>
<p><a href="http://ttrss.henry.wang/zh/">ğŸ‹ Awesome TTRSS | ğŸ‹ Awesome TTRSS</a></p>
<p><a href="https://diygod.me/ohmyrss/">æˆ‘æœ‰ç‰¹åˆ«çš„ RSS ä½¿ç”¨æŠ€å·§</a></p>
<p><a href="https://www.alpaca.plus/archives/my-rss-solution.html">æˆ‘çš„RSSè§£å†³æ–¹æ¡ˆ - alpaca++</a></p>
<p><a href="http://www.mod.gov.cn/jmsd/2021-03/15/content_4880922.htm">è­¦æƒ•é™·å…¥â€œä¿¡æ¯èŒ§æˆ¿â€ - ä¸­åäººæ°‘å…±å’Œå›½å›½é˜²éƒ¨</a></p>
<p><a href="https://wiki.mbalib.com/wiki/%E4%BF%A1%E6%81%AF%E8%8C%A7%E6%88%BF">ä¿¡æ¯èŒ§æˆ¿ - MBAæ™ºåº“ç™¾ç§‘</a></p>
<p><a href="https://zh.wikipedia.org/wiki/RSS">RSS ç»´åŸºç™¾ç§‘</a></p>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>Linuxè®¾ç½®ä»£ç†</title>
      <link>https://blog.zsan.ml/posts/linux-unset-proxy/</link>
      <pubDate>Fri, 18 Feb 2022 18:04:50 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/linux-unset-proxy/</guid>
      <description>æœ€è¿‘é‡åˆ°ä¸€ä¸ªå¾ˆæœ‰ç‚¹éº»çƒ¦çš„äº‹ï¼Œä»¥å‰åœ¨å›½å†…æœºä¸Šè£…äº†clashä»£ç†ï¼Œç”¨çš„ç¼–è¯‘åŒ…å®‰è£…çš„ï¼Œåæ¥</description>
      <content:encoded><![CDATA[<blockquote>
<p>æœ€è¿‘é‡åˆ°ä¸€ä¸ªå¾ˆæœ‰ç‚¹éº»çƒ¦çš„äº‹ï¼Œä»¥å‰åœ¨å›½å†…æœºä¸Šè£…äº†clashä»£ç†ï¼Œç”¨çš„ç¼–è¯‘åŒ…å®‰è£…çš„ï¼Œåæ¥æ„Ÿè§‰ç”¨çš„ä¸çˆ½ï¼Œå°±ç»™å¸è½½äº†ï¼ŒæœåŠ¡ä¹Ÿå»äº†ï¼Œä½†æ˜¯proxyä»£ç†ç»å¸¸ä¼šè‡ªåŠ¨è®¾ç½®ï¼Œæœ‰æ—¶å€™æ‰‹åŠ¨ç»™å–æ¶ˆäº†ï¼Œä¸‹æ¬¡å†ç”¨åˆæœ‰äº†ï¼Œè¿™æ¬¡ç»ˆäºå¿ä¸äº†äº†ï¼Œå°±æœäº†ä¸€ä¸‹ç»™è§£å†³äº†</p>
</blockquote>
<h3 id="1å®šä½bug">1ã€å®šä½bug</h3>
<p>export æŸ¥çœ‹ä¸‹ï¼Œæœ‰ç›¸åº”ç«¯å£ï¼Œæ‰‹åŠ¨å–æ¶ˆåï¼Œå†æŸ¥çœ‹æ²¡æœ‰äº†ï¼Œé‡å¯ååˆæœ‰äº†ï¼Œåˆ¤æ–­æ˜¯æŸä¸ªè„šæœ¬é‡Œå¸¦ç›¸å…³å‘½ä»¤</p>
<h3 id="2æœç´¢èµ„æ–™">2ã€æœç´¢èµ„æ–™</h3>
<p>é€šè¿‡æŸ¥æ‰¾å¾—çŸ¥æœ‰ä¸ª.bashrcæ–‡ä»¶ä¹Ÿå¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œåªå¯¹å½“å‰ç”¨æˆ·æœ‰æ•ˆï¼Œvimè¿›å»çœ‹äº†ä¸‹ï¼Œæœç„¶æœ‰ç›¸åº”å‘½ä»¤ï¼Œåˆ é™¤ï¼Œé‡å¯ï¼Œå†exportï¼Œä»£ç†æ²¡äº†ï¼Œç»“æŸğŸ‰</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>æ¯”ä»·åŠ©æ‰‹æœºå™¨äººdockerå¿«é€Ÿéƒ¨ç½²</title>
      <link>https://blog.zsan.ml/posts/comparison-robot-building-for-docker/</link>
      <pubDate>Sun, 06 Feb 2022 17:05:32 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/comparison-robot-building-for-docker/</guid>
      <description>å¯¹äºå•†å“æ¯”ä»·æ˜¯ä¸ªä¸é”™çš„è´­ä¹°å•†å“çš„æ–¹æ³•ï¼Œå¯ä»¥ç»™æˆ‘ä»¬æ˜¯å¦å€¼å¾—å…¥æ‰‹è¿™ä»¶å•†å“æä¾›å†³ç­–ã€‚å„å¤§å•†</description>
      <content:encoded><![CDATA[<blockquote>
<p>å¯¹äºå•†å“æ¯”ä»·æ˜¯ä¸ªä¸é”™çš„è´­ä¹°å•†å“çš„æ–¹æ³•ï¼Œå¯ä»¥ç»™æˆ‘ä»¬æ˜¯å¦å€¼å¾—å…¥æ‰‹è¿™ä»¶å•†å“æä¾›å†³ç­–ã€‚å„å¤§å•†åŸæœ‰è¿™æ–¹é¢æ•°æ®ä½†ä¸ä¼šå…è´¹ç»™åˆ†äº«å‡ºæ¥ï¼Œç¬¬ä¸‰æ–¹ç½‘ç«™æœ‰ç›¸å…³æœåŠ¡ï¼Œä½†ä½“éªŒä¸å¥½ï¼Œç›¸å…³apiä¹Ÿå¤ªè´µï¼Œè¿™æ¬¡æ‰¾åˆ°äº†å¤§ä½¬å…è´¹æä¾›çš„å¯¹è¯botçš„æ¯”ä»·åŠ©æ‰‹â€”â€”å‚»å¦åŠ©æ‰‹ï¼Œåº”è¯¥æ˜¯å†…ç½®æ¯”ä»·apiå§ï¼ç›®å‰æ¥è¯´æ•°æ®è¿˜å¯ä»¥å€¼å¾—å‚è€ƒçš„ï¼Œç”¨äº†dockeréƒ¨ç½²ï¼Œå¾ˆå¿«æå®šï¼</p>
</blockquote>
<h1 id="ä¸€éƒ¨ç½²å‚»å¦åŠ©æ‰‹bot">ä¸€ã€éƒ¨ç½²å‚»å¦åŠ©æ‰‹bot</h1>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/cdle/sillyGirl">GitHub - cdle/sillyGirl: å‚»å¦æœºå™¨äºº</a></p>
<h3 id="ä¸€é”®å®‰è£…æ”¯æŒlinux-arm64å’Œamd64ä½">ä¸€é”®å®‰è£…ï¼šæ”¯æŒlinux arm64å’Œamd64ä½</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> /opt
</span></span><span style="display:flex;"><span>s=sillyGirl;a=arm64;<span style="color:#fff;font-weight:bold">if</span> [[ <span style="color:#fff;font-weight:bold">$(</span>uname -a | grep <span style="color:#0ff;font-weight:bold">&#34;x86_64&#34;</span><span style="color:#fff;font-weight:bold">)</span> != <span style="color:#0ff;font-weight:bold">&#34;&#34;</span> ]];<span style="color:#fff;font-weight:bold">then</span> a=amd64;<span style="color:#fff;font-weight:bold">fi</span> ;<span style="color:#fff;font-weight:bold">if</span> [ ! -d $s ];<span style="color:#fff;font-weight:bold">then</span> mkdir $s;<span style="color:#fff;font-weight:bold">fi</span> ;<span style="color:#fff;font-weight:bold">cd</span> $s;wget https://github.com/cdle/<span style="color:#0ff;font-weight:bold">${</span>s<span style="color:#0ff;font-weight:bold">}</span>/releases/download/main/<span style="color:#0ff;font-weight:bold">${</span>s<span style="color:#0ff;font-weight:bold">}</span>_linux_$a -O $s &amp;&amp; chmod <span style="color:#ff0;font-weight:bold">777</span> $s;pkill -9 $s;<span style="color:#fff;font-weight:bold">$(</span><span style="color:#fff;font-weight:bold">pwd</span><span style="color:#fff;font-weight:bold">)</span>/$s
</span></span></code></pre></div><p>åœ¨ç›®å½•/etc/sillyGirlä¸‹æ–°å»ºsets.confå¯ä»¥è¿›è¡Œåˆå§‹åŒ–é…ç½®</p>
<p>ä¸»è¦æ˜¯é…ç½®ç®¡ç†å‘˜è´¦å·ç­‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¯¹è¯é…ç½®</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>### ä¸€äº›åŸºç¡€è®¾ç½® ###
</span></span><span style="display:flex;"><span># å‚»å¦æœºå™¨äººå
</span></span><span style="display:flex;"><span>set sillyGirl name å‚»å¦
</span></span><span style="display:flex;"><span># å‚»å¦httpæœåŠ¡ç«¯å£
</span></span><span style="display:flex;"><span>set sillyGirl port 800
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># å‚»å¦æ¶ˆæ¯æ’¤å›ç­‰å¾…æ—¶é—´ï¼Œå•ä½ç§’
</span></span><span style="display:flex;"><span>set sillyGirl duration 5
</span></span><span style="display:flex;"><span># å‚»å¦è‡ªåŠ¨å‡çº§æ˜¯å¦é€šçŸ¥
</span></span><span style="display:flex;"><span>set sillyGirl update_notify true
</span></span><span style="display:flex;"><span># æ˜¯å¦å¼€å¯å‚»å¦è‡ªåŠ¨æ›´æ–°
</span></span><span style="display:flex;"><span>set sillyGirl auto_update false
</span></span><span style="display:flex;"><span># å‚»å¦å†…ç½®èµèµç 
</span></span><span style="display:flex;"><span>set sillyGirl appreciate https://gitee.com/aiancandle/sillyGirl/raw/main/appreciate.jpg
</span></span><span style="display:flex;"><span>#æ˜¯å¦å¯åŠ¨httpæœåŠ¡
</span></span><span style="display:flex;"><span>set sillyGirl enable_http_server true
</span></span><span style="display:flex;"><span># å…³é—­å®ˆæŠ¤æ¨¡å¼ï¼Œå®ˆæŠ¤æ¨¡å¼ä¼šå¯¼è‡´æ²¡æ³•è‡ªåŠ¨å‡çº§
</span></span><span style="display:flex;"><span>#systemctl disable sillyGirl
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>### å¯¹æ¥é’é¾™çš„è®¾ç½® ###
</span></span><span style="display:flex;"><span># è®¾ç½®é’é¾™openapiçš„client_idå‚æ•°
</span></span><span style="display:flex;"><span>#set qinglong client_id ?
</span></span><span style="display:flex;"><span># è®¾ç½®é’é¾™openapiçš„client_secretå‚æ•°
</span></span><span style="display:flex;"><span>#set qinglong client_secret ?
</span></span><span style="display:flex;"><span># é’é¾™æ˜¯å¦å¼€å¯è‡ªåŠ¨éšè—é‡å¤ä»»åŠ¡åŠŸèƒ½
</span></span><span style="display:flex;"><span>#set qinglong autoCronHideDuplicate true
</span></span><span style="display:flex;"><span># è®¾ç½®é’é¾™é¢æ¿åœ°å€
</span></span><span style="display:flex;"><span>#set qinglong host http://127.0.0.1:5700
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>### å¯¹æ¥QQçš„è®¾ç½® ###
</span></span><span style="display:flex;"><span># è®¾ç½®qqç™»å½•è´¦å·
</span></span><span style="display:flex;"><span>#set qq uin ?
</span></span><span style="display:flex;"><span># è®¾ç½®qqç™»å½•å¯†ç 
</span></span><span style="display:flex;"><span>#set qq password ?
</span></span><span style="display:flex;"><span># è®¾ç½®qqä¸´æ—¶æ¶ˆæ¯é»˜è®¤ç¾¤å·
</span></span><span style="display:flex;"><span>#set qq tempMessageGroupCode ?
</span></span><span style="display:flex;"><span># æŒ‡å®šè¦ç›‘å¬çš„qqç¾¤
</span></span><span style="display:flex;"><span>#set qq onGroups g1&amp;g2&amp;g3...
</span></span><span style="display:flex;"><span># è®¾ç½®æ˜¯å¦è‡ªåŠ¨åŒæ„å¥½å‹è¯·æ±‚
</span></span><span style="display:flex;"><span>#set qq auto_friend false
</span></span><span style="display:flex;"><span># è®¾ç½®æ˜¯å¦å¯¹ç›‘å¬è‡ªèº«æ¶ˆæ¯
</span></span><span style="display:flex;"><span>#set qq onself true
</span></span><span style="display:flex;"><span># è®¾ç½®qqç®¡ç†å‘˜
</span></span><span style="display:flex;"><span>#set qq masters q1&amp;q2&amp;q3...
</span></span><span style="display:flex;"><span># è®¾ç½®æ¥å—é€šçŸ¥çš„qqè´¦å·
</span></span><span style="display:flex;"><span>#set qq notifier q1&amp;q2&amp;q3...
</span></span><span style="display:flex;"><span># è®¾ç½®qqè®¾å¤‡ä¿¡æ¯(è‡ªåŠ¨ç”Ÿæˆ)
</span></span><span style="display:flex;"><span>#set qq device.json ?
</span></span><span style="display:flex;"><span># è®¾ç½®qqç™»å½•ä»¤ç‰Œ(è‡ªåŠ¨ç”Ÿæˆ)
</span></span><span style="display:flex;"><span>#set qq session.token ?
</span></span><span style="display:flex;"><span># æ³¨é”€qqbotå‘½ä»¤ï¼Œé‡æ–°è¿è¡Œæ‰«ç å³å¯
</span></span><span style="display:flex;"><span>#delete qq session.token
</span></span><span style="display:flex;"><span># æŒ‡å®šç³»ç»Ÿé€šçŸ¥å‘é€å¯¹è±¡å‘½ä»¤ï¼Œå¦‚ä¸è®¾ç½®é»˜è®¤å‘é€ç»™æ‰€æœ‰ç®¡ç†å‘˜ã€‚
</span></span><span style="display:flex;"><span>#set [im type] notifiers [accounts join by &#39;&amp;&#39;] 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>### å¯¹æ¥telegramçš„è®¾ç½® ###
</span></span><span style="display:flex;"><span># è®¾ç½®telegramæœºå™¨äººtoken
</span></span><span style="display:flex;"><span>#set tg token ?
</span></span><span style="display:flex;"><span># è®¾ç½®telegramæœºå™¨äººä»£ç†
</span></span><span style="display:flex;"><span>#set tg http_proxy ?
</span></span><span style="display:flex;"><span># è®¾ç½®telegramæœºå™¨äººç®¡ç†å‘˜
</span></span><span style="display:flex;"><span>#set tg masters t1&amp;t2&amp;t3...
</span></span><span style="display:flex;"><span># è®¾ç½®æ¥å—é€šçŸ¥çš„telegramè´¦å·
</span></span><span style="display:flex;"><span>#set tg notifier t1&amp;t2&amp;t3...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>### å¯¹æ¥å¾®ä¿¡å…¬ä¼—å·çš„è®¾ç½® ###
</span></span><span style="display:flex;"><span># è®¾ç½®å¾®ä¿¡å…¬ä¼—å¹³å°app_id
</span></span><span style="display:flex;"><span>#set wxmp app_id ?
</span></span><span style="display:flex;"><span># è®¾ç½®å¾®ä¿¡å…¬ä¼—å¹³å°app_secret
</span></span><span style="display:flex;"><span>#set wxmp app_secret ?
</span></span><span style="display:flex;"><span># è®¾ç½®å¾®ä¿¡å…¬ä¼—å¹³å°token
</span></span><span style="display:flex;"><span>#set wxmp token ?
</span></span><span style="display:flex;"><span># è®¾ç½®å¾®ä¿¡å…¬ä¼—å¹³å°encoding_aes_key
</span></span><span style="display:flex;"><span>#set wxmp encoding_aes_key ?
</span></span><span style="display:flex;"><span># è®¾ç½®å¾®ä¿¡å…¬ä¼—å¹³å°ç®¡ç†å‘˜
</span></span><span style="display:flex;"><span>#set wxmp masters w1&amp;w2&amp;w3...
</span></span><span style="display:flex;"><span># è®¾ç½®å…¬ä¼—å·å…³æ³¨äº‹ä»¶å›å¤
</span></span><span style="display:flex;"><span>#set wxmp subscribe_reply æ„Ÿè°¢å…³æ³¨ï¼
</span></span><span style="display:flex;"><span># è®¾ç½®å…¬ä¼—å·é»˜è®¤å›å¤
</span></span><span style="display:flex;"><span>#set wxmp default_reply æ— æ³•å›å¤è¯¥æ¶ˆæ¯
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>### å¯¹æ¥å¾®ä¿¡å·çš„è®¾ç½® ###
</span></span><span style="display:flex;"><span># å‚»å¦å†…ç½®å¾®ä¿¡æ’ä»¶ï¼Œä¾èµ–äºå¯çˆ±çŒ«å’Œhttp-sdk
</span></span><span style="display:flex;"><span># å‚»å¦è¿œç¨‹å¤„ç†æ¥å£ /wx/receive
</span></span><span style="display:flex;"><span># è®¾ç½®æ’ä»¶è°ƒç”¨åœ°å€ï¼Œç¡®ä¿å‚»å¦å¯ä»¥è®¿é—®å¯çˆ±çŒ«ç«¯å£
</span></span><span style="display:flex;"><span>#set wx api_url ?
</span></span><span style="display:flex;"><span># è®¾ç½®å›¾ç‰‡è½¬å‘æ¨¡å¼ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°æ­¤å›¾ç‰‡æ¥è‡ªxxæœªç»å…è®¸ä¸å¾—ä½¿ç”¨çš„æç¤º
</span></span><span style="display:flex;"><span>set wx relay_mode true
</span></span><span style="display:flex;"><span># è®¾ç½®æŒ‡å®šè½¬å‘åœ°å€ï¼Œæ ¼å¼ä¸º https://åŸŸå/relay?url=%sï¼Œä¸çŸ¥é“ä¸ç”¨å¡«
</span></span><span style="display:flex;"><span>#set wx relaier ?
</span></span><span style="display:flex;"><span># è®¾ç½®# å‚»å¦æ˜¯å¦åŠ¨æ€ç½‘ç»œåœ°å€ï¼Œé€‚ç”¨äº# å‚»å¦å®¶åº­å®½å¸¦è€Œå¯çˆ±çŒ«åœ¨äº‘æœåŠ¡å™¨çš„æƒ…å†µä¸‹
</span></span><span style="display:flex;"><span>#set wx sillyGirl_dynamic_ip true
</span></span><span style="display:flex;"><span># è®¾ç½®å¯çˆ±çŒ«æ˜¯å¦åŠ¨æ€ç½‘ç»œåœ°å€ï¼Œé€‚ç”¨äºå¯çˆ±çŒ«å®¶åº­å®½å¸¦è€Œ# å‚»å¦åœ¨äº‘æœåŠ¡å™¨çš„æƒ…å†µä¸‹
</span></span><span style="display:flex;"><span>#set wx keaimao_dynamic_ip true
</span></span><span style="display:flex;"><span># è®¾ç½®å¯çˆ±çŒ«ç«¯å£
</span></span><span style="display:flex;"><span>#set wx keaimao_port ?
</span></span><span style="display:flex;"><span># è®¾ç½®å¾®ä¿¡ç®¡ç†å‘˜
</span></span><span style="display:flex;"><span>#set wx masters ?
</span></span><span style="display:flex;"><span># vlwçš„APIè°ƒç”¨åœ°å€
</span></span><span style="display:flex;"><span>#set wx vlw_addr http://ip:port
</span></span><span style="display:flex;"><span># vlwçš„token
</span></span><span style="display:flex;"><span>#set wx vlw_token ?
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>### å¯¹æ¥pushplusçš„è®¾ç½® ###
</span></span><span style="display:flex;"><span># ç®¡ç†å‘˜æ¨é€ç»‘å®špushplusæŒ‡ä»¤
</span></span><span style="display:flex;"><span>#set sillyGirl pushplus [token]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># å…³é”®è¯æ’¤å›åŠŸèƒ½ï¼Œå…³é”®è¯æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‚
</span></span><span style="display:flex;"><span>#set sillyGirl recall å…³é”®è¯1&amp;å…³é”®è¯2...
</span></span><span style="display:flex;"><span># å…³é”®è¯å›å¤åŠŸèƒ½ï¼Œç¬¬ä¸€ä¸ªé—®å·æ˜¯æ”¯æŒæ­£åˆ™çš„å…³é”®è¯ï¼Œç¬¬äºŒä¸ªé—®å·æ˜¯å›å¤çš„å†…å®¹ã€‚
</span></span><span style="display:flex;"><span>#set reply ? ?
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>### å¯¹æ¥èŠå£«çš„è®¾ç½® ###
</span></span><span style="display:flex;"><span># èµ„äº§æ¨é€å®šæ—¶ï¼Œä»¥ä¹ç‚¹ä¸ºä¾‹ï¼ŒåŒ…æ‹¬å¤±æ•ˆæé†’ã€‚
</span></span><span style="display:flex;"><span>set jd_cookie asset_push 0 9 * * *
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># è®¾ç½®é˜¿ä¸œç™»å½•åœ°å€ï¼Œä¾‹ï¼šset jd_cookie adong_addr 192.168.1.1:5702
</span></span><span style="display:flex;"><span>#set jd_cookie adong_addr é˜¿ä¸œip:ç«¯å£
</span></span><span style="display:flex;"><span># è®¾ç½®é˜¿ä¸œqqæœºå™¨äººè´¦å·ï¼Œè¿™é‡Œçš„æœºå™¨äººqqè´¦å·ï¼Œè¯·åŠ¡å¿…å’Œé˜¿ä¸œgo-cqhttpé…ç½®ä¸­config.ymlé‡Œqqä¸€æ ·ã€‚
</span></span><span style="display:flex;"><span>#set jd_cookie selfQid æœºå™¨äººqqè´¦å·
</span></span><span style="display:flex;"><span># è®¾ç½®ç™»å½•å‘ä½
</span></span><span style="display:flex;"><span>#set jd_cookie login_num ?
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#è®¾ç½®è¯ºå…°ç™»é™†åœ°å€
</span></span><span style="display:flex;"><span>#set jd_cookie nolan_addr http://è¯ºå…°ip:ç«¯å£
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># å¯¹æ¥xddï¼Œé¢å¤–è®¾ç½®å‚æ•°
</span></span><span style="display:flex;"><span>#set jd_cookie xdd_token ?
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>### å¯¹æ¥å°çˆ±åŒå­¦çš„è®¾ç½® ###
</span></span><span style="display:flex;"><span># å°çˆ±åŒå­¦ï¼Œå¯ä»¥æŒ‡å®šAPIï¼Œå¯¹å°çˆ±è¯´å¯¹è¯æ¨¡å¼å³å¯å¼€å¯è¿ç»­å¯¹è¯æ¨¡å¼ï¼Œé—­å˜´å¯å…³é—­ã€‚
</span></span><span style="display:flex;"><span>#set sillyGirl å°çˆ±åŒå­¦ http://81.70.100.130/api/xiaoai.php?msg=%s&amp;n=text #æŒ‚äº†å°±è‡ªå·±æ¢
</span></span><span style="display:flex;"><span>#set sillyGirl å°çˆ±åŒå­¦ http://jiuli.xiaoapi.cn/i/xiaoai_tts.php?msg=%s #æŒ‚äº†å°±è‡ªå·±æ¢
</span></span><span style="display:flex;"><span># å¤„ç†jsonæ ¼å¼æ•°æ®çš„å°çˆ±apiï¼Œä¸å¡«è·å–æ•´ä¸ªæ–‡æœ¬
</span></span><span style="display:flex;"><span>#set sillyGirl å°çˆ±åŒå­¦gjson text
</span></span><span style="display:flex;"><span># åˆ é™¤å¤„ç†jsonæ ¼å¼æ•°æ®çš„å°çˆ±api
</span></span><span style="display:flex;"><span>#silly delete å°çˆ±åŒå­¦gjson
</span></span><span style="display:flex;"><span># ä½¿ç”¨æ–¹æ³•ï¼š
</span></span><span style="display:flex;"><span>#1ã€å”¤èµ·å°çˆ±ï¼šå‘é€â€œå°çˆ±+æƒ³è¯´çš„è¯â€ï¼Œä¾‹å¦‚ï¼šå°çˆ±ä»Šå¤©å¤©æ°”ã€‚
</span></span><span style="display:flex;"><span>#2ã€å¯¹è¯æ¨¡å¼ï¼šå‘é€â€œå°çˆ±å¯¹è¯æ¨¡å¼â€å¼€å¯ï¼Œå‘é€â€œé—­å˜´â€ç»“æŸã€‚
</span></span><span style="display:flex;"><span>#3ã€æˆè¯­æ¥é¾™ï¼šå‘é€â€œæˆè¯­æ¥é¾™â€å¼€å§‹ã€‚è¿™ä¸ªå¯åº”è¯¥ä¸æ˜¯å°çˆ±åŒå­¦çš„åŠŸèƒ½ï¼Œä½†æˆ‘æ‡’å¾—å•ç‹¬å†™å®ƒäº†ã€‚
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>### å¯¹æ¥çŸ­ç½‘å€çš„è®¾ç½® ###
</span></span><span style="display:flex;"><span># è®¾ç½®çŸ­ç½‘å€æœåŠ¡åœ°å€ï¼Œå¡«å‚»å¦å¯¹å¤–çš„å¯ä»¥è®¿é—®çš„åœ°å€ã€‚
</span></span><span style="display:flex;"><span>#set dwz address ?
</span></span><span style="display:flex;"><span># è®¾ç½®çŸ­ç½‘å€æœåŠ¡å‰ç¼€
</span></span><span style="display:flex;"><span>#set dwz prefix d
</span></span><span style="display:flex;"><span># ä½¿ç”¨æ–¹æ³•
</span></span><span style="display:flex;"><span>#å‘é€â€œçŸ­ç½‘å€+ä½ æƒ³è¦è½¬æ¢çš„ç½‘å€â€œ #ä¾‹ï¼šçŸ­ç½‘å€ http://kejiwanjia.com/
</span></span></code></pre></div><h3 id="å¯åŠ¨å‘½ä»¤">å¯åŠ¨å‘½ä»¤</h3>
<p>é…ç½®å®Œæˆåï¼Œåœ¨/opt/sillyGirlä¸‹æ‰§è¡Œ ./sillyGirl -t æŸ¥çœ‹æ˜¯å¦è¿è¡ŒæˆåŠŸ</p>
<p>è¾“å…¥  time</p>
<p>æˆåŠŸå æ‰§è¡Œ ./sillyGirl -d åå°è¿è¡Œ</p>
<h3 id="å…¶ä»–å¸¸ç”¨å‘½ä»¤">å…¶ä»–å¸¸ç”¨å‘½ä»¤</h3>
<p>æ€æ‰è¿›ç¨‹</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ps -A|grep sillyGirl
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">kill</span> pid 
</span></span></code></pre></div><p>æŸ¥çœ‹ç«¯å£æ˜¯å¦å¼€å¯</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>netstat -tlan
</span></span></code></pre></div><h1 id="äºŒéƒ¨ç½²node-onebot">äºŒã€éƒ¨ç½²node-onebot</h1>
<blockquote>
<p>å‚»å¦å¼€å‘è€…æŠŠå†…ç½®qqç™»å½•ç»™å»æ‰äº†ï¼Œéœ€è¦è‡ªå·±å¯¹æ¥qqbot</p>
<p>å®˜æ–¹ç»™çš„æ˜¯nodeå®‰è£…çš„ï¼Œéœ€è¦å®‰è£…nodeç¯å¢ƒï¼Œå¤ªéº»çƒ¦ï¼Œæ”¹ä¸ºç”¨dockerå®‰è£…</p>
</blockquote>
<h3 id="1æ‹‰å–ä»£ç ">1ã€æ‹‰å–ä»£ç </h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>//å›½å¤–æœº
</span></span><span style="display:flex;"><span>git clone https://github.com/takayama-lily/node-onebot
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>//å›½å†…æœº
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git clone https://ghproxy.realproxy.workers.dev/https://github.com/takayama-lily/node-onebot
</span></span><span style="display:flex;"><span>æœº
</span></span></code></pre></div><h3 id="2ä¿®æ”¹dockerfileæ–‡ä»¶">2ã€ä¿®æ”¹Dockerfileæ–‡ä»¶</h3>
<p>ä¿®æ”¹é»˜è®¤Dockerfileé‡Œé¢æœ€åä¸€è¡Œçš„QQå·æˆè‡ªå·±çš„botè´¦å·</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>FROM node:14-alpine
</span></span><span style="display:flex;"><span>WORKDIR /app
</span></span><span style="display:flex;"><span>COPY . .
</span></span><span style="display:flex;"><span>CMD [&#34;node&#34;, &#34;main&#34;,&#34;è¿™é‡Œæ”¹ä¸ºè‡ªå·±çš„botè´¦å·&#34;]
</span></span></code></pre></div><h3 id="3åˆ›å»ºconfigjsæ–‡ä»¶">3ã€åˆ›å»ºconfig.jsæ–‡ä»¶</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cp config.sample.js config.js
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">&#34;use strict&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å°†æ­¤æ–‡ä»¶æ›´åä¸ºconfig.jsæ‰èƒ½ç”Ÿæ•ˆå“¦
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>module.exports = {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//é€šç”¨é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    general: {
</span></span><span style="display:flex;"><span>        platform:           <span style="color:#ff0;font-weight:bold">5</span>,      <span style="color:#007f7f">//1:å®‰å“æ‰‹æœº 2:aPad 3:å®‰å“æ‰‹è¡¨ 4:MacOS 5:iPad
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        debug:              <span style="color:#fff;font-weight:bold">false</span>,  <span style="color:#007f7f">//å¼€å¯debug
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        use_cqhttp_notice:  <span style="color:#fff;font-weight:bold">true</span>,   <span style="color:#007f7f">//æ˜¯å¦ä½¿ç”¨cqhttpæ ‡å‡†çš„noticeäº‹ä»¶æ ¼å¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>        host:               <span style="color:#0ff;font-weight:bold">&#34;localhost&#34;</span>,  <span style="color:#007f7f">//ç›‘å¬ä¸»æœºå
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        port:               <span style="color:#ff0;font-weight:bold">5700</span>,       <span style="color:#007f7f">//ç«¯å£
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        use_http:           <span style="color:#fff;font-weight:bold">false</span>,      <span style="color:#007f7f">//å¯ç”¨http
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        use_ws:             <span style="color:#fff;font-weight:bold">false</span>,      <span style="color:#007f7f">//å¯ç”¨æ­£å‘wsï¼Œå’Œhttpä½¿ç”¨ç›¸åŒåœ°å€å’Œç«¯å£
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        access_token:       <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,         <span style="color:#007f7f">//è®¿é—®apiçš„token
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        secret:             <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,         <span style="color:#007f7f">//ä¸ŠæŠ¥æ•°æ®çš„sha1ç­¾åå¯†é’¥
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        post_timeout:       <span style="color:#ff0;font-weight:bold">30</span>,         <span style="color:#007f7f">//postè¶…æ—¶æ—¶é—´(ç§’)
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        post_message_format:<span style="color:#0ff;font-weight:bold">&#34;array&#34;</span>,    <span style="color:#007f7f">//&#34;string&#34;æˆ–&#34;array&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        enable_cors:        <span style="color:#fff;font-weight:bold">false</span>,      <span style="color:#007f7f">//æ˜¯å¦å…è®¸è·¨åŸŸè¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        enable_heartbeat:   <span style="color:#fff;font-weight:bold">false</span>,      <span style="color:#007f7f">//æ˜¯å¦å¯ç”¨wså¿ƒè·³
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        heartbeat_interval: <span style="color:#ff0;font-weight:bold">15000</span>,      <span style="color:#007f7f">//wså¿ƒè·³é—´éš”(æ¯«ç§’)
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        rate_limit_interval:<span style="color:#ff0;font-weight:bold">500</span>,        <span style="color:#007f7f">//ä½¿ç”¨_rate_limitedåç¼€é™é€Ÿè°ƒç”¨apiçš„æ’é˜Ÿé—´éš”æ—¶é—´(æ¯«ç§’)
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        event_filter:       <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,         <span style="color:#007f7f">//jsonæ ¼å¼çš„äº‹ä»¶è¿‡æ»¤å™¨æ–‡ä»¶è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        post_url: [ <span style="color:#007f7f">//ä¸ŠæŠ¥åœ°å€ï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªurl
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">// &#34;http://your.address.com:80&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        ],
</span></span><span style="display:flex;"><span>        ws_reverse_url: [ <span style="color:#007f7f">//åå‘wsåœ°å€ï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªurl
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#0ff;font-weight:bold">&#34;ws://127.0.0.1:8080/qq/receive&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è¿™æ˜¯å‚»å¦çš„åå‘é“¾æ¥åœ°å€ï¼Œå…¶ä¸­çš„8080ç«¯å£è®°å¾—æ”¹æˆä½ å‚»å¦çš„ç«¯å£ï¼ŒåŒæ—¶å¼€å¯å‚»å¦çš„å‚»å¦çš„http serverï¼Œå³set sillyGirl enable_http_server true
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        ],
</span></span><span style="display:flex;"><span>        ws_reverse_reconnect_interval: <span style="color:#ff0;font-weight:bold">3000</span>, <span style="color:#007f7f">//åå‘wsæ–­çº¿é‡è¿é—´éš”(æ¯«ç§’)ï¼Œè®¾ä¸ºè´Ÿæ•°ç›´æ¥ä¸é‡è¿
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        ws_reverse_reconnect_on_code_1000: <span style="color:#fff;font-weight:bold">true</span>, <span style="color:#007f7f">//åå‘wsæ˜¯å¦åœ¨å…³é—­çŠ¶æ€ç ä¸º1000çš„æ—¶å€™é‡è¿
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    },
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//æ¯ä¸ªè´¦å·çš„å•ç‹¬é…ç½®(ç”¨äºè¦†ç›–é€šç”¨é…ç½®)
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#ff0;font-weight:bold">147258369</span>: {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å®‰å…¨æ³¨æ„ï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">// ç›‘å¬0.0.0.0è¡¨ç¤ºç›‘å¬ç½‘å¡ä¸Šçš„æ‰€æœ‰åœ°å€ã€‚å¦‚æœä½ çš„æœºå™¨å¯ä»¥é€šè¿‡å…¬ç½‘ipç›´æ¥è®¿é—®ï¼ŒåŒæ—¶ä½ ä¹Ÿæ²¡æœ‰è®¾å®šaccess_tokenï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯æä¸å®‰å…¨çš„ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">// ä½ åº”è¯¥çŸ¥é“è¿™æ ·åšä¼šå¯¼è‡´ä»¥ä¸‹åæœï¼šä»»ä½•äººéƒ½å¯ä»¥æ— é™åˆ¶åœ°è®¿é—®ä½ çš„Botçš„æ‰€æœ‰APIæ¥å£ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">// å¦‚æœåªéœ€è¦åœ¨æœ¬åœ°è®¿é—®ï¼Œå»ºè®®å°†ç›‘å¬åœ°å€æ”¹ä¸ºlocalhostã€‚éœ€è¦é€šè¿‡å…¬ç½‘è®¿é—®ï¼Œä½ æœ€å¥½è®¾å®šaccess_tokenã€‚
</span></span></span></code></pre></div><p>ç»ˆæé˜²é£æ§ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">&#34;use strict&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å°†æ­¤æ–‡ä»¶æ›´åä¸ºconfig.jsæ‰èƒ½ç”Ÿæ•ˆå“¦
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>module.exports = {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//é€šç”¨é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    general: {
</span></span><span style="display:flex;"><span>        platform:           <span style="color:#ff0;font-weight:bold">3</span>,      <span style="color:#007f7f">//1:å®‰å“æ‰‹æœº 2:aPad 3:å®‰å“æ‰‹è¡¨ 4:MacOS 5:iPad
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        debug:              <span style="color:#fff;font-weight:bold">false</span>,  <span style="color:#007f7f">//å¼€å¯debug
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        use_cqhttp_notice:  <span style="color:#fff;font-weight:bold">true</span>,   <span style="color:#007f7f">//æ˜¯å¦ä½¿ç”¨cqhttpæ ‡å‡†çš„noticeäº‹ä»¶æ ¼å¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>        host:               <span style="color:#0ff;font-weight:bold">&#34;localhost&#34;</span>,  <span style="color:#007f7f">//ç›‘å¬ä¸»æœºå
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        port:               <span style="color:#ff0;font-weight:bold">5700</span>,       <span style="color:#007f7f">//ç«¯å£
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        use_http:           <span style="color:#fff;font-weight:bold">false</span>,      <span style="color:#007f7f">//å¯ç”¨http
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        use_ws:             <span style="color:#fff;font-weight:bold">false</span>,      <span style="color:#007f7f">//å¯ç”¨æ­£å‘wsï¼Œå’Œhttpä½¿ç”¨ç›¸åŒåœ°å€å’Œç«¯å£
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        access_token:       <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,         <span style="color:#007f7f">//è®¿é—®apiçš„token
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        secret:             <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,         <span style="color:#007f7f">//ä¸ŠæŠ¥æ•°æ®çš„sha1ç­¾åå¯†é’¥
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        post_timeout:       <span style="color:#ff0;font-weight:bold">30</span>,         <span style="color:#007f7f">//postè¶…æ—¶æ—¶é—´(ç§’)
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        post_message_format:<span style="color:#0ff;font-weight:bold">&#34;array&#34;</span>,    <span style="color:#007f7f">//&#34;string&#34;æˆ–&#34;array&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        enable_cors:        <span style="color:#fff;font-weight:bold">false</span>,      <span style="color:#007f7f">//æ˜¯å¦å…è®¸è·¨åŸŸè¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        enable_heartbeat:   <span style="color:#fff;font-weight:bold">false</span>,      <span style="color:#007f7f">//æ˜¯å¦å¯ç”¨wså¿ƒè·³
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        heartbeat_interval: <span style="color:#ff0;font-weight:bold">15000</span>,      <span style="color:#007f7f">//wså¿ƒè·³é—´éš”(æ¯«ç§’)
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        rate_limit_interval:<span style="color:#ff0;font-weight:bold">500</span>,        <span style="color:#007f7f">//ä½¿ç”¨_rate_limitedåç¼€é™é€Ÿè°ƒç”¨apiçš„æ’é˜Ÿé—´éš”æ—¶é—´(æ¯«ç§’)
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        event_filter:       <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,         <span style="color:#007f7f">//jsonæ ¼å¼çš„äº‹ä»¶è¿‡æ»¤å™¨æ–‡ä»¶è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        post_url: [ <span style="color:#007f7f">//ä¸ŠæŠ¥åœ°å€ï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªurl
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">// &#34;http://your.address.com:80&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        ],
</span></span><span style="display:flex;"><span>        ws_reverse_url: [ <span style="color:#007f7f">//åå‘wsåœ°å€ï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªurl
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#0ff;font-weight:bold">&#34;ws://127.0.0.1:8080/qq/receive&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è¿™æ˜¯å‚»å¦çš„åå‘é“¾æ¥åœ°å€ï¼Œå…¶ä¸­çš„8080ç«¯å£è®°å¾—æ”¹æˆä½ å‚»å¦çš„ç«¯å£ï¼ŒåŒæ—¶å¼€å¯å‚»å¦çš„å‚»å¦çš„http serverï¼Œå³set sillyGirl enable_http_server true
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        ],
</span></span><span style="display:flex;"><span>        ws_reverse_reconnect_interval: <span style="color:#ff0;font-weight:bold">3000</span>, <span style="color:#007f7f">//åå‘wsæ–­çº¿é‡è¿é—´éš”(æ¯«ç§’)ï¼Œè®¾ä¸ºè´Ÿæ•°ç›´æ¥ä¸é‡è¿
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        ws_reverse_reconnect_on_code_1000: <span style="color:#fff;font-weight:bold">true</span>, <span style="color:#007f7f">//åå‘wsæ˜¯å¦åœ¨å…³é—­çŠ¶æ€ç ä¸º1000çš„æ—¶å€™é‡è¿
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    },
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//æ¯ä¸ªè´¦å·çš„å•ç‹¬é…ç½®(ç”¨äºè¦†ç›–é€šç”¨é…ç½®)
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#ff0;font-weight:bold">147258369</span>: {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å®‰å…¨æ³¨æ„ï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">// ç›‘å¬0.0.0.0è¡¨ç¤ºç›‘å¬ç½‘å¡ä¸Šçš„æ‰€æœ‰åœ°å€ã€‚å¦‚æœä½ çš„æœºå™¨å¯ä»¥é€šè¿‡å…¬ç½‘ipç›´æ¥è®¿é—®ï¼ŒåŒæ—¶ä½ ä¹Ÿæ²¡æœ‰è®¾å®šaccess_tokenï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯æä¸å®‰å…¨çš„ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">// ä½ åº”è¯¥çŸ¥é“è¿™æ ·åšä¼šå¯¼è‡´ä»¥ä¸‹åæœï¼šä»»ä½•äººéƒ½å¯ä»¥æ— é™åˆ¶åœ°è®¿é—®ä½ çš„Botçš„æ‰€æœ‰APIæ¥å£ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">// å¦‚æœåªéœ€è¦åœ¨æœ¬åœ°è®¿é—®ï¼Œå»ºè®®å°†ç›‘å¬åœ°å€æ”¹ä¸ºlocalhostã€‚éœ€è¦é€šè¿‡å…¬ç½‘è®¿é—®ï¼Œä½ æœ€å¥½è®¾å®šaccess_tokenã€‚
</span></span></span></code></pre></div><h3 id="4ç¼–è¯‘docker-image">4ã€ç¼–è¯‘docker image</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker build -t yongs/node-onebot:latest .
</span></span></code></pre></div><p>yongsè‡ªå®šä¹‰çš„ï¼Œéšä¾¿èµ·ï¼Œä¸€å®šä¸è¦å¿˜äº† æœ€åæœ‰ä¸ª<u> . </u>è¡¨ç¤ºåœ¨å½“å‰ç›®å½•æ–‡ä»¶ç¼–è¯‘</p>
<h3 id="5å¯åŠ¨image">5ã€å¯åŠ¨image</h3>
<p>ç”¨çš„æ˜¯docker-composeå¯åŠ¨çš„ï¼Œåˆšæ‰æ‹‰çš„ä»£ç å·²ç»æœ‰yamlæ–‡ä»¶äº†ï¼Œ</p>
<p>éœ€è¦æ³¨æ„ imageåå­—æ˜¯åˆšæ‰ç¼–è¯‘çš„åå­—ï¼Œä¸çŸ¥é“å¯ä»¥ç”¨</p>
<p>docker images æŸ¥çœ‹ï¼Œä¿®æ”¹imageåå­—å³å¯</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="font-weight:bold">version</span>: <span style="color:#0ff;font-weight:bold">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">services</span>:
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">miraiok</span>:
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">image</span>: yongs/node-onebot
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">restart</span>: always
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">network_mode</span>: <span style="color:#0ff;font-weight:bold">&#34;host&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">volumes</span>:
</span></span><span style="display:flex;"><span>      - ./config.js:/root/config.js
</span></span><span style="display:flex;"><span>      - ./data:/app/data
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">stdin_open</span>: <span style="color:#fff;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">tty</span>: <span style="color:#fff;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">container_name</span>: docker-onebot
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker-compose up -d
</span></span></code></pre></div><h3 id="6æŸ¥çœ‹æ—¥å¿—æ‰«ç ç™»å½•ä¸èƒ½ç™»å½•è¿›å…¥å®¹å™¨å†…æ‰«ç ">6ã€æŸ¥çœ‹æ—¥å¿—ï¼Œ<del>æ‰«ç ç™»å½•ï¼Œä¸èƒ½ç™»å½•è¿›å…¥å®¹å™¨å†…æ‰«ç </del></h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#007f7f">#æŸ¥çœ‹æ—¥å¿—</span>
</span></span><span style="display:flex;"><span>docker logs -f -n <span style="color:#ff0;font-weight:bold">500</span> docker-onebot
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#è¿›å…¥å®¹å™¨</span>
</span></span><span style="display:flex;"><span>docker <span style="color:#fff;font-weight:bold">exec</span> -it docker-onebot /bin/sh
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#æ‰§è¡Œç™»å½•</span>
</span></span><span style="display:flex;"><span>node main <span style="color:#0ff;font-weight:bold">&#34;botqqå·&#34;</span>
</span></span></code></pre></div><p>ç»™å°åŠ©æ‰‹å‘é€å‘½ä»¤çœ‹æ˜¯å¦æˆåŠŸï¼Œæ¯”å¦‚ å‘é€ name</p>
<p>å‘é€ æ·˜å®äº¬è±†æ‹¼å¤šå¤šé“¾æ¥çœ‹æ˜¯å¦å›å¤ï¼Œå›å¤å³éƒ¨ç½²æˆåŠŸã€‚</p>
<p>ç™»å½•æˆåŠŸåï¼Œé‡å¯dockerå³å¯</p>
<p>è¿™é‡Œçš„å‘å°±æ˜¯å‚»å¦å¯åŠ¨å¤±è´¥ï¼Œå¯¼è‡´onebotè¿æ¥ä¸ä¸Šå‚»å¦ã€‚</p>
<h3 id="7ç¾¤è¢«é£æ§çš„è§£å†³åŠæ³•">7ã€ç¾¤è¢«é£æ§çš„è§£å†³åŠæ³•</h3>
<p>å‚è€ƒäº†å¤§ä½¬çš„è§£å†³åŠæ³•<a href="https://github.com/Mrs4s/go-cqhttp/issues/958#issuecomment-890430577">é£æ§è§£é™¤æœ€ç»ˆç‰ˆ</a></p>
<ol>
<li>
<p>å¼€å¯è®¾å¤‡é”ï¼Œè´¦å·è®¾ç½®é‡Œé¢çš„</p>
</li>
<li>
<p>åˆ é™¤session.token æˆ‘æ˜¯ç›´æ¥æŠŠæ•´ä¸ªè´¦å·æ–‡ä»¶å¤¹åˆ äº†</p>
</li>
<li>
<p>åˆ‡æ¢å®‰å“åè®®  1æˆ–è€…3 æˆ‘ç”¨çš„3</p>
</li>
<li>
<p>å¡«å†™å¯†ç ç™»é™†</p>
</li>
<li>
<p>éœ€è¦éªŒè¯ä¿¡æ¯ï¼Œæ ¹æ®æç¤ºä¸€æ­¥ä¸€æ­¥æ“ä½œå³å¯ï¼ˆé“¾æ¥æ¨èåœ¨Chromeé‡Œæ‰“å¼€æŸ¥æ‰¾ï¼‰</p>
</li>
</ol>
<blockquote>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p>1ã€<a href="https://www.kejiwanjia.com/jiaocheng/zheteng/19778.html#node-onebotqqbot">ç¾¤æ™–å‚»å¦SillyGirlå®Œæ•´éƒ¨ç½²æ•™ç¨‹ 12.13æ›´æ–°node-onebot - ç§‘æŠ€ç©å®¶</a></p>
<p>2ã€<a href="https://www.kejiwanjia.com/jiaocheng/51905.html">Dockerç¼–è¯‘node-onebotï¼Œå‚»å¦åˆæ´»äº† - ç§‘æŠ€ç©å®¶</a></p>
<p>3ã€<a href="https://github.com/AboutCXJ/SillyGirlDockerDeploy">GitHub - AboutCXJ/SillyGirlDockerDeploy</a></p>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>Hugo è‡ªåŠ¨æ›´æ–°æ–‡ç« ä¿®æ”¹æ—¶é—´</title>
      <link>https://blog.zsan.ml/posts/hugo-auto-update-lastmod/</link>
      <pubDate>Sat, 22 Jan 2022 21:34:31 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/hugo-auto-update-lastmod/</guid>
      <description>configé…ç½®æ–‡ä»¶é‡ŒåŠ ä¸Šå¦‚ä¸‹å‚æ•°ï¼š frontmatter: lastmod: - lastmod - :git - :fileModTime - :default ä¾æ¬¡å–çš„é¡ºåºä¸ºï¼š lastmod :æœ€åæäº¤</description>
      <content:encoded><![CDATA[<p>configé…ç½®æ–‡ä»¶é‡ŒåŠ ä¸Šå¦‚ä¸‹å‚æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="font-weight:bold">frontmatter</span>:
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">lastmod</span>:
</span></span><span style="display:flex;"><span>        - lastmod
</span></span><span style="display:flex;"><span>        - :git
</span></span><span style="display:flex;"><span>        - :fileModTime
</span></span><span style="display:flex;"><span>        - :default
</span></span></code></pre></div><p>ä¾æ¬¡å–çš„é¡ºåºä¸ºï¼š</p>
<blockquote>
<p>lastmod :æœ€åæäº¤æ—¶é—´</p>
<p>:git: æ ¹æ®gitæäº¤ç‰ˆæœ¬æ—¶é—´</p>
<p>:fileModTimeï¼šæ–‡ä»¶ä¿®æ”¹æ—¶é—´</p>
</blockquote>
<p><a href="https://gohugo.io/getting-started/configuration/#configure-front-matter">Configure Hugo | Hugo</a> å†™çš„éƒ½æœ‰,butæ˜¯è‹±æ–‡çš„ğŸ™ƒ</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Docker Composeéƒ¨ç½²filebrowser</title>
      <link>https://blog.zsan.ml/posts/docker-deploy-filebrowser/</link>
      <pubDate>Fri, 21 Jan 2022 11:24:05 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/posts/docker-deploy-filebrowser/</guid>
      <description>dockerå¿«é€Ÿæ­å»ºä¸ªäººç½‘ç›˜</description>
      <content:encoded><![CDATA[<p>åœ¨linuxserveræœåŠ¡å™¨ä¸Šå®‰è£…</p>
<p>ç¯å¢ƒï¼šdockerã€docker- compose</p>
<p>éœ€è¦äº†è§£dockeråŸºæœ¬çŸ¥è¯†ï¼Œä¸æ‡‚å¯ä»¥ç¿»ç¿»ä»¥å‰çš„åšå®¢æˆ–è€…æœä¸‹æ•™ç¨‹å­¦ä¹ </p>
<p><a href="https://filebrowser.org/installation">filebrowser</a>å®˜ç½‘ä¸Šç»™çš„æ˜¯dockerå‘½ä»¤æ‰§è¡Œçš„ï¼Œä½†ç”¨composeä¹ æƒ¯äº†ï¼Œæ‰€ä»¥è½¬æ¢äº†ä¸€ä¸‹æ ¼å¼ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸ªå‘ï¼Œå®˜ç½‘ä¹Ÿæç¤ºäº†</p>
<blockquote>
<p>By default, we already have a <a href="https://github.com/filebrowser/filebrowser/blob/master/docker/root/defaults/settings.json">configuration file with some defaults</a> so you can just mount the root and the database. Although you can overwrite by mounting a directory with a new config file. If you don&rsquo;t already have a database file, make sure to create a new empty file under the path you specified. Otherwise, Docker will create an empty folder instead of an empty file, resulting in an error when mounting the database into the container.</p>
</blockquote>
<p>ç¿»è¯‘è¿‡æ¥å°±æ˜¯éœ€è¦æå‰åˆ›å»ºæ‰€éœ€çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œå¦åˆ™ï¼ŒDockerä¼šåˆ›å»ºä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹è€Œä¸æ˜¯ç©ºçš„æ–‡ä»¶ï¼Œå¯¼è‡´åœ¨å°†æ•°æ®åº“æŒ‚è½½åˆ°å®¹å™¨ä¸­æ—¶å‡ºç°é”™è¯¯ï¼è¿™ç‚¹ä¸€å®šè¦æ³¨æ„å•Šï¼ï¼ï¼</p>
<h1 id="1åˆ›å»ºdocker-composeæ–‡ä»¶">1ã€åˆ›å»ºdocker-composeæ–‡ä»¶</h1>
<p>å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="font-weight:bold">version</span>: <span style="color:#0ff;font-weight:bold">&#39;3.3&#39;</span> 
</span></span><span style="display:flex;"><span><span style="font-weight:bold">services</span>:     
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">filebrowser</span>:  
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">image</span>: filebrowser/filebrowser:s6
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">container_name</span>: filebrowser
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">volumes</span>:  
</span></span><span style="display:flex;"><span>            - ./root:/srv           
</span></span><span style="display:flex;"><span>            - ./database/filebrowser.db:/database/filebrowser.db 
</span></span><span style="display:flex;"><span>            - ./settings.json:/config/settings.json
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">environment</span>:
</span></span><span style="display:flex;"><span>            - PUID=0
</span></span><span style="display:flex;"><span>            - PGID=0
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">ports</span>: 
</span></span><span style="display:flex;"><span>            - <span style="color:#0ff;font-weight:bold">&#39;8080:80&#39;</span>         
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">restart</span>: always
</span></span></code></pre></div><h1 id="2åˆ›å»ºé»˜è®¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹">2ã€åˆ›å»ºé»˜è®¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</h1>
<p>å¯¹ç…§ä¸Šè¿°docker-composeçš„è·¯å¾„ï¼Œéœ€è¦åœ¨å½“å‰ç›®å½•åˆ›å»º settings.json æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&#34;port&#34;</span>: <span style="color:#ff0;font-weight:bold">80</span>,
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&#34;baseURL&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&#34;address&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;0.0.0.0&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&#34;log&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;stdout&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&#34;database&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;/database/filebrowser.db&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&#34;root&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;/srv&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>åœ¨å½“å‰ç›®å½•åˆ›å»º database/filebrowser.db æ–‡ä»¶å¤¹å’Œæ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir database
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> database
</span></span><span style="display:flex;"><span>touch filebrowser.db
</span></span></code></pre></div><h1 id="3è¿è¡Œæµ‹è¯•æ˜¯å¦æˆåŠŸ">3ã€è¿è¡Œæµ‹è¯•æ˜¯å¦æˆåŠŸ</h1>
<p>æ‰§è¡Œ docker- compose logs -f çœ‹ä¸‹æ—¥å¿—æ˜¯å¦æŠ¥é”™</p>
<p>éœ€è¦å…¶ä»–æœºå™¨è®¿é—®è®°å¾—é˜²ç«å¢™ æŠŠç«¯å£æ‰“å¼€ï¼Œæœ¬ä¾‹ç”¨çš„8080ç«¯å£</p>
<p>æµè§ˆå™¨è®¿é—® æœåŠ¡å™¨ip:8080 æˆåŠŸæ‰“å¼€å³å¯ï¼ŒEnjoy itï¼ğŸ‰ğŸ‰ğŸ‰</p>
<h1 id="4n1å°é’¢ç‚®å®‰è£…">4ã€n1å°é’¢ç‚®å®‰è£…</h1>
<blockquote>
<p>ç¯å¤§é­”æ”¹çš„å¥½ä¹…æ²¡æ›´æ–°äº†ï¼ŒåŠŸèƒ½å¥½å¤šä¸æ”¯æŒäº†ï¼Œä»Šå¤©ç»™å‡çº§ï¼ˆè¸©å‘ï¼‰äº†ä¸€ä¸‹</p>
</blockquote>
<p>1ã€docker-composeéœ€è¦æ”¹ä¸‹é…ç½®</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="font-weight:bold">version</span>: <span style="color:#0ff;font-weight:bold">&#39;3.3&#39;</span> 
</span></span><span style="display:flex;"><span><span style="font-weight:bold">services</span>:     
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">filebrowser</span>:  
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">image</span>: filebrowser/filebrowser
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">container_name</span>: filebrowser
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">volumes</span>:  
</span></span><span style="display:flex;"><span>            - /media:/srv           
</span></span><span style="display:flex;"><span>            - ./database/filebrowser.db:/database/filebrowser.db 
</span></span><span style="display:flex;"><span>            - ./settings.json:/config/settings.json
</span></span><span style="display:flex;"><span>            - /etc/timezone:/etc/timezone    <span style="color:#007f7f">#æ—¶åŒº cst</span>
</span></span><span style="display:flex;"><span>            - /etc/localtime:/etc/localtime  <span style="color:#007f7f">#æ—¶åŒº cst</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">environment</span>:
</span></span><span style="display:flex;"><span>            - PUID=1002
</span></span><span style="display:flex;"><span>            - PGID=100
</span></span><span style="display:flex;"><span>              <span style="color:#007f7f"># - TZ=Asia/Shanghai</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">ports</span>: 
</span></span><span style="display:flex;"><span>            - <span style="color:#0ff;font-weight:bold">&#39;8081:80&#39;</span>         
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">restart</span>: always
</span></span></code></pre></div><p>2ã€ç¯å¤§ç‰ˆçš„ç§»é™¤ï¼Œæ‰§è¡Œè¿™ä¸ªå³å¯</p>
<p>ä¸¤ä¸ªå°å‘ï¼Œ1ã€é•œåƒè¦ç”¨lasterçš„ 2ã€æ—¶åŒºè®¾ç½®ç”¨æŒ‚è½½çš„</p>
<blockquote>
<p>å‚è€ƒï¼š</p>
<p>1ã€<a href="https://filebrowser.org">filebrowserå®˜ç½‘</a></p>
<p>2ã€<a href="https://www.liuhaolin.com/zhuanzai/906.html">filebrowser ä¸€ä¸ªè·¨å¹³å°çš„æ–‡ä»¶ç®¡ç†å™¨çš„ä½¿ç”¨æ–¹æ³•-æ£®æ—çš„ä¸ªäººåšå®¢</a></p>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>About</title>
      <link>https://blog.zsan.ml/about/</link>
      <pubDate>Thu, 13 Jan 2022 20:56:38 +0800</pubDate>
      
      <guid>https://blog.zsan.ml/about/</guid>
      <description>å¦‚æœçœŸçš„æ˜¯ä½ ï¼Œè¯·æ‰“æ‹›å‘¼ï¼ ğŸ  å…³äºæœ¬ç«™ è¿™é‡Œä¸»è¦è®°å½•ä¸€äº›å¹³å¸¸é‡åˆ°çš„ä¸€äº›æŠ€æœ¯å‘ï¼Œæ–¹ä¾¿ä»¥åå¯ä»¥</description>
      <content:encoded><![CDATA[<blockquote>
<p>å¦‚æœçœŸçš„æ˜¯ä½ ï¼Œè¯·æ‰“æ‹›å‘¼ï¼</p>
</blockquote>
<h2 id="-å…³äºæœ¬ç«™">ğŸ  å…³äºæœ¬ç«™</h2>
<p>è¿™é‡Œä¸»è¦è®°å½•ä¸€äº›å¹³å¸¸é‡åˆ°çš„ä¸€äº›æŠ€æœ¯å‘ï¼Œæ–¹ä¾¿ä»¥åå¯ä»¥æŸ¥é˜…ğŸ˜„</p>
<p>Â Â Â Â Â Â Â Â æœ¬ç«™æœ€å¼€å§‹æ˜¯2019å¹´å°±æ­å»ºäº†ï¼Œå½“æ—¶ç”¨çš„hexoæ„å»ºï¼Œéƒ¨ç½²åœ¨githubï¼Œç”¨netlifyç¼“å­˜æœåŠ¡ï¼Œæ— å¥ˆå½“æ—¶ç©·ï¼Œç”¨çš„è¿˜æ˜¯Windowsæœ¬ï¼Œå‘½ä»¤æ•²çš„å¤ªä¸çˆ½äº†ï¼Œå¯¼è‡´å†™æ–‡ç« æ²¡ä»€ä¹ˆæ¿€æƒ…ï¼ŒåŸºæœ¬æ–­æ›´ğŸ¤£</p>
<p>æ¥åˆ°2021å¹´ï¼Œç»å¸¸åœ¨ç½‘ä¸Šçœ‹å¤§ä½¬ä»¬çš„blogï¼Œæ—¶é—´æœ‰ç‚¹ç©ºï¼Œå°±æƒ³æŠŠblogç»™æ‹¾èµ·æ¥ï¼Œæ¥è§¦çš„æŠ€æœ¯ä¹Ÿå¤šäº†ï¼Œä¹Ÿæƒ³è®°å½•ä¸‹ä¸€äº›ç¬”è®°ï¼Œæ–¹ä¾¿åé¢éšæ—¶ç¿»é˜…ï¼Œæ­£å¥½åœ¨æ¨ä¸Šçœ‹åˆ°å¤§ä½¬ä»¬æ¨è<a href="https://github.com/getgridea/gridea">gridea: âœï¸ A static blog writing client (ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯)</a></p>
<p>Â Â Â Â Â Â Â Â å‚»ç“œå¼æ“ä½œï¼Œæ ¹æ®ç•Œé¢æç¤ºè®¾ç½®å°±è¡Œäº†ï¼Œä¸“æ³¨äºå†™ä½œï¼Œå½“æ—¶å°±ä¸‹ä¸‹æ¥ç”¨äº†ä¸€æ®µæ—¶é—´ï¼Œä¹Ÿæœ‰æ¯”è¾ƒé¸¡è‚‹çš„åœ°æ–¹ï¼Œæ¯”å¦‚ä¸»é¢˜å¤ªå°‘ï¼Œè‡ªå®šä¹‰ç©ºé—´å¤ªå°ï¼Œè¿˜æœ‰å°±æ˜¯windows7ä¸Šä¸å¤ªç¨³å®šï¼Œæœ‰æ—¶ä¼šå¡ï¼Œå¯èƒ½æˆ‘ç”µè„‘åƒåœ¾å§ï¼Œä¸»é¢˜å¤ªå°‘ï¼Œæœ‰çš„ä¸»é¢˜ä¸æ”¯æŒä¾§è¾¹ç›®å½•æ ï¼Œå½“æ—¶æœäº†å¥½å¤šæ–‡ç« ï¼Œæ‰æ”¹äº†ä¸€ä¸‹ä¸»é¢˜ï¼Œå…·ä½“çœ‹<a href="../posts/girde-simple-support-for-sidebar-directory/">è¿™ç¯‡</a>ï¼Œè¿˜æœ‰å°±æ˜¯ï¼Œä½œè€…å¥½ä¹…ä¸æ›´æ–°äº†ï¼Œä¸“æ³¨äºæwebç«¯äº†ï¼Œæ‰€ä»¥å°±åœ¨æ¢äº†Macåå°±æ¢åˆ°äº†hugoä¸Š</p>
<p>Â Â Â Â Â Â Â Â <a href="https://gohugo.io/">hugo</a>ç”¨goå¼€å‘çš„ï¼Œæ®è¯´ç”Ÿæˆæ–‡ç« éå¸¸å¿«ï¼Œç›¸æ¯”hexoæ¥è¯´ï¼Œhugoåœ¨Macä¸Šç”¨å‘½ä»¤ä¹Ÿå¾ˆèˆ’æœï¼Œä¸»é¢˜ä¹Ÿå¾ˆå¤šï¼Œæ‰€ä»¥å°±æœæ–­æ¢äº†ä¸Šæ¥ï¼Œä¸“æ³¨å†™ä½œï¼Œä¸»é¢˜ç”¨çš„<a href="https://git.io/hugopapermod">papermod</a>ï¼Œè¿™æ˜¯å›½å¤–å¼€å‘è€…å¼€å‘çš„ï¼Œä¸­æ–‡èµ„æ–™å¤ªå°‘ï¼Œä¸è¿‡ï¼Œæœäº†å¥½å¤šå¤§ä½¬çš„æ–‡ç« ï¼ŒåŸºæœ¬ä¸Šè°ƒè¯•okï¼›è¿˜æ˜¯ç”¨githubåšä»“åº“æ¥æä¾›æœåŠ¡ï¼Œç”¨markdownæ¥å†™æ–‡ç« ï¼Œvs codeæ¥é…ç½®æ–‡ä»¶ï¼Œåœ¨<a href="https://www.freenom.com/">freenom</a>ä¸Šç™½å«–çš„ä¸€å¹´åŸŸåï¼Œç”¨è„šæœ¬è‡ªåŠ¨ç›‘æ§ï¼Œåˆ°æœŸæç¤ºï¼›ç”¨cfæ¥åšåŸŸåè§£æå’Œç¼“å­˜æœåŠ¡ã€‚</p>
<h2 id="-å¼ ä¸‰æ˜¯è°">ğŸ‘¨â€ğŸ’» å¼ ä¸‰æ˜¯è°</h2>
<p>å­¤ç‹¬æ—¶ä»£çš„èš‚èš</p>
<p>å…‹è±ç™»å¤§å­¦æ¯•ä¸š</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>docker ç”Ÿæˆè‡ªå·±çš„é•œåƒ</title>
      <link>https://blog.zsan.ml/posts/docker-generate-image/</link>
      <pubDate>Mon, 21 Jun 2021 23:26:34 +0000</pubDate>
      
      <guid>https://blog.zsan.ml/posts/docker-generate-image/</guid>
      <description>çœ‹è¿‡å‰é¢çš„æ–‡ç« çŸ¥é“ï¼Œå¤§ä½¬çš„åº“ä»“åº“ä¹Ÿé”äº†ï¼Œä¸èƒ½pullï¼Œåªèƒ½æ¢å–ä»“åº“åœ°å€æ‰è¡Œï¼Œä¸ºäº†ä¸€åŠ³</description>
      <content:encoded><![CDATA[<p>çœ‹è¿‡å‰é¢çš„æ–‡ç« çŸ¥é“ï¼Œå¤§ä½¬çš„åº“ä»“åº“ä¹Ÿé”äº†ï¼Œä¸èƒ½pullï¼Œåªèƒ½æ¢å–ä»“åº“åœ°å€æ‰è¡Œï¼Œä¸ºäº†ä¸€åŠ³æ°¸é€¸ï¼Œç´¢æ€§æ¢äº†è‡ªå·±çš„åº“ï¼Œåªè°ˆæŠ€æœ¯ï¼Œä¸è°ˆå…¶ä»–&hellip;</p>
<!-- more -->
<h3 id="1åˆ›å»ºdockerfileæ–‡ä»¶">1ã€åˆ›å»ºDockerfileæ–‡ä»¶</h3>
<p>æ¯”è¾ƒæ‡’ï¼Œç›´æ¥æŠŠå¤§ä½¬çš„Dockerfileæ‹‰æ¥æ¢äº†ä»“åº“åœ°å€ï¼Œrsaè®°ç€ä¹Ÿè¦æ¢</p>
<p>æ¢å®Œåœ¨å½“å‰ç›®å½• <code>docker build -t jd_scripts .</code></p>
<p>ç›´æ¥ç”Ÿæˆè‡ªå·±çš„image</p>
<p><code>docker images</code> æŸ¥çœ‹é•œåƒ</p>
<h3 id="2ä¿®æ”¹docker-composeæ–‡ä»¶">2ã€ä¿®æ”¹docker-composeæ–‡ä»¶</h3>
<p>ä¿®æ”¹docker-composeé‡Œé¢çš„ä»“åº“åœ°å€ä¸ºè‡ªå·±çš„åœ°å€ï¼Œå…¶ä»–å‚æ•°ä¸ç”¨å˜</p>
<p><code>docker-compose up -d</code> å¯åŠ¨é•œåƒ</p>
<p>å®Œç¾è¿è¡Œï¼</p>
<p>ç»§ç»­èººå¹³ã€‚</p>
<p>å»ºè®®å­¦å­¦dockerï¼ŒçœŸçš„å¥½å¼ºå¤§ï¼</p>
<p>é™„ä¸Šä¸€ä¸ªä¸é”™çš„dockeræ•™ç¨‹</p>
<p><a href="https://yeasy.gitbook.io/docker_practice/"><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAABk0lEQVRYR&#43;2W3UvCUByGX7fchQpZuvmRq1WEUElWEEPMDMz&#43;mf7Bym4qJCjJCCsUJeii8hOhAt3AWGBkkc6dpF2c3e685zzn&#43;f3O2Syd4l4HJn4sFJCwOtQgoUBQg9QgqQHSPO1BapDUAGm&#43;bw9mr3K4zN70rMEwDFyTToRCQUwH/LAwDClD37wuQK&#43;Xh91u&#43;5hIaSt4LlfRarUhij7EohvgOG5kkLoAt&#43;MypBnxE0JVFZxfXOMuX8TCvISIvAaGZUcCaQhQI9EgU0dpVGt17O7EwPMucwFqNIVCCafpDFbDiwivLJkPsFKpYf/wGIEpH&#43;JbsnkBJ5zjSCY2kbvN/zj1g6hnJbHv5gz3oLZw12AX8OX1DY1GcxBTz3uHwwZBcP&#43;a&#43;RNA05bY1IdEu7APUieoN5pIJqLwePihSqt3sKESa3DpswxK9w/muKi/f&#43;oen8pQVBVzkoiIvA4rZ9UrZOhxugx&#43;nZUdYyG4XQgtB&#43;H3Cf/7szD0dkcQoL/8pFKpQWqQ1ABpnvYgNUhqgDRPe5DU4DsPyz1QKJJZDwAAAABJRU5ErkJggg==" alt="img"  />
Docker â€”â€” ä»å…¥é—¨åˆ°å®è·µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>girde simpleä¿®æ”¹æ·»åŠ æ”¯æŒä¾§è¾¹æ ç›®å½•</title>
      <link>https://blog.zsan.ml/posts/girde-simple-support-for-sidebar-directory/</link>
      <pubDate>Sun, 06 Jun 2021 18:50:26 +0000</pubDate>
      
      <guid>https://blog.zsan.ml/posts/girde-simple-support-for-sidebar-directory/</guid>
      <description>ä¿®æ”¹ä¸»é¢˜æ–‡ä»¶æ”¯æŒä¾§è¾¹æ ç›®å½• simpleä¸»é¢˜æ•´ä½“è¿˜è¡Œï¼Œä½†æ–‡ç« æ— ä¾§è¾¹æ ç›®å½•ï¼Œä¸€èˆ¬å†™çš„æŠ€æœ¯</description>
      <content:encoded><![CDATA[<p>ä¿®æ”¹ä¸»é¢˜æ–‡ä»¶æ”¯æŒä¾§è¾¹æ ç›®å½•</p>
<!-- more -->
<p>simpleä¸»é¢˜æ•´ä½“è¿˜è¡Œï¼Œä½†æ–‡ç« æ— ä¾§è¾¹æ ç›®å½•ï¼Œä¸€èˆ¬å†™çš„æŠ€æœ¯æ€§æ–‡ç« å¾ˆé•¿ï¼Œå°±éœ€è¦ä¾§è¾¹æ ç›®å½•å’Œè¿™ä¸ªåŠŸèƒ½äº†ï¼Œåœ¨ç½‘ä¸Šæœäº†ä¸€ä¸‹èµ„æ–™ï¼Œå¯¹äºå‰ç«¯å°å­¦ç”Ÿçš„æˆ‘è´¹äº†å¥½é•¿æ—¶é—´æ‰æå®šï¼Œè®°å½•ä¸€ä¸‹è¿‡ç¨‹ã€‚</p>
<h3 id="1ä¿®æ”¹postejsæ–‡ä»¶">1ã€ä¿®æ”¹post.ejsæ–‡ä»¶</h3>
<p><code>head</code>æ–°å¢</p>
<p><code>&lt;script src=&quot;https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js&quot;&gt;&lt;/script&gt;</code></p>
<p>æœç´¢<code>&lt;%- post.content %&gt;</code>å¤åˆ¶ä¸€ä¸‹ä»£ç è¦†ç›–copy</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="font-weight:bold">div</span> <span style="color:#007f7f">class</span>=<span style="color:#0ff;font-weight:bold">&#34;post-content-wrapper&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">div</span> <span style="color:#007f7f">class</span>=<span style="color:#0ff;font-weight:bold">&#34;post-content&#34;</span> <span style="color:#007f7f">v-pre</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#f00">&lt;</span>%- post.content %&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">div</span> <span style="color:#007f7f">class</span>=<span style="color:#0ff;font-weight:bold">&#34;toc-container&#34;</span>&gt;
</span></span><span style="display:flex;"><span>   <span style="color:#f00">&lt;</span>%- post.toc %&gt;
</span></span><span style="display:flex;"><span> &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">div</span>&gt;
</span></span></code></pre></div><p>æ–°å¢é«˜äº®js</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>&lt;script&gt;
</span></span><span style="display:flex;"><span>      hljs.initHighlightingOnLoad()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">let</span> mainNavLinks = <span style="color:#fff;font-weight:bold">document</span>.querySelectorAll(<span style="color:#0ff;font-weight:bold">&#34;.markdownIt-TOC a&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">// This should probably be throttled.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>      <span style="color:#007f7f">// Especially because it triggers during smooth scrolling.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>      <span style="color:#007f7f">// https://lodash.com/docs/4.17.10#throttle
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>      <span style="color:#007f7f">// You could do like...
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>      <span style="color:#007f7f">// window.addEventListener(&#34;scroll&#34;, () =&gt; {
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>      <span style="color:#007f7f">//    _.throttle(doThatStuff, 100);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>      <span style="color:#007f7f">// });
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>      <span style="color:#007f7f">// Only not doing it here to keep this Pen dependency-free.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">window</span>.addEventListener(<span style="color:#0ff;font-weight:bold">&#34;scroll&#34;</span>, event =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> fromTop = <span style="color:#fff;font-weight:bold">window</span>.scrollY;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        mainNavLinks.forEach((link, index) =&gt; {
</span></span><span style="display:flex;"><span>          <span style="color:#fff;font-weight:bold">let</span> section = <span style="color:#fff;font-weight:bold">document</span>.getElementById(<span style="color:#fff;font-weight:bold">decodeURI</span>(link.hash).substring(<span style="color:#ff0;font-weight:bold">1</span>));
</span></span><span style="display:flex;"><span>          <span style="color:#fff;font-weight:bold">let</span> nextSection = <span style="color:#fff;font-weight:bold">null</span>
</span></span><span style="display:flex;"><span>          <span style="color:#fff;font-weight:bold">if</span> (mainNavLinks[index + <span style="color:#ff0;font-weight:bold">1</span>]) {
</span></span><span style="display:flex;"><span>            nextSection = <span style="color:#fff;font-weight:bold">document</span>.getElementById(<span style="color:#fff;font-weight:bold">decodeURI</span>(mainNavLinks[index + <span style="color:#ff0;font-weight:bold">1</span>].hash).substring(<span style="color:#ff0;font-weight:bold">1</span>));
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>          <span style="color:#fff;font-weight:bold">if</span> (section.offsetTop &lt;= fromTop) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (nextSection) {
</span></span><span style="display:flex;"><span>              <span style="color:#fff;font-weight:bold">if</span> (nextSection.offsetTop &gt; fromTop) {
</span></span><span style="display:flex;"><span>                link.classList.add(<span style="color:#0ff;font-weight:bold">&#34;current&#34;</span>);
</span></span><span style="display:flex;"><span>              } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                link.classList.remove(<span style="color:#0ff;font-weight:bold">&#34;current&#34;</span>);    
</span></span><span style="display:flex;"><span>              }
</span></span><span style="display:flex;"><span>            } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>              link.classList.add(<span style="color:#0ff;font-weight:bold">&#34;current&#34;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            link.classList.remove(<span style="color:#0ff;font-weight:bold">&#34;current&#34;</span>);
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f00">/script&gt;</span>
</span></span></code></pre></div><h3 id="2å®¢æˆ·ç«¯æ–°å¢è‡ªå®šä¹‰css">2ã€å®¢æˆ·ç«¯æ–°å¢è‡ªå®šä¹‰css</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.toc-container  .markdownIt-TOC {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">position</span>: <span style="color:#fff;font-weight:bold">sticky</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">top</span>: <span style="color:#ff0;font-weight:bold">32</span><span style="color:#fff;font-weight:bold">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">width</span>: <span style="color:#ff0;font-weight:bold">200</span><span style="color:#fff;font-weight:bold">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">font-size</span>: <span style="color:#ff0;font-weight:bold">12</span><span style="color:#fff;font-weight:bold">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">list-style</span>: <span style="color:#fff;font-weight:bold">none</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">padding-left</span>: <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">padding</span>: <span style="color:#ff0;font-weight:bold">16</span><span style="color:#fff;font-weight:bold">px</span> <span style="color:#ff0;font-weight:bold">8</span><span style="color:#fff;font-weight:bold">px</span>;
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span>.toc-container  .markdownIt-TOC:before {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">content</span>: <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">position</span>: <span style="color:#fff;font-weight:bold">absolute</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">top</span>: <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">left</span>: <span style="color:#ff0;font-weight:bold">8</span><span style="color:#fff;font-weight:bold">px</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">bottom</span>: <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">width</span>: <span style="color:#ff0;font-weight:bold">1</span><span style="color:#fff;font-weight:bold">px</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">background-color</span>: <span style="color:#ff0;font-weight:bold">#ebedef</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">opacity</span>: <span style="color:#ff0;font-weight:bold">.5</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>.toc-container  <span style="font-weight:bold">ul</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">list-style</span>: <span style="color:#fff;font-weight:bold">none</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>.toc-container  <span style="font-weight:bold">li</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">padding-left</span>: <span style="color:#ff0;font-weight:bold">16</span><span style="color:#fff;font-weight:bold">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.toc-container  <span style="font-weight:bold">li</span> <span style="font-weight:bold">a</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">color</span>: <span style="color:#ff0;font-weight:bold">#868e96</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">padding</span>: <span style="color:#ff0;font-weight:bold">4</span><span style="color:#fff;font-weight:bold">px</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">display</span>: <span style="color:#fff;font-weight:bold">block</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">transition</span>: <span style="color:#fff;font-weight:bold">all</span> <span style="color:#ff0;font-weight:bold">0.3</span><span style="color:#fff;font-weight:bold">s</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>.toc-container  <span style="font-weight:bold">li</span> <span style="font-weight:bold">a</span>:hover {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">background</span>: <span style="color:#ff0;font-weight:bold">#cddbef</span>;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>.toc-container  <span style="font-weight:bold">li</span> <span style="font-weight:bold">a</span>.current {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">color</span>: <span style="color:#ff0;font-weight:bold">#006CFF</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">background</span>: <span style="color:#ff0;font-weight:bold">#fafafa</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>.post-content-wrapper {
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">display</span>: <span style="color:#fff;font-weight:bold">flex</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.post-content {
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">width</span>: <span style="color:#ff0;font-weight:bold">100</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">margin-right</span>: <span style="color:#ff0;font-weight:bold">20</span><span style="color:#fff;font-weight:bold">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>@<span style="color:#fff;font-weight:bold">media</span> (<span style="font-weight:bold">max-width</span>: <span style="font-weight:bold">1150px</span>) {
</span></span><span style="display:flex;"><span>  .toc-container {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">display</span>: <span style="color:#fff;font-weight:bold">none</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="3ä¿®æ”¹maincssæ–‡ä»¶">3ã€ä¿®æ”¹main.cssæ–‡ä»¶</h3>
<p>æœç´¢<code>.post-detail</code> ä¿®æ”¹<code>margin: 0 auto;</code>ä¸º</p>
<p><code>margin: 0 20px;</code></p>
<p>é‡æ–°æ¸²æŸ“ç½‘é¡µå³å¯å°½æƒ…äº«ç”¨å§ï¼</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>äº‘æœåŠ¡å™¨dockeræ­å»ºè‡ªåŠ¨é¢†äº¬è±†botäº’åŠ¨æŒ‡ä»¤</title>
      <link>https://blog.zsan.ml/posts/docker-build-jdbot/</link>
      <pubDate>Fri, 30 Apr 2021 22:49:08 +0000</pubDate>
      
      <guid>https://blog.zsan.ml/posts/docker-build-jdbot/</guid>
      <description>ä½¿ç”¨dockeréƒ¨ç½²è‡ªåŠ¨é¢†é‡‘è±†botè„šæœ¬ ä½¿ç”¨çš„ç‰ˆæœ¬ï¼š æœåŠ¡å™¨ï¼šcentos 8 docke</description>
      <content:encoded><![CDATA[<p>ä½¿ç”¨dockeréƒ¨ç½²è‡ªåŠ¨é¢†é‡‘è±†botè„šæœ¬</p>
<!-- more -->
<p>ä½¿ç”¨çš„ç‰ˆæœ¬ï¼š</p>
<p>æœåŠ¡å™¨ï¼šcentos 8</p>
<p>dockerï¼š 20.10.6</p>
<p>docker-composeï¼š 1.27.4</p>
<h3 id="1æœåŠ¡å™¨å®‰è£…dockerdocker-compose">1ã€æœåŠ¡å™¨å®‰è£…dockerï¼Œdocker-compose</h3>
<p>æ¨èä½¿ç”¨centosæœåŠ¡å™¨å®‰è£…dockerã€docker-compose</p>
<p>Dockerå®‰è£…</p>
<ul>
<li>å›½å†…ä¸€é”®å®‰è£… <code>curl -sSL https://get.daocloud.io/docker | sh</code></li>
<li>å›½å¤–ä¸€é”®å®‰è£… <code>curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</code></li>
</ul>
<p>docker-composeå®‰è£…</p>
<p><code>$ sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</code></p>
<p>è¦å®‰è£…å…¶ä»–ç‰ˆæœ¬çš„ Composeï¼Œè¯·æ›¿æ¢ 1.24.1ã€‚</p>
<p>æœ€æ–°å‘è¡Œçš„ç‰ˆæœ¬åœ°å€ï¼šhttps://github.com/docker/compose/releasesã€‚</p>
<p>å°†å¯æ‰§è¡Œæƒé™åº”ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶ï¼š</p>
<p><code>$ sudo chmod +x /usr/local/bin/docker-compose</code></p>
<p>åˆ›å»ºè½¯é“¾ï¼š</p>
<p><code>$ sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose</code></p>
<p>é€šè¿‡<code>docker-compose version</code>æŸ¥çœ‹<code>docker-compose</code>ç‰ˆæœ¬ï¼Œç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p>
<h3 id="2å®‰è£…jd_scripts">2ã€å®‰è£…jd_scripts</h3>
<p>åˆ›å»ºä¸€ä¸ªç›®å½•<code>jd_scripts</code>ç”¨äºå­˜æ”¾å¤‡ä»½é…ç½®ç­‰æ•°æ®ï¼Œè¿ç§»é‡è£…çš„æ—¶å€™åªéœ€è¦å¤‡ä»½æ•´ä¸ªjd_scriptsç›®å½•å³å¯</p>
<p>éœ€è¦æ–°å»ºçš„ç›®å½•æ–‡ä»¶ç»“æ„å‚è€ƒå¦‚ä¸‹:</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>jd_scripts
</span></span><span style="display:flex;"><span>â”œâ”€â”€ logs
</span></span><span style="display:flex;"><span>â”‚Â Â  â”œâ”€â”€ XXXX.log
</span></span><span style="display:flex;"><span>â”‚Â Â  â””â”€â”€ XXXX.log
</span></span><span style="display:flex;"><span>â”œâ”€â”€ my_crontab_list.sh
</span></span><span style="display:flex;"><span>â””â”€â”€ docker-compose.yml
</span></span></code></pre></div><ul>
<li><code>jd_scripts/logs</code>å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹å°±è¡Œ</li>
<li><code>jd_scripts/docker-compose.yml</code> å‚è€ƒå†…å®¹å¦‚ä¸‹(è‡ªå·±åŠ¨æ‰‹èƒ½åŠ›ä¸è¡Œæä¸å®šè¯·ä½¿ç”¨é»˜è®¤é…ç½®)ï¼š</li>
</ul>
<p>æ ¹æ®æ–‡æ¡£ä¸€æ­¥ä¸€æ­¥ä¸‹å»å°±okäº†ï¼Œä¸‹é¢ä¸»è¦è®°å½•ä¸‹å¯èƒ½ç”¨åˆ°çš„å‘½ä»¤</p>
<p>ç›®å½•æ–‡ä»¶é…ç½®å¥½ä¹‹ååœ¨ <code>jd_scripts</code>ç›®å½•æ‰§è¡Œã€‚<br>
<code>docker-compose up -d</code> å¯åŠ¨ï¼ˆä¿®æ”¹docker-compose.ymlåéœ€è¦ä½¿ç”¨æ­¤å‘½ä»¤ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼‰ï¼›<br>
<code>docker-compose logs</code> æ‰“å°æ—¥å¿—ï¼›<br>
<code>docker-compose logs -f</code> æ‰“å°æ—¥å¿—ï¼Œ-fè¡¨ç¤ºè·Ÿéšæ—¥å¿—ï¼›
<code>docker logs -f jd_scripts</code> å’Œä¸Šé¢ä¸¤æ¡ç›¸æ¯”å¯ä»¥æ˜¾ç¤ºæ±‰å­—ï¼›
<code>docker-compose pull</code> æ›´æ–°é•œåƒï¼›<br>
<code>docker-compose stop</code> åœæ­¢å®¹å™¨ï¼›<br>
<code>docker-compose restart</code> é‡å¯å®¹å™¨ï¼›<br>
<code>docker-compose down</code> åœæ­¢å¹¶åˆ é™¤å®¹å™¨ï¼›</p>
<h3 id="3å¼€ä»£ç†æœºå™¨æ¿€æ´»tg-bot">3ã€å¼€ä»£ç†æœºå™¨ï¼Œæ¿€æ´»tg-bot</h3>
<p>è¿™é‡Œæ˜¯ä¸ªå¤§å‘ï¼Œæ‹¿ä¸ªå°æœ¬æœ¬è®°ä¸‹æ¥ï¼Œå…¶å®å°±æ˜¯dockerå†…ä»£ç†å®¿ä¸»æœºä»£ç†çš„é—®é¢˜</p>
<p>ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œå›½å†…çš„æœºå™¨ä¸èƒ½è®¿é—®tgï¼Œè€Œåˆæƒ³ä½¿ç”¨tg-botæ¥æ§åˆ¶ï¼Œæ— å¥ˆï¼Œå›½å¤–æœºå­å¤ªè´µï¼ˆç©·ï¼‰ï¼Œæœ€ä½ä¹Ÿè¦5ç¾åˆ€ï¼é‚ä¹°å›½å†…æœºå­å¼€ä»£ç†ä½¿ç”¨</p>
<h5 id="1ä¹°å›½å†…æœºå™¨æ¨èå¤§å‚çš„">1ã€ä¹°å›½å†…æœºå™¨ï¼Œæ¨èå¤§å‚çš„</h5>
<p>è¿™é‡Œåº”è¯¥æ”¾å„å¤§å‚çš„affçš„ï¼Œç•™ä¸ªå‘</p>
<h5 id="2å®‰è£…clash">2ã€å®‰è£…clash</h5>
<p>ä¸€ç›´åœ¨ä½¿ç”¨clashï¼Œç›´æ¥ç½‘ä¸Šæœç´¢clash<a href="https://github.com/Dreamacro/clash/releases">ä¸‹è½½</a>ï¼Œæ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬ä¸‹è½½ï¼Œåšä¸»ç”¨çš„æ˜¯centosï¼Œä¸‹è½½linux-amd64çš„</p>
<p>1ã€ä¸‹è½½clashï¼Œæœ€æ–°ç‰ˆæœ¬å¯å»å®˜ç½‘æ‰¾</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wget https://github.com/Dreamacro/clash/releases/download/v0.19.0/clash-linux-amd64-v0.19.0.gz
</span></span></code></pre></div><p>2ã€è§£å‹</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>gzip -d clash-linux-amd64-v0.19.0.gz
</span></span></code></pre></div><p>3ã€ç§»åŠ¨è‡³usr/bin/clashå¹¶é‡å‘½åä¸ºclash</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo mv clash-linux-amd64-v0.19.0 /usr/bin/clash
</span></span></code></pre></div><p>4ã€èµ‹äºˆclashè¿è¡Œæƒé™</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo chmod +x /usr/bin/clash
</span></span></code></pre></div><p>5ã€æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>clash -v 
</span></span></code></pre></div><h5 id="3åˆ›å»ºé…ç½®æ–‡ä»¶å®‰è£…æ§åˆ¶é¢æ¿">3ã€åˆ›å»ºé…ç½®æ–‡ä»¶ã€å®‰è£…æ§åˆ¶é¢æ¿</h5>
<p>1.åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>mkdir -p /etc/clash/
</span></span></code></pre></div><p>2.è¿›å…¥ç›®å½•</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> /etc/clash/
</span></span></code></pre></div><p>3.åˆ›å»ºé…ç½®æ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim config.yaml
</span></span></code></pre></div><p>4.æ‰‹åŠ¨ç¼–è¾‘å¾ˆéº»çƒ¦ï¼Œå¯ç”¨winscpä¸Šä¼ </p>
<p>é…ç½®å‚æ•°è‡ªè¡ŒæŸ¥æ‰¾</p>
<p>5.ä¸‹è½½å‰ç«¯ä»£ç </p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wget https://github.com/Dreamacro/clash-dashboard/tree/gh-pages
</span></span></code></pre></div><p>6.è§£å‹</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>unzip gh-pages.zip
</span></span></code></pre></div><p>7.ä¿®æ”¹ç›®å½•å,è¿™é‡Œçš„ç›®å½•åæ˜¯ä¸Šé¢é…ç½®æ–‡ä»¶é‡Œçš„ external-ui: dashboard</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>mv clash-dashboard-gh-pages dashboard
</span></span></code></pre></div><p><a href="http://clash.razord.top/">å¯ç”¨è¿™ä¸ªé¢æ¿è¿œç¨‹æ§åˆ¶</a></p>
<h5 id="4è®¾ç½®clashå¼€æœºå¯åŠ¨">4ã€è®¾ç½®clashå¼€æœºå¯åŠ¨</h5>
<p>1.åˆ›å»ºserviceæ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo vim /usr/lib/systemd/system/clash.service
</span></span></code></pre></div><p>2.è¾“å…¥ä¸‹é¢ä»£ç </p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>[Unit]
</span></span><span style="display:flex;"><span>Description=clash proxy
</span></span><span style="display:flex;"><span>After=network.target
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[Service]
</span></span><span style="display:flex;"><span>Type=simple
</span></span><span style="display:flex;"><span>ExecStart=/usr/bin/clash -d /etc/clash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[Install]
</span></span><span style="display:flex;"><span>WantedBy=multi-user.target
</span></span></code></pre></div><p>3.é‡æ–°åŠ è½½ systemd æ¨¡å—</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo systemctl daemon-reload
</span></span></code></pre></div><p>4.å¯åŠ¨Clash</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo systemctl start clash.service
</span></span></code></pre></div><p>5.è®¾ç½®Clashå¼€æœºè‡ªå¯åŠ¨</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo systemctl <span style="color:#fff;font-weight:bold">enable</span> clash.service
</span></span></code></pre></div><p>6.åˆ¤æ–­æ˜¯å¦æˆåŠŸå¼€å¯ä»£ç†</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>curl -I https://www.google.com
</span></span></code></pre></div><p>è¿”å›200å³è¡¨ç¤ºä»£ç†å·²ç»æˆåŠŸ</p>
<h5 id="5è‡ªåŠ¨æ›´æ–°è®¢é˜…é…ç½®æ–‡ä»¶">5ã€è‡ªåŠ¨æ›´æ–°è®¢é˜…é…ç½®æ–‡ä»¶</h5>
<blockquote>
<p>é€šè¿‡shellè„šæœ¬è‡ªåŠ¨æ›´æ–°Clashåœ¨çº¿é…ç½®</p>
</blockquote>
<p>é€šè¿‡systemctlæ¥ç®¡ç†Clashçš„è¿›ç¨‹ï¼Œå¯¹åº”<code>clash.service</code>æ–‡ä»¶ï¼Œé€šè¿‡ä¸¤ä¸ªè„šæœ¬<code>start-clash.sh</code>å’Œ<code>stop-clash.sh</code>æ¥ç®¡ç†Clashçš„å¯åœï¼š</p>
<p>æŠŠä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¿®æ”¹ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim /usr/lib/systemd/system/clash.service
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>[Unit]
</span></span><span style="display:flex;"><span>Description=clash proxy
</span></span><span style="display:flex;"><span>After=network.target
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[Service]
</span></span><span style="display:flex;"><span>WorkingDirectory=/å½“å‰ç”¨æˆ·ç›®å½•/.config/clash
</span></span><span style="display:flex;"><span>Type=simple
</span></span><span style="display:flex;"><span>ExecStart=/å½“å‰ç”¨æˆ·ç›®å½•/.config/clash/start-clash.sh
</span></span><span style="display:flex;"><span>ExecStop=/å½“å‰ç”¨æˆ·ç›®å½•/.config/clash/stop-clash.sh
</span></span><span style="display:flex;"><span>Environment=<span style="color:#0ff;font-weight:bold">&#34;HOME=/å½“å‰ç”¨æˆ·ç›®å½•&#34;</span>
</span></span><span style="display:flex;"><span>Environment=<span style="color:#0ff;font-weight:bold">&#34;CLASH_URL=ä½ çš„è®¢é˜…é“¾æ¥&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[Install]
</span></span><span style="display:flex;"><span>WantedBy=multi-user.target
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim /å½“å‰ç”¨æˆ·ç›®å½•/.config/clash/start-clash.sh
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold"></span><span style="color:#007f7f"># save this file to ${HOME}/.config/clash/start-clash.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># save pid file</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">echo</span> $$ &gt; <span style="color:#0ff;font-weight:bold">${</span>HOME<span style="color:#0ff;font-weight:bold">}</span>/.config/clash/clash.pid
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>diff <span style="color:#0ff;font-weight:bold">${</span>HOME<span style="color:#0ff;font-weight:bold">}</span>/.config/clash/config.yaml &lt;(curl -s <span style="color:#0ff;font-weight:bold">${</span>CLASH_URL<span style="color:#0ff;font-weight:bold">}</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span> [ <span style="color:#0ff;font-weight:bold">&#34;</span>$?<span style="color:#0ff;font-weight:bold">&#34;</span> == <span style="color:#ff0;font-weight:bold">0</span> ]
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>    /usr/bin/clash
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>    TIME=<span style="color:#0ff;font-weight:bold">`</span>date <span style="color:#0ff;font-weight:bold">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span style="color:#0ff;font-weight:bold">`</span>
</span></span><span style="display:flex;"><span>    cp <span style="color:#0ff;font-weight:bold">${</span>HOME<span style="color:#0ff;font-weight:bold">}</span>/.config/clash/config.yaml <span style="color:#0ff;font-weight:bold">&#34;</span><span style="color:#0ff;font-weight:bold">${</span>HOME<span style="color:#0ff;font-weight:bold">}</span><span style="color:#0ff;font-weight:bold">/.config/clash/config.yaml.bak</span><span style="color:#0ff;font-weight:bold">${</span>TIME<span style="color:#0ff;font-weight:bold">}</span><span style="color:#0ff;font-weight:bold">&#34;</span>
</span></span><span style="display:flex;"><span>    curl -L -o <span style="color:#0ff;font-weight:bold">${</span>HOME<span style="color:#0ff;font-weight:bold">}</span>/.config/clash/config.yaml <span style="color:#0ff;font-weight:bold">${</span>CLASH_URL<span style="color:#0ff;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    /usr/bin/clash
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">fi</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim /å½“å‰ç”¨æˆ·ç›®å½•/.config/clash/stop-clash.sh
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold"></span><span style="color:#007f7f"># save this file to ${HOME}/.config/clash/stop-clash.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># read pid file</span>
</span></span><span style="display:flex;"><span>PID=<span style="color:#0ff;font-weight:bold">`</span>cat <span style="color:#0ff;font-weight:bold">${</span>HOME<span style="color:#0ff;font-weight:bold">}</span>/.config/clash/clash.pid<span style="color:#0ff;font-weight:bold">`</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">kill</span> -9 <span style="color:#0ff;font-weight:bold">${</span>PID<span style="color:#0ff;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>rm <span style="color:#0ff;font-weight:bold">${</span>HOME<span style="color:#0ff;font-weight:bold">}</span>/.config/clash/clash.pid
</span></span></code></pre></div><p>é…ç½®æ·»åŠ å®Œæˆåï¼Œå¦‚æœä½ çš„clash æ­£åœ¨è¿è¡Œä¸­ï¼Œéœ€è¦é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶å¹¶é‡å¯</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ systemctl daemon-reload
</span></span><span style="display:flex;"><span>$ sudo systemctl restart clash.service
</span></span></code></pre></div><p>è¿™æ ·æ¯æ¬¡å¯åŠ¨clashæ—¶å°±ä¼šè‡ªåŠ¨æ›´æ–°é…ç½®æ–‡ä»¶äº†ï¼Œæ¥ä¸‹æ¥é€šè¿‡crontab è‡ªåŠ¨é‡å¯ clash.serviceå®ç°è‡ªåŠ¨æ›´æ–°èŠ‚ç‚¹</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#007f7f">#æ–°å»ºshellæ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>vim restart-clash.sh
</span></span></code></pre></div><p>æ–°å¢ä¸€æ¡å‘½ä»¤</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#007f7f">#/bin/sh</span>
</span></span><span style="display:flex;"><span>sudo systemctl restart clash.service
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod +x restart-clash.sh
</span></span><span style="display:flex;"><span>crontab -e
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#æ’å…¥ä¸‹é¢å‘½ä»¤</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#æ¯3å°æ—¶é‡å¯ä¸€æ¬¡</span>
</span></span><span style="display:flex;"><span><span style="color:#ff0;font-weight:bold">0</span> */3 * * * restart-clash.sh
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#æ¯åˆ†é’Ÿé‡å¯ä¸€æ¬¡</span>
</span></span><span style="display:flex;"><span>* * * * * restart-clash.sh
</span></span></code></pre></div><p>å¤§åŠŸå‘Šæˆï¼Œå¯é€šè¿‡<code>tail -500f /var/log/cron</code>æŸ¥çœ‹å®šæ—¶ä»»åŠ¡æ˜¯å¦æ‰§è¡Œ</p>
<p><code>sudo systemctl status clash.service</code>  æŸ¥çœ‹æ˜¯å¦é‡å¯æˆåŠŸ</p>
<h3 id="4dockerå†…å¼€ä»£ç†">4ã€dockerå†…å¼€ä»£ç†</h3>
<p>ç”±äºä¸»è¦ç”¨æ¥ä½¿ç”¨tg-botï¼Œæ•…åªæ£€æµ‹tgapiå³å¯</p>
<p>1ã€åˆ¤æ–­å®¿ä¸»æœºå¯è¿æ¥tgapi</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>curl -sX POST <span style="color:#0ff;font-weight:bold">&#34;https://api.telegram.org/bot&#39;&#39;&#39;Your Token&#39;&#39;&#39;/sendMessage&#34;</span> -d <span style="color:#0ff;font-weight:bold">&#34;chat_id=&#34;</span>Some Chat id<span style="color:#0ff;font-weight:bold">&#34;&amp;text=hello&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>curl -sX POST <span style="color:#0ff;font-weight:bold">&#34;https://api.telegram.org/botxxxxxxxxugt5A/sendMessage&#34;</span> -d <span style="color:#0ff;font-weight:bold">&#34;chat_id=48xxxxxx&amp;text=hello&#34;</span>
</span></span></code></pre></div><p>å¦‚æœè¿”å›æˆåŠŸï¼Œå³è¡¨ç¤ºæˆåŠŸ</p>
<p>2ã€è¿›å…¥å®¹å™¨</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker <span style="color:#fff;font-weight:bold">exec</span> -it jd_scripts /bin/sh
</span></span></code></pre></div><p>æ‰§è¡Œæ­¥éª¤1å‘½ä»¤ï¼Œå¦‚è‹¥å“åº”æ—¶é—´é•¿æˆ–å¤±è´¥ï¼Œåˆ™éœ€è¦é…ç½®ä»£ç†</p>
<p>3ã€é…ç½®å®¹å™¨ä»£ç†èµ°å®¿ä¸»æœº</p>
<p><a href="https://docs.docker.com/network/proxy/#use-environment-variables">dockerå®˜æ–¹æœ‰æ•™ç¨‹</a></p>
<p>dockerç‰ˆæœ¬å¤§äº 17.07ä»¥ä¸Šå¯ç”¨ä¸‹é¢çš„æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span>
</span></span><span style="display:flex;"><span>mkdir .docker
</span></span><span style="display:flex;"><span>vim  ~/.docker/config.json
</span></span></code></pre></div><p>å¡«å…¥ä¸‹é¢json</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span> <span style="font-weight:bold">&#34;proxies&#34;</span>:
</span></span><span style="display:flex;"><span> {
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&#34;default&#34;</span>:
</span></span><span style="display:flex;"><span>   {
</span></span><span style="display:flex;"><span>     <span style="font-weight:bold">&#34;httpProxy&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;http://172.17.0.1:7890&#34;</span>,
</span></span><span style="display:flex;"><span>     <span style="font-weight:bold">&#34;httpsProxy&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;http://172.17.0.1:7890&#34;</span>,
</span></span><span style="display:flex;"><span>     <span style="font-weight:bold">&#34;noProxy&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;localhost,127.0.0.1&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f00">&#34;</span>
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ä¿å­˜æ–‡ä»¶<strong>åˆ›å»ºæˆ–è€…å¯åŠ¨æ–°å®¹å™¨æ—¶æ‰ç”Ÿæ•ˆ</strong></p>
<p>è¿™é‡Œæœ‰ä¸ªå¤§å‘ï¼Œæäº†ä¸€å¤©ï¼Œå°±æ˜¯</p>
<p><strong>ä»£ç†çš„ipä¸€å®šè¦å†™å¯¹ï¼</strong></p>
<p><strong>ä»£ç†çš„ipä¸€å®šè¦å†™å¯¹ï¼</strong></p>
<p><strong>ä»£ç†çš„ipä¸€å®šè¦å†™å¯¹!</strong></p>
<blockquote>
<p>ä¸‹åˆè°ƒè¯•çš„æ—¶å€™httpsçš„å†™æˆäº†127çš„äº†ï¼Œæœºå™¨å¯åŠ¨èµ·æ¥ï¼Œpullä»£ç çš„æ—¶å€™ï¼Œç›´æ¥æ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œå½“æ—¶è¿˜éª‚è¿™ç ´ä»£ç†ï¼Œæ²¡æ³•ï¼Œå°±æŠŠæŠ¥é”™ipä¸èµ°ä»£ç†äº†ï¼Œæ²¡æƒ³åˆ°ä¸‹é¢ä¸æŠ¥é”™äº†ï¼Œç›´æ¥æ— é™é‡å¯ï¼Œæå¾—å¤´éƒ½å¤§äº†ï¼Œè¿˜åœ¨æƒ³æ˜¯ä¸æ˜¯å†…å­˜çˆ†äº†å‘¢ï¼æ™šä¸Šï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œå®šç›ä¸€çœ‹ï¼ŒWCï¼&ldquo;httpsProxy&quot;ç«¯å£å†™çš„127&hellip;èµ¶ç´§æ”¹äº†ï¼Œé‡æ–°è·‘éï¼Œå¦¥äº†ï¼ŒbotæˆåŠŸäº†ï¼</p>
</blockquote>
<p>4ã€åˆ é™¤å®¹å™¨ï¼Œé‡æ–°å¯ç”¨</p>
<p>æ¥ä¸‹æ¥åœ¨jd_scripts ç›®å½•å†…</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker-compose down
</span></span><span style="display:flex;"><span>docker-compose up -d
</span></span></code></pre></div><p>å¯åŠ¨æˆåŠŸåï¼Œtgbotå³å¯æ”¶åˆ°æˆåŠŸçš„æ¶ˆæ¯ï¼Œå°½æƒ…äº«ç”¨å§ï¼</p>
<h3 id="clashç›¸å…³çš„ç®¡ç†å‘½ä»¤">Clashç›¸å…³çš„ç®¡ç†å‘½ä»¤</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#007f7f">## å¯åŠ¨Clash ##</span>
</span></span><span style="display:flex;"><span>sudo systemctl start clash.service
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">## é‡å¯Clash ##</span>
</span></span><span style="display:flex;"><span>sudo systemctl restart clash.service
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">## æŸ¥çœ‹Clashè¿è¡ŒçŠ¶æ€ ##</span>
</span></span><span style="display:flex;"><span>sudo systemctl status clash.service
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">## å®æ—¶æ»šåŠ¨çŠ¶æ€ ##</span>
</span></span><span style="display:flex;"><span>sudo journalctl -u clash.service -f
</span></span></code></pre></div><h3 id="dockerç›¸å…³å‘½ä»¤">dockerç›¸å…³å‘½ä»¤</h3>
<p><code>docker exec -it jd_scripts /bin/sh -c 'git -C /scripts pull &amp;&amp; node /scripts/jd_bean_change.js'</code>  æ‰‹åŠ¨è¿è¡Œä¸€è„šæœ¬</p>
<p><code>docker exec -it jd_scripts /bin/sh -c 'env'</code>  æŸ¥çœ‹è®¾ç½®çš„ç¯å¢ƒå˜é‡</p>
<p><code>docker exec -it jd_scripts /bin/sh -c 'crontab -l'</code>  æŸ¥çœ‹å·²ç”Ÿæ•ˆçš„crontab_listå®šæ—¶å™¨ä»»åŠ¡</p>
<p><code>docker exec -it jd_scripts sh -c &quot;docker_entrypoint.sh&quot;</code> æ‰‹åŠ¨æ›´æ–°jd_scriptsä»“åº“æœ€æ–°è„šæœ¬</p>
<p><code>docker exec -it jd_scripts /bin/sh</code> ä»…è¿›å…¥å®¹å™¨å‘½ä»¤</p>
<p><code>rm -rf  logs/*.log</code> åˆ é™¤logsæ–‡ä»¶å¤¹é‡Œé¢æ‰€æœ‰çš„æ—¥å¿—æ–‡ä»¶</p>
<ul>
<li>[1] <a href="https://github.com/wisz2021/jd_docker">jd_docker</a></li>
<li>[2] <a href="https://github.com/yuanlam/Clash-Linux">clashå®‰è£…å‚è€ƒ</a></li>
<li>[3] <a href="https://kebingzao.com/2019/02/22/docker-container-proxy/">dockerå†…ä»£ç†å‚è€ƒ</a></li>
<li>[4] <a href="https://akillcool.github.io/post/clash-with-auto-update-config/">clashè‡ªåŠ¨æ›´æ–°è®¢é˜…é…ç½®</a></li>
</ul>
]]></content:encoded>
    </item>
    
    
    
  </channel>
</rss>
