<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Yongâ€™s ç½‘ç»œæ—¥å¿—</title>
    <link>https://blog.yongs.ml/</link>
    <description>Recent content on Yongâ€™s ç½‘ç»œæ—¥å¿—</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>&lt;a href=&#34;https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh&#34; target=&#34;_blank&#34;&gt;CC BY-NC-SA 4.0&lt;/a&gt;</copyright>
    <lastBuildDate>Sun, 06 Feb 2022 17:05:32 +0800</lastBuildDate><atom:link href="https://blog.yongs.ml/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>æ¯”ä»·åŠ©æ‰‹æœºå™¨äººdockerå¿«é€Ÿéƒ¨ç½²</title>
      <link>https://blog.yongs.ml/posts/comparison-robot-building-for-docker/</link>
      <pubDate>Sun, 06 Feb 2022 17:05:32 +0800</pubDate>
      
      <guid>https://blog.yongs.ml/posts/comparison-robot-building-for-docker/</guid>
      <description>å¯¹äºå•†å“æ¯”ä»·æ˜¯ä¸ªä¸é”™çš„è´­ä¹°å•†å“çš„æ–¹æ³•ï¼Œå¯ä»¥ç»™æˆ‘ä»¬æ˜¯å¦å€¼å¾—å…¥æ‰‹è¿™ä»¶å•†å“æä¾›å†³ç­–ã€‚å„å¤§å•†</description>
      <content:encoded><![CDATA[<blockquote>
<p>å¯¹äºå•†å“æ¯”ä»·æ˜¯ä¸ªä¸é”™çš„è´­ä¹°å•†å“çš„æ–¹æ³•ï¼Œå¯ä»¥ç»™æˆ‘ä»¬æ˜¯å¦å€¼å¾—å…¥æ‰‹è¿™ä»¶å•†å“æä¾›å†³ç­–ã€‚å„å¤§å•†åŸæœ‰è¿™æ–¹é¢æ•°æ®ä½†ä¸ä¼šå…è´¹ç»™åˆ†äº«å‡ºæ¥ï¼Œç¬¬ä¸‰æ–¹ç½‘ç«™æœ‰ç›¸å…³æœåŠ¡ï¼Œä½†ä½“éªŒä¸å¥½ï¼Œç›¸å…³apiä¹Ÿå¤ªè´µï¼Œè¿™æ¬¡æ‰¾åˆ°äº†å¤§ä½¬å…è´¹æä¾›çš„å¯¹è¯botçš„æ¯”ä»·åŠ©æ‰‹â€”â€”å‚»å¦åŠ©æ‰‹ï¼Œåº”è¯¥æ˜¯å†…ç½®æ¯”ä»·apiå§ï¼ç›®å‰æ¥è¯´æ•°æ®è¿˜å¯ä»¥å€¼å¾—å‚è€ƒçš„ï¼Œç”¨äº†dockeréƒ¨ç½²ï¼Œå¾ˆå¿«æå®šï¼</p>
</blockquote>
<h1 id="ä¸€éƒ¨ç½²å‚»å¦åŠ©æ‰‹bot">ä¸€ã€éƒ¨ç½²å‚»å¦åŠ©æ‰‹bot</h1>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/cdle/sillyGirl">GitHub - cdle/sillyGirl: å‚»å¦æœºå™¨äºº</a></p>
<h3 id="ä¸€é”®å®‰è£…æ”¯æŒlinux-arm64å’Œamd64ä½">ä¸€é”®å®‰è£…ï¼šæ”¯æŒlinux arm64å’Œamd64ä½</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#fff;font-weight:bold">cd</span> /opt
s=sillyGirl;a=arm64;<span style="color:#fff;font-weight:bold">if</span> [[ <span style="color:#fff;font-weight:bold">$(</span>uname -a | grep <span style="color:#0ff;font-weight:bold">&#34;x86_64&#34;</span><span style="color:#fff;font-weight:bold">)</span> != <span style="color:#0ff;font-weight:bold">&#34;&#34;</span> ]];<span style="color:#fff;font-weight:bold">then</span> a=amd64;<span style="color:#fff;font-weight:bold">fi</span> ;<span style="color:#fff;font-weight:bold">if</span> [ ! -d $s ];<span style="color:#fff;font-weight:bold">then</span> mkdir $s;<span style="color:#fff;font-weight:bold">fi</span> ;<span style="color:#fff;font-weight:bold">cd</span> $s;wget https://github.com/cdle/<span style="color:#0ff;font-weight:bold">${</span>s<span style="color:#0ff;font-weight:bold">}</span>/releases/download/main/<span style="color:#0ff;font-weight:bold">${</span>s<span style="color:#0ff;font-weight:bold">}</span>_linux_$a -O $s &amp;&amp; chmod <span style="color:#ff0;font-weight:bold">777</span> $s;pkill -9 $s;<span style="color:#fff;font-weight:bold">$(</span><span style="color:#fff;font-weight:bold">pwd</span><span style="color:#fff;font-weight:bold">)</span>/$s

</code></pre></div><p>åœ¨ç›®å½•/etc/sillyGirlä¸‹æ–°å»ºsets.confå¯ä»¥è¿›è¡Œåˆå§‹åŒ–é…ç½®</p>
<p>ä¸»è¦æ˜¯é…ç½®ç®¡ç†å‘˜è´¦å·ç­‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¯¹è¯é…ç½®</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">### ä¸€äº›åŸºç¡€è®¾ç½® ###
# å‚»å¦æœºå™¨äººå
set sillyGirl name å‚»å¦
# å‚»å¦httpæœåŠ¡ç«¯å£
set sillyGirl port 800


# å‚»å¦æ¶ˆæ¯æ’¤å›ç­‰å¾…æ—¶é—´ï¼Œå•ä½ç§’
set sillyGirl duration 5
# å‚»å¦è‡ªåŠ¨å‡çº§æ˜¯å¦é€šçŸ¥
set sillyGirl update_notify true
# æ˜¯å¦å¼€å¯å‚»å¦è‡ªåŠ¨æ›´æ–°
set sillyGirl auto_update false
# å‚»å¦å†…ç½®èµèµç 
set sillyGirl appreciate https://gitee.com/aiancandle/sillyGirl/raw/main/appreciate.jpg
#æ˜¯å¦å¯åŠ¨httpæœåŠ¡
set sillyGirl enable_http_server true
# å…³é—­å®ˆæŠ¤æ¨¡å¼ï¼Œå®ˆæŠ¤æ¨¡å¼ä¼šå¯¼è‡´æ²¡æ³•è‡ªåŠ¨å‡çº§
#systemctl disable sillyGirl

### å¯¹æ¥é’é¾™çš„è®¾ç½® ###
# è®¾ç½®é’é¾™openapiçš„client_idå‚æ•°
#set qinglong client_id ?
# è®¾ç½®é’é¾™openapiçš„client_secretå‚æ•°
#set qinglong client_secret ?
# é’é¾™æ˜¯å¦å¼€å¯è‡ªåŠ¨éšè—é‡å¤ä»»åŠ¡åŠŸèƒ½
#set qinglong autoCronHideDuplicate true
# è®¾ç½®é’é¾™é¢æ¿åœ°å€
#set qinglong host http://127.0.0.1:5700

### å¯¹æ¥QQçš„è®¾ç½® ###
# è®¾ç½®qqç™»å½•è´¦å·
#set qq uin ?
# è®¾ç½®qqç™»å½•å¯†ç 
#set qq password ?
# è®¾ç½®qqä¸´æ—¶æ¶ˆæ¯é»˜è®¤ç¾¤å·
#set qq tempMessageGroupCode ?
# æŒ‡å®šè¦ç›‘å¬çš„qqç¾¤
#set qq onGroups g1&amp;g2&amp;g3...
# è®¾ç½®æ˜¯å¦è‡ªåŠ¨åŒæ„å¥½å‹è¯·æ±‚
#set qq auto_friend false
# è®¾ç½®æ˜¯å¦å¯¹ç›‘å¬è‡ªèº«æ¶ˆæ¯
#set qq onself true
# è®¾ç½®qqç®¡ç†å‘˜
#set qq masters q1&amp;q2&amp;q3...
# è®¾ç½®æ¥å—é€šçŸ¥çš„qqè´¦å·
#set qq notifier q1&amp;q2&amp;q3...
# è®¾ç½®qqè®¾å¤‡ä¿¡æ¯(è‡ªåŠ¨ç”Ÿæˆ)
#set qq device.json ?
# è®¾ç½®qqç™»å½•ä»¤ç‰Œ(è‡ªåŠ¨ç”Ÿæˆ)
#set qq session.token ?
# æ³¨é”€qqbotå‘½ä»¤ï¼Œé‡æ–°è¿è¡Œæ‰«ç å³å¯
#delete qq session.token
# æŒ‡å®šç³»ç»Ÿé€šçŸ¥å‘é€å¯¹è±¡å‘½ä»¤ï¼Œå¦‚ä¸è®¾ç½®é»˜è®¤å‘é€ç»™æ‰€æœ‰ç®¡ç†å‘˜ã€‚
#set [im type] notifiers [accounts join by &#39;&amp;&#39;] 

### å¯¹æ¥telegramçš„è®¾ç½® ###
# è®¾ç½®telegramæœºå™¨äººtoken
#set tg token ?
# è®¾ç½®telegramæœºå™¨äººä»£ç†
#set tg http_proxy ?
# è®¾ç½®telegramæœºå™¨äººç®¡ç†å‘˜
#set tg masters t1&amp;t2&amp;t3...
# è®¾ç½®æ¥å—é€šçŸ¥çš„telegramè´¦å·
#set tg notifier t1&amp;t2&amp;t3...

### å¯¹æ¥å¾®ä¿¡å…¬ä¼—å·çš„è®¾ç½® ###
# è®¾ç½®å¾®ä¿¡å…¬ä¼—å¹³å°app_id
#set wxmp app_id ?
# è®¾ç½®å¾®ä¿¡å…¬ä¼—å¹³å°app_secret
#set wxmp app_secret ?
# è®¾ç½®å¾®ä¿¡å…¬ä¼—å¹³å°token
#set wxmp token ?
# è®¾ç½®å¾®ä¿¡å…¬ä¼—å¹³å°encoding_aes_key
#set wxmp encoding_aes_key ?
# è®¾ç½®å¾®ä¿¡å…¬ä¼—å¹³å°ç®¡ç†å‘˜
#set wxmp masters w1&amp;w2&amp;w3...
# è®¾ç½®å…¬ä¼—å·å…³æ³¨äº‹ä»¶å›å¤
#set wxmp subscribe_reply æ„Ÿè°¢å…³æ³¨ï¼
# è®¾ç½®å…¬ä¼—å·é»˜è®¤å›å¤
#set wxmp default_reply æ— æ³•å›å¤è¯¥æ¶ˆæ¯

### å¯¹æ¥å¾®ä¿¡å·çš„è®¾ç½® ###
# å‚»å¦å†…ç½®å¾®ä¿¡æ’ä»¶ï¼Œä¾èµ–äºå¯çˆ±çŒ«å’Œhttp-sdk
# å‚»å¦è¿œç¨‹å¤„ç†æ¥å£ /wx/receive
# è®¾ç½®æ’ä»¶è°ƒç”¨åœ°å€ï¼Œç¡®ä¿å‚»å¦å¯ä»¥è®¿é—®å¯çˆ±çŒ«ç«¯å£
#set wx api_url ?
# è®¾ç½®å›¾ç‰‡è½¬å‘æ¨¡å¼ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°æ­¤å›¾ç‰‡æ¥è‡ªxxæœªç»å…è®¸ä¸å¾—ä½¿ç”¨çš„æç¤º
set wx relay_mode true
# è®¾ç½®æŒ‡å®šè½¬å‘åœ°å€ï¼Œæ ¼å¼ä¸º https://åŸŸå/relay?url=%sï¼Œä¸çŸ¥é“ä¸ç”¨å¡«
#set wx relaier ?
# è®¾ç½®# å‚»å¦æ˜¯å¦åŠ¨æ€ç½‘ç»œåœ°å€ï¼Œé€‚ç”¨äº# å‚»å¦å®¶åº­å®½å¸¦è€Œå¯çˆ±çŒ«åœ¨äº‘æœåŠ¡å™¨çš„æƒ…å†µä¸‹
#set wx sillyGirl_dynamic_ip true
# è®¾ç½®å¯çˆ±çŒ«æ˜¯å¦åŠ¨æ€ç½‘ç»œåœ°å€ï¼Œé€‚ç”¨äºå¯çˆ±çŒ«å®¶åº­å®½å¸¦è€Œ# å‚»å¦åœ¨äº‘æœåŠ¡å™¨çš„æƒ…å†µä¸‹
#set wx keaimao_dynamic_ip true
# è®¾ç½®å¯çˆ±çŒ«ç«¯å£
#set wx keaimao_port ?
# è®¾ç½®å¾®ä¿¡ç®¡ç†å‘˜
#set wx masters ?
# vlwçš„APIè°ƒç”¨åœ°å€
#set wx vlw_addr http://ip:port
# vlwçš„token
#set wx vlw_token ?

### å¯¹æ¥pushplusçš„è®¾ç½® ###
# ç®¡ç†å‘˜æ¨é€ç»‘å®špushplusæŒ‡ä»¤
#set sillyGirl pushplus [token]

# å…³é”®è¯æ’¤å›åŠŸèƒ½ï¼Œå…³é”®è¯æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‚
#set sillyGirl recall å…³é”®è¯1&amp;å…³é”®è¯2...
# å…³é”®è¯å›å¤åŠŸèƒ½ï¼Œç¬¬ä¸€ä¸ªé—®å·æ˜¯æ”¯æŒæ­£åˆ™çš„å…³é”®è¯ï¼Œç¬¬äºŒä¸ªé—®å·æ˜¯å›å¤çš„å†…å®¹ã€‚
#set reply ? ?

### å¯¹æ¥èŠå£«çš„è®¾ç½® ###
# èµ„äº§æ¨é€å®šæ—¶ï¼Œä»¥ä¹ç‚¹ä¸ºä¾‹ï¼ŒåŒ…æ‹¬å¤±æ•ˆæé†’ã€‚
set jd_cookie asset_push 0 9 * * *

# è®¾ç½®é˜¿ä¸œç™»å½•åœ°å€ï¼Œä¾‹ï¼šset jd_cookie adong_addr 192.168.1.1:5702
#set jd_cookie adong_addr é˜¿ä¸œip:ç«¯å£
# è®¾ç½®é˜¿ä¸œqqæœºå™¨äººè´¦å·ï¼Œè¿™é‡Œçš„æœºå™¨äººqqè´¦å·ï¼Œè¯·åŠ¡å¿…å’Œé˜¿ä¸œgo-cqhttpé…ç½®ä¸­config.ymlé‡Œqqä¸€æ ·ã€‚
#set jd_cookie selfQid æœºå™¨äººqqè´¦å·
# è®¾ç½®ç™»å½•å‘ä½
#set jd_cookie login_num ?

#è®¾ç½®è¯ºå…°ç™»é™†åœ°å€
#set jd_cookie nolan_addr http://è¯ºå…°ip:ç«¯å£

# å¯¹æ¥xddï¼Œé¢å¤–è®¾ç½®å‚æ•°
#set jd_cookie xdd_token ?

### å¯¹æ¥å°çˆ±åŒå­¦çš„è®¾ç½® ###
# å°çˆ±åŒå­¦ï¼Œå¯ä»¥æŒ‡å®šAPIï¼Œå¯¹å°çˆ±è¯´å¯¹è¯æ¨¡å¼å³å¯å¼€å¯è¿ç»­å¯¹è¯æ¨¡å¼ï¼Œé—­å˜´å¯å…³é—­ã€‚
#set sillyGirl å°çˆ±åŒå­¦ http://81.70.100.130/api/xiaoai.php?msg=%s&amp;n=text #æŒ‚äº†å°±è‡ªå·±æ¢
#set sillyGirl å°çˆ±åŒå­¦ http://jiuli.xiaoapi.cn/i/xiaoai_tts.php?msg=%s #æŒ‚äº†å°±è‡ªå·±æ¢
# å¤„ç†jsonæ ¼å¼æ•°æ®çš„å°çˆ±apiï¼Œä¸å¡«è·å–æ•´ä¸ªæ–‡æœ¬
#set sillyGirl å°çˆ±åŒå­¦gjson text
# åˆ é™¤å¤„ç†jsonæ ¼å¼æ•°æ®çš„å°çˆ±api
#silly delete å°çˆ±åŒå­¦gjson
# ä½¿ç”¨æ–¹æ³•ï¼š
#1ã€å”¤èµ·å°çˆ±ï¼šå‘é€â€œå°çˆ±+æƒ³è¯´çš„è¯â€ï¼Œä¾‹å¦‚ï¼šå°çˆ±ä»Šå¤©å¤©æ°”ã€‚
#2ã€å¯¹è¯æ¨¡å¼ï¼šå‘é€â€œå°çˆ±å¯¹è¯æ¨¡å¼â€å¼€å¯ï¼Œå‘é€â€œé—­å˜´â€ç»“æŸã€‚
#3ã€æˆè¯­æ¥é¾™ï¼šå‘é€â€œæˆè¯­æ¥é¾™â€å¼€å§‹ã€‚è¿™ä¸ªå¯åº”è¯¥ä¸æ˜¯å°çˆ±åŒå­¦çš„åŠŸèƒ½ï¼Œä½†æˆ‘æ‡’å¾—å•ç‹¬å†™å®ƒäº†ã€‚

### å¯¹æ¥çŸ­ç½‘å€çš„è®¾ç½® ###
# è®¾ç½®çŸ­ç½‘å€æœåŠ¡åœ°å€ï¼Œå¡«å‚»å¦å¯¹å¤–çš„å¯ä»¥è®¿é—®çš„åœ°å€ã€‚
#set dwz address ?
# è®¾ç½®çŸ­ç½‘å€æœåŠ¡å‰ç¼€
#set dwz prefix d
# ä½¿ç”¨æ–¹æ³•
#å‘é€â€œçŸ­ç½‘å€+ä½ æƒ³è¦è½¬æ¢çš„ç½‘å€â€œ #ä¾‹ï¼šçŸ­ç½‘å€ http://kejiwanjia.com/
</code></pre></div><h3 id="å¯åŠ¨å‘½ä»¤">å¯åŠ¨å‘½ä»¤</h3>
<p>é…ç½®å®Œæˆåï¼Œåœ¨/opt/sillyGirlä¸‹æ‰§è¡Œ ./sillyGirl -t æŸ¥çœ‹æ˜¯å¦è¿è¡ŒæˆåŠŸ</p>
<p>è¾“å…¥  time</p>
<p>æˆåŠŸå æ‰§è¡Œ ./sillyGirl -d åå°è¿è¡Œ</p>
<h3 id="å…¶ä»–å¸¸ç”¨å‘½ä»¤">å…¶ä»–å¸¸ç”¨å‘½ä»¤</h3>
<p>æ€æ‰è¿›ç¨‹</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ps -A|grep sillyGirl
<span style="color:#fff;font-weight:bold">kill</span> pid 
</code></pre></div><p>æŸ¥çœ‹ç«¯å£æ˜¯å¦å¼€å¯</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">netstat -tlan
</code></pre></div><h1 id="äºŒéƒ¨ç½²node-onebot">äºŒã€éƒ¨ç½²node-onebot</h1>
<blockquote>
<p>å‚»å¦å¼€å‘è€…æŠŠå†…ç½®qqç™»å½•ç»™å»æ‰äº†ï¼Œéœ€è¦è‡ªå·±å¯¹æ¥qqbot</p>
<p>å®˜æ–¹ç»™çš„æ˜¯nodeå®‰è£…çš„ï¼Œéœ€è¦å®‰è£…nodeç¯å¢ƒï¼Œå¤ªéº»çƒ¦ï¼Œæ”¹ä¸ºç”¨dockerå®‰è£…</p>
</blockquote>
<h3 id="1æ‹‰å–ä»£ç ">1ã€æ‹‰å–ä»£ç </h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">//å›½å¤–æœº
git clone https://github.com/takayama-lily/node-onebot

//å›½å†…æœº

git clone https://ghproxy.861443216.workers.dev/https://github.com/takayama-lily/node-onebot
æœº
</code></pre></div><h3 id="2ä¿®æ”¹dockerfileæ–‡ä»¶">2ã€ä¿®æ”¹Dockerfileæ–‡ä»¶</h3>
<p>ä¿®æ”¹é»˜è®¤Dockerfileé‡Œé¢æœ€åä¸€è¡Œçš„QQå·æˆè‡ªå·±çš„botè´¦å·</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">FROM node:14-alpine
WORKDIR /app
COPY . .
CMD [&#34;node&#34;, &#34;main&#34;,&#34;è¿™é‡Œæ”¹ä¸ºè‡ªå·±çš„botè´¦å·&#34;]
</code></pre></div><h3 id="3åˆ›å»ºconfigjsæ–‡ä»¶">3ã€åˆ›å»ºconfig.jsæ–‡ä»¶</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cp config.sample.js config.js
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0ff;font-weight:bold">&#34;use strict&#34;</span>;
<span style="color:#007f7f">// å°†æ­¤æ–‡ä»¶æ›´åä¸ºconfig.jsæ‰èƒ½ç”Ÿæ•ˆå“¦
</span><span style="color:#007f7f"></span>
module.exports = {

    <span style="color:#007f7f">//é€šç”¨é…ç½®
</span><span style="color:#007f7f"></span>    general: {
        platform:           <span style="color:#ff0;font-weight:bold">5</span>,      <span style="color:#007f7f">//1:å®‰å“æ‰‹æœº 2:aPad 3:å®‰å“æ‰‹è¡¨ 4:MacOS 5:iPad
</span><span style="color:#007f7f"></span>        debug:              <span style="color:#fff;font-weight:bold">false</span>,  <span style="color:#007f7f">//å¼€å¯debug
</span><span style="color:#007f7f"></span>        use_cqhttp_notice:  <span style="color:#fff;font-weight:bold">true</span>,   <span style="color:#007f7f">//æ˜¯å¦ä½¿ç”¨cqhttpæ ‡å‡†çš„noticeäº‹ä»¶æ ¼å¼
</span><span style="color:#007f7f"></span>
        host:               <span style="color:#0ff;font-weight:bold">&#34;localhost&#34;</span>,  <span style="color:#007f7f">//ç›‘å¬ä¸»æœºå
</span><span style="color:#007f7f"></span>        port:               <span style="color:#ff0;font-weight:bold">5700</span>,       <span style="color:#007f7f">//ç«¯å£
</span><span style="color:#007f7f"></span>        use_http:           <span style="color:#fff;font-weight:bold">false</span>,      <span style="color:#007f7f">//å¯ç”¨http
</span><span style="color:#007f7f"></span>        use_ws:             <span style="color:#fff;font-weight:bold">false</span>,      <span style="color:#007f7f">//å¯ç”¨æ­£å‘wsï¼Œå’Œhttpä½¿ç”¨ç›¸åŒåœ°å€å’Œç«¯å£
</span><span style="color:#007f7f"></span>        access_token:       <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,         <span style="color:#007f7f">//è®¿é—®apiçš„token
</span><span style="color:#007f7f"></span>        secret:             <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,         <span style="color:#007f7f">//ä¸ŠæŠ¥æ•°æ®çš„sha1ç­¾åå¯†é’¥
</span><span style="color:#007f7f"></span>        post_timeout:       <span style="color:#ff0;font-weight:bold">30</span>,         <span style="color:#007f7f">//postè¶…æ—¶æ—¶é—´(ç§’)
</span><span style="color:#007f7f"></span>        post_message_format:<span style="color:#0ff;font-weight:bold">&#34;array&#34;</span>,    <span style="color:#007f7f">//&#34;string&#34;æˆ–&#34;array&#34;
</span><span style="color:#007f7f"></span>        enable_cors:        <span style="color:#fff;font-weight:bold">false</span>,      <span style="color:#007f7f">//æ˜¯å¦å…è®¸è·¨åŸŸè¯·æ±‚
</span><span style="color:#007f7f"></span>        enable_heartbeat:   <span style="color:#fff;font-weight:bold">false</span>,      <span style="color:#007f7f">//æ˜¯å¦å¯ç”¨wså¿ƒè·³
</span><span style="color:#007f7f"></span>        heartbeat_interval: <span style="color:#ff0;font-weight:bold">15000</span>,      <span style="color:#007f7f">//wså¿ƒè·³é—´éš”(æ¯«ç§’)
</span><span style="color:#007f7f"></span>        rate_limit_interval:<span style="color:#ff0;font-weight:bold">500</span>,        <span style="color:#007f7f">//ä½¿ç”¨_rate_limitedåç¼€é™é€Ÿè°ƒç”¨apiçš„æ’é˜Ÿé—´éš”æ—¶é—´(æ¯«ç§’)
</span><span style="color:#007f7f"></span>        event_filter:       <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,         <span style="color:#007f7f">//jsonæ ¼å¼çš„äº‹ä»¶è¿‡æ»¤å™¨æ–‡ä»¶è·¯å¾„
</span><span style="color:#007f7f"></span>        post_url: [ <span style="color:#007f7f">//ä¸ŠæŠ¥åœ°å€ï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªurl
</span><span style="color:#007f7f"></span>            <span style="color:#007f7f">// &#34;http://your.address.com:80&#34;,
</span><span style="color:#007f7f"></span>        ],
        ws_reverse_url: [ <span style="color:#007f7f">//åå‘wsåœ°å€ï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªurl
</span><span style="color:#007f7f"></span>            <span style="color:#0ff;font-weight:bold">&#34;ws://127.0.0.1:8080/qq/receive&#34;</span>,
            <span style="color:#007f7f">//è¿™æ˜¯å‚»å¦çš„åå‘é“¾æ¥åœ°å€ï¼Œå…¶ä¸­çš„8080ç«¯å£è®°å¾—æ”¹æˆä½ å‚»å¦çš„ç«¯å£ï¼ŒåŒæ—¶å¼€å¯å‚»å¦çš„å‚»å¦çš„http serverï¼Œå³set sillyGirl enable_http_server true
</span><span style="color:#007f7f"></span>        ],
        ws_reverse_reconnect_interval: <span style="color:#ff0;font-weight:bold">3000</span>, <span style="color:#007f7f">//åå‘wsæ–­çº¿é‡è¿é—´éš”(æ¯«ç§’)ï¼Œè®¾ä¸ºè´Ÿæ•°ç›´æ¥ä¸é‡è¿
</span><span style="color:#007f7f"></span>        ws_reverse_reconnect_on_code_1000: <span style="color:#fff;font-weight:bold">true</span>, <span style="color:#007f7f">//åå‘wsæ˜¯å¦åœ¨å…³é—­çŠ¶æ€ç ä¸º1000çš„æ—¶å€™é‡è¿
</span><span style="color:#007f7f"></span>    },

    <span style="color:#007f7f">//æ¯ä¸ªè´¦å·çš„å•ç‹¬é…ç½®(ç”¨äºè¦†ç›–é€šç”¨é…ç½®)
</span><span style="color:#007f7f"></span>    <span style="color:#ff0;font-weight:bold">147258369</span>: {

    },
};

<span style="color:#007f7f">// å®‰å…¨æ³¨æ„ï¼š
</span><span style="color:#007f7f">// ç›‘å¬0.0.0.0è¡¨ç¤ºç›‘å¬ç½‘å¡ä¸Šçš„æ‰€æœ‰åœ°å€ã€‚å¦‚æœä½ çš„æœºå™¨å¯ä»¥é€šè¿‡å…¬ç½‘ipç›´æ¥è®¿é—®ï¼ŒåŒæ—¶ä½ ä¹Ÿæ²¡æœ‰è®¾å®šaccess_tokenï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯æä¸å®‰å…¨çš„ã€‚
</span><span style="color:#007f7f">// ä½ åº”è¯¥çŸ¥é“è¿™æ ·åšä¼šå¯¼è‡´ä»¥ä¸‹åæœï¼šä»»ä½•äººéƒ½å¯ä»¥æ— é™åˆ¶åœ°è®¿é—®ä½ çš„Botçš„æ‰€æœ‰APIæ¥å£ã€‚
</span><span style="color:#007f7f">// å¦‚æœåªéœ€è¦åœ¨æœ¬åœ°è®¿é—®ï¼Œå»ºè®®å°†ç›‘å¬åœ°å€æ”¹ä¸ºlocalhostã€‚éœ€è¦é€šè¿‡å…¬ç½‘è®¿é—®ï¼Œä½ æœ€å¥½è®¾å®šaccess_tokenã€‚
</span></code></pre></div><h3 id="4ç¼–è¯‘docker-image">4ã€ç¼–è¯‘docker image</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker build -t yongs/node-onebot:latest .
</code></pre></div><p>yongsè‡ªå®šä¹‰çš„ï¼Œéšä¾¿èµ·ï¼Œä¸€å®šä¸è¦å¿˜äº† æœ€ååˆä¸ª<u> . </u>è¡¨ç¤ºåœ¨å½“å‰ç›®å½•æ–‡ä»¶ç¼–è¯‘</p>
<h3 id="5å¯åŠ¨image">5ã€å¯åŠ¨image</h3>
<p>ç”¨çš„æ˜¯docker-composeå¯åŠ¨çš„ï¼Œåˆšæ‰æ‹‰çš„ä»£ç å·²ç»æœ‰yamlæ–‡ä»¶äº†ï¼Œ</p>
<p>éœ€è¦æ³¨æ„ imageåå­—æ˜¯åˆšæ‰ç¼–è¯‘çš„åå­—ï¼Œä¸çŸ¥é“å¯ä»¥ç”¨</p>
<p>docker images æŸ¥çœ‹ï¼Œä¿®æ”¹imageåå­—å³å¯</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="font-weight:bold">version</span>: <span style="color:#0ff;font-weight:bold">&#34;3&#34;</span>
<span style="font-weight:bold">services</span>:
  <span style="font-weight:bold">miraiok</span>:
    <span style="font-weight:bold">image</span>: yongs/node-onebot
    <span style="font-weight:bold">restart</span>: always
    <span style="font-weight:bold">network_mode</span>: <span style="color:#0ff;font-weight:bold">&#34;host&#34;</span>
    <span style="font-weight:bold">volumes</span>:
      - ./config.js:/root/config.js
      - ./data:/root/data
    <span style="font-weight:bold">stdin_open</span>: <span style="color:#fff;font-weight:bold">true</span>
    <span style="font-weight:bold">tty</span>: <span style="color:#fff;font-weight:bold">true</span>
    <span style="font-weight:bold">container_name</span>: docker-onebot
</code></pre></div><h3 id="6æŸ¥çœ‹æ—¥å¿—æ‰«ç ç™»å½•ä¸èƒ½ç™»å½•è¿›å…¥å®¹å™¨å†…æ‰«ç ">6ã€æŸ¥çœ‹æ—¥å¿—ï¼Œæ‰«ç ç™»å½•ï¼Œä¸èƒ½ç™»å½•è¿›å…¥å®¹å™¨å†…æ‰«ç </h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#007f7f">#æŸ¥çœ‹æ—¥å¿—</span>
docker logs -f docker-onebot
<span style="color:#007f7f">#è¿›å…¥å®¹å™¨</span>
docker <span style="color:#fff;font-weight:bold">exec</span> -it docker-onebot /bin/sh
<span style="color:#007f7f">#æ‰§è¡Œç™»å½•</span>
node main <span style="color:#0ff;font-weight:bold">&#34;botqqå·&#34;</span>
</code></pre></div><p>ç»™å°åŠ©æ‰‹å‘é€å‘½ä»¤çœ‹æ˜¯å¦æˆåŠŸï¼Œæ¯”å¦‚ å‘é€ name</p>
<p>å‘é€ æ·˜å®äº¬è±†æ‹¼å¤šå¤šé“¾æ¥çœ‹æ˜¯å¦å›å¤ï¼Œå›å¤å³éƒ¨ç½²æˆåŠŸã€‚</p>
<p>ç™»å½•æˆåŠŸåï¼Œé‡å¯dockerå³å¯</p>
<p>è¿™é‡Œçš„å‘å°±æ˜¯å‚»å¦å¯åŠ¨å¤±è´¥ï¼Œå¯¼è‡´onebotè¿æ¥ä¸ä¸Šå‚»å¦ã€‚</p>
<blockquote>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p>1ã€<a href="https://www.kejiwanjia.com/jiaocheng/zheteng/19778.html#node-onebotqqbot">ç¾¤æ™–å‚»å¦SillyGirlå®Œæ•´éƒ¨ç½²æ•™ç¨‹ 12.13æ›´æ–°node-onebot - ç§‘æŠ€ç©å®¶</a></p>
<p>2ã€<a href="https://www.kejiwanjia.com/jiaocheng/51905.html">Dockerç¼–è¯‘node-onebotï¼Œå‚»å¦åˆæ´»äº† - ç§‘æŠ€ç©å®¶</a></p>
<p>3ã€<a href="https://github.com/AboutCXJ/SillyGirlDockerDeploy">GitHub - AboutCXJ/SillyGirlDockerDeploy</a></p>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>Hugo è‡ªåŠ¨æ›´æ–°æ–‡ç« ä¿®æ”¹æ—¶é—´</title>
      <link>https://blog.yongs.ml/posts/hugo-auto-update-lastmod/</link>
      <pubDate>Sat, 22 Jan 2022 21:34:31 +0800</pubDate>
      
      <guid>https://blog.yongs.ml/posts/hugo-auto-update-lastmod/</guid>
      <description>configé…ç½®æ–‡ä»¶é‡ŒåŠ ä¸Šå¦‚ä¸‹å‚æ•°ï¼š frontmatter: lastmod: - lastmod - :git - :fileModTime - :default ä¾æ¬¡å–çš„é¡ºåºä¸ºï¼š lastmod :æœ€åæäº¤</description>
      <content:encoded><![CDATA[<p>configé…ç½®æ–‡ä»¶é‡ŒåŠ ä¸Šå¦‚ä¸‹å‚æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="font-weight:bold">frontmatter</span>:
    <span style="font-weight:bold">lastmod</span>:
        - lastmod
        - :git
        - :fileModTime
        - :default
</code></pre></div><p>ä¾æ¬¡å–çš„é¡ºåºä¸ºï¼š</p>
<blockquote>
<p>lastmod :æœ€åæäº¤æ—¶é—´</p>
<p>:git: æ ¹æ®gitæäº¤ç‰ˆæœ¬æ—¶é—´</p>
<p>:fileModTimeï¼šæ–‡ä»¶ä¿®æ”¹æ—¶é—´</p>
</blockquote>
<p><a href="https://gohugo.io/getting-started/configuration/#configure-front-matter">Configure Hugo | Hugo</a> å†™çš„éƒ½æœ‰,butæ˜¯è‹±æ–‡çš„ğŸ™ƒ</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Docker Composeéƒ¨ç½²filebrowser</title>
      <link>https://blog.yongs.ml/posts/docker-deploy-filebrowser/</link>
      <pubDate>Fri, 21 Jan 2022 11:24:05 +0800</pubDate>
      
      <guid>https://blog.yongs.ml/posts/docker-deploy-filebrowser/</guid>
      <description>dockerå¿«é€Ÿæ­å»ºä¸ªäººç½‘ç›˜</description>
      <content:encoded><![CDATA[<p>åœ¨linuxserveræœåŠ¡å™¨ä¸Šå®‰è£…</p>
<p>ç¯å¢ƒï¼šdockerã€docker- compose</p>
<p>éœ€è¦äº†è§£dockeråŸºæœ¬çŸ¥è¯†ï¼Œä¸æ‡‚å¯ä»¥ç¿»ç¿»ä»¥å‰çš„åšå®¢æˆ–è€…æœä¸‹æ•™ç¨‹å­¦ä¹ </p>
<p><a href="https://filebrowser.org/installation">filebrowser</a>å®˜ç½‘ä¸Šç»™çš„æ˜¯dockerå‘½ä»¤æ‰§è¡Œçš„ï¼Œä½†ç”¨composeä¹ æƒ¯äº†ï¼Œæ‰€ä»¥è½¬æ¢äº†ä¸€ä¸‹æ ¼å¼ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸ªå‘ï¼Œå®˜ç½‘ä¹Ÿæç¤ºäº†</p>
<blockquote>
<p>By default, we already have a <a href="https://github.com/filebrowser/filebrowser/blob/master/docker/root/defaults/settings.json">configuration file with some defaults</a> so you can just mount the root and the database. Although you can overwrite by mounting a directory with a new config file. If you don&rsquo;t already have a database file, make sure to create a new empty file under the path you specified. Otherwise, Docker will create an empty folder instead of an empty file, resulting in an error when mounting the database into the container.</p>
</blockquote>
<p>ç¿»è¯‘è¿‡æ¥å°±æ˜¯éœ€è¦æå‰åˆ›å»ºæ‰€éœ€çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œå¦åˆ™ï¼ŒDockerä¼šåˆ›å»ºä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹è€Œä¸æ˜¯ç©ºçš„æ–‡ä»¶ï¼Œå¯¼è‡´åœ¨å°†æ•°æ®åº“æŒ‚è½½åˆ°å®¹å™¨ä¸­æ—¶å‡ºç°é”™è¯¯ï¼è¿™ç‚¹ä¸€å®šè¦æ³¨æ„å•Šï¼ï¼ï¼</p>
<h1 id="1åˆ›å»ºdocker-composeæ–‡ä»¶">1ã€åˆ›å»ºdocker-composeæ–‡ä»¶</h1>
<p>å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="font-weight:bold">version</span>: <span style="color:#0ff;font-weight:bold">&#39;3.3&#39;</span> 
<span style="font-weight:bold">services</span>:     
    <span style="font-weight:bold">filebrowser</span>:  
        <span style="font-weight:bold">image</span>: filebrowser/filebrowser:s6
        <span style="font-weight:bold">container_name</span>: filebrowser
        <span style="font-weight:bold">volumes</span>:  
            - ./root:/srv           
            - ./database/filebrowser.db:/database/filebrowser.db 
            - ./settings.json:/config/settings.json
        <span style="font-weight:bold">environment</span>:
            - PUID=0
            - PGID=0
        <span style="font-weight:bold">ports</span>: 
            - <span style="color:#0ff;font-weight:bold">&#39;8080:80&#39;</span>         
        <span style="font-weight:bold">restart</span>: always
</code></pre></div><h1 id="2åˆ›å»ºé»˜è®¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹">2ã€åˆ›å»ºé»˜è®¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</h1>
<p>å¯¹ç…§ä¸Šè¿°docker-composeçš„è·¯å¾„ï¼Œéœ€è¦åœ¨å½“å‰ç›®å½•åˆ›å»º settings.json æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="font-weight:bold">&#34;port&#34;</span>: <span style="color:#ff0;font-weight:bold">80</span>,
  <span style="font-weight:bold">&#34;baseURL&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,
  <span style="font-weight:bold">&#34;address&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;0.0.0.0&#34;</span>,
  <span style="font-weight:bold">&#34;log&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;stdout&#34;</span>,
  <span style="font-weight:bold">&#34;database&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;/database/filebrowser.db&#34;</span>,
  <span style="font-weight:bold">&#34;root&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;/srv&#34;</span>
}
</code></pre></div><p>åœ¨å½“å‰ç›®å½•åˆ›å»º database/filebrowser.db æ–‡ä»¶å¤¹å’Œæ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkdir database
<span style="color:#fff;font-weight:bold">cd</span> database
touch filebrowser.db
</code></pre></div><h1 id="3è¿è¡Œæµ‹è¯•æ˜¯å¦æˆåŠŸ">3ã€è¿è¡Œæµ‹è¯•æ˜¯å¦æˆåŠŸ</h1>
<p>æ‰§è¡Œ docker- compose logs -f çœ‹ä¸‹æ—¥å¿—æ˜¯å¦æŠ¥é”™</p>
<p>éœ€è¦å…¶ä»–æœºå™¨è®¿é—®è®°å¾—é˜²ç«å¢™ æŠŠç«¯å£æ‰“å¼€ï¼Œæœ¬ä¾‹ç”¨çš„8080ç«¯å£</p>
<p>æµè§ˆå™¨è®¿é—® æœåŠ¡å™¨ip:8080 æˆåŠŸæ‰“å¼€å³å¯ï¼ŒEnjoy itï¼ğŸ‰ğŸ‰ğŸ‰</p>
<blockquote>
<p>å‚è€ƒï¼š</p>
<p>1ã€<a href="https://filebrowser.org">filebrowserå®˜ç½‘</a></p>
<p>2ã€<a href="https://www.liuhaolin.com/zhuanzai/906.html">filebrowser ä¸€ä¸ªè·¨å¹³å°çš„æ–‡ä»¶ç®¡ç†å™¨çš„ä½¿ç”¨æ–¹æ³•-æ£®æ—çš„ä¸ªäººåšå®¢</a></p>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>About</title>
      <link>https://blog.yongs.ml/about/</link>
      <pubDate>Thu, 13 Jan 2022 20:56:38 +0800</pubDate>
      
      <guid>https://blog.yongs.ml/about/</guid>
      <description>æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤ ğŸ  å…³äºæœ¬ç«™ è¿™é‡Œä¸»è¦è®°å½•ä¸€äº›å¹³å¸¸é‡åˆ°çš„ä¸€äº›æŠ€æœ¯å‘ï¼Œ</description>
      <content:encoded><![CDATA[<blockquote>
<p>æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤</p>
</blockquote>
<h2 id="-å…³äºæœ¬ç«™">ğŸ  å…³äºæœ¬ç«™</h2>
<p>è¿™é‡Œä¸»è¦è®°å½•ä¸€äº›å¹³å¸¸é‡åˆ°çš„ä¸€äº›æŠ€æœ¯å‘ï¼Œæ–¹ä¾¿ä»¥åå¯ä»¥æŸ¥é˜…ğŸ˜„</p>
<p>æœ¬ç«™æœ€å¼€å§‹æ˜¯2019å¹´å°±æ­å»ºäº†ï¼Œå½“æ—¶ç”¨çš„hexoæ„å»ºï¼Œéƒ¨ç½²åœ¨githubï¼Œç”¨netlifyç¼“å­˜æœåŠ¡ï¼Œæ— å¥ˆå½“æ—¶ç©·ï¼Œç”¨çš„è¿˜æ˜¯Windowsæœ¬ï¼Œç”¨å‘½ä»¤å¤ªä¸çˆ½äº†ï¼Œå¯¼è‡´å†™æ–‡ç« æ²¡ä»€ä¹ˆæ¿€æƒ…ï¼ŒåŸºæœ¬æ–­æ›´ğŸ¤£</p>
<p>æ¥åˆ°2021å¹´ï¼Œç»å¸¸åœ¨ç½‘ä¸Šçœ‹å¤§ä½¬ä»¬çš„blogï¼Œæ—¶é—´æœ‰ç‚¹ç©ºï¼Œå°±æƒ³æŠŠblogç»™æ‹¾èµ·æ¥ï¼Œæ¥è§¦çš„æŠ€æœ¯ä¹Ÿå¤šäº†ï¼Œä¹Ÿæƒ³è®°å½•ä¸‹ä¸€äº›ç¬”è®°ï¼Œæ–¹ä¾¿åé¢éšæ—¶ç¿»é˜…ï¼Œæ­£å¥½åœ¨æ¨ä¸Šçœ‹åˆ°å¤§ä½¬ä»¬æ¨è<a href="https://github.com/getgridea/gridea">gridea: âœï¸ A static blog writing client (ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯)</a></p>
<p>å‚»ç“œå¼æ“ä½œï¼Œæ ¹æ®ç•Œé¢æç¤ºè®¾ç½®å°±è¡Œäº†ï¼Œä¸“æ³¨äºå†™ä½œï¼Œå½“æ—¶å°±ä¸‹ä¸‹æ¥ç”¨äº†ä¸€æ®µæ—¶é—´ï¼Œä¹Ÿæœ‰æ¯”è¾ƒé¸¡è‚‹çš„åœ°æ–¹ï¼Œæ¯”å¦‚ä¸»é¢˜å¤ªå°‘ï¼Œè‡ªå®šä¹‰ç©ºé—´å¤ªå°ï¼Œè¿˜æœ‰å°±æ˜¯windows7ä¸Šä¸å¤ªç¨³å®šï¼Œæœ‰æ—¶ä¼šå¡ï¼Œå¯èƒ½æˆ‘ç”µè„‘åƒåœ¾å§ï¼Œä¸»é¢˜å¤ªå°‘ï¼Œæœ‰çš„ä¸»é¢˜ä¸æ”¯æŒä¾§è¾¹ç›®å½•æ ï¼Œå½“æ—¶æœäº†å¥½å¤šæ–‡ç« ï¼Œæ‰æ”¹äº†ä¸€ä¸‹ä¸»é¢˜ï¼Œå…·ä½“çœ‹<a href="../posts/girde-simple-support-for-sidebar-directory/">è¿™ç¯‡</a>ï¼Œè¿˜æœ‰å°±æ˜¯ï¼Œä½œè€…å¥½ä¹…ä¸æ›´æ–°äº†ï¼Œä¸“æ³¨äºæwebç«¯äº†ï¼Œæ‰€ä»¥å°±åœ¨æ¢äº†Macåå°±æ¢äº†åˆ°hugoä¸Š</p>
<p><a href="https://gohugo.io/">hugo</a>ç”¨goå¼€å‘çš„ï¼Œæ®è¯´ç”Ÿæˆæ–‡ç« éå¸¸å¿«ï¼Œç›¸æ¯”hexoæ¥è¯´ï¼Œhugoåœ¨Macä¸Šç”¨å‘½ä»¤ä¹Ÿå¾ˆèˆ’æœï¼Œä¸»é¢˜ä¹Ÿå¾ˆå¤šï¼Œæ‰€ä»¥å°±æœæ–­æ¢äº†ä¸Šæ¥ï¼Œä¸“æ³¨å†™ä½œï¼Œä¸»é¢˜ç”¨çš„<a href="https://git.io/hugopapermod">papermod</a>ï¼Œè¿™æ˜¯å›½å¤–å¼€å‘è€…å¼€å‘çš„ï¼Œä¸­æ–‡èµ„æ–™å¤ªå°‘ï¼Œä¸è¿‡ï¼Œæœäº†å¥½å¤šå¤§ä½¬çš„æ–‡ç« ï¼ŒåŸºæœ¬ä¸Šè°ƒè¯•okï¼›è¿˜æ˜¯ç”¨githubåšä»“åº“æ¥æä¾›æœåŠ¡ï¼Œç”¨markdownæ¥å†™æ–‡ç« ï¼Œvs codeæ¥é…ç½®æ–‡ä»¶ï¼Œåœ¨<a href="https://www.freenom.com/">freenom</a>ä¸Šç™½å«–çš„ä¸€å¹´åŸŸåï¼Œç”¨è„šæœ¬è‡ªåŠ¨ç›‘æ§ï¼Œåˆ°æœŸæç¤ºï¼›ç”¨cfæ¥åšåŸŸåè§£æå’Œç¼“å­˜æœåŠ¡ã€‚</p>
<h2 id="-åšä¸»æ˜¯è°">ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°</h2>
<p>åŒ†åŒ†çš„èš‚èš</p>
<p>å…‹è±ç™»å¤§å­¦æ¯•ä¸š</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>docker ç”Ÿæˆè‡ªå·±çš„é•œåƒ</title>
      <link>https://blog.yongs.ml/posts/docker-generate-image/</link>
      <pubDate>Mon, 21 Jun 2021 23:26:34 +0000</pubDate>
      
      <guid>https://blog.yongs.ml/posts/docker-generate-image/</guid>
      <description>çœ‹è¿‡å‰é¢çš„æ–‡ç« çŸ¥é“ï¼Œå¤§ä½¬çš„åº“ä»“åº“ä¹Ÿé”äº†ï¼Œä¸èƒ½pullï¼Œåªèƒ½æ¢å–ä»“åº“åœ°å€æ‰è¡Œï¼Œä¸ºäº†ä¸€åŠ³</description>
      <content:encoded><![CDATA[<p>çœ‹è¿‡å‰é¢çš„æ–‡ç« çŸ¥é“ï¼Œå¤§ä½¬çš„åº“ä»“åº“ä¹Ÿé”äº†ï¼Œä¸èƒ½pullï¼Œåªèƒ½æ¢å–ä»“åº“åœ°å€æ‰è¡Œï¼Œä¸ºäº†ä¸€åŠ³æ°¸é€¸ï¼Œç´¢æ€§æ¢äº†è‡ªå·±çš„åº“ï¼Œåªè°ˆæŠ€æœ¯ï¼Œä¸è°ˆå…¶ä»–&hellip;</p>
<!-- more -->
<h3 id="1åˆ›å»ºdockerfileæ–‡ä»¶">1ã€åˆ›å»ºDockerfileæ–‡ä»¶</h3>
<p>æ¯”è¾ƒæ‡’ï¼Œç›´æ¥æŠŠå¤§ä½¬çš„Dockerfileæ‹‰æ¥æ¢äº†ä»“åº“åœ°å€ï¼Œrsaè®°ç€ä¹Ÿè¦æ¢</p>
<p>æ¢å®Œåœ¨å½“å‰ç›®å½• <code>docker build -t jd_scripts .</code></p>
<p>ç›´æ¥ç”Ÿæˆè‡ªå·±çš„image</p>
<p><code>docker images</code> æŸ¥çœ‹é•œåƒ</p>
<h3 id="2ä¿®æ”¹docker-composeæ–‡ä»¶">2ã€ä¿®æ”¹docker-composeæ–‡ä»¶</h3>
<p>ä¿®æ”¹docker-composeé‡Œé¢çš„ä»“åº“åœ°å€ä¸ºè‡ªå·±çš„åœ°å€ï¼Œå…¶ä»–å‚æ•°ä¸ç”¨å˜</p>
<p><code>docker-compose up -d</code> å¯åŠ¨é•œåƒ</p>
<p>å®Œç¾è¿è¡Œï¼</p>
<p>ç»§ç»­èººå¹³ã€‚</p>
<p>å»ºè®®å­¦å­¦dockerï¼ŒçœŸçš„å¥½å¼ºå¤§ï¼</p>
<p>é™„ä¸Šä¸€ä¸ªä¸é”™çš„dockeræ•™ç¨‹</p>
<p><a href="https://yeasy.gitbook.io/docker_practice/"><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAABk0lEQVRYR&#43;2W3UvCUByGX7fchQpZuvmRq1WEUElWEEPMDMz&#43;mf7Bym4qJCjJCCsUJeii8hOhAt3AWGBkkc6dpF2c3e685zzn&#43;f3O2Syd4l4HJn4sFJCwOtQgoUBQg9QgqQHSPO1BapDUAGm&#43;bw9mr3K4zN70rMEwDFyTToRCQUwH/LAwDClD37wuQK&#43;Xh91u&#43;5hIaSt4LlfRarUhij7EohvgOG5kkLoAt&#43;MypBnxE0JVFZxfXOMuX8TCvISIvAaGZUcCaQhQI9EgU0dpVGt17O7EwPMucwFqNIVCCafpDFbDiwivLJkPsFKpYf/wGIEpH&#43;JbsnkBJ5zjSCY2kbvN/zj1g6hnJbHv5gz3oLZw12AX8OX1DY1GcxBTz3uHwwZBcP&#43;a&#43;RNA05bY1IdEu7APUieoN5pIJqLwePihSqt3sKESa3DpswxK9w/muKi/f&#43;oen8pQVBVzkoiIvA4rZ9UrZOhxugx&#43;nZUdYyG4XQgtB&#43;H3Cf/7szD0dkcQoL/8pFKpQWqQ1ABpnvYgNUhqgDRPe5DU4DsPyz1QKJJZDwAAAABJRU5ErkJggg==" alt="img"  />
Docker â€”â€” ä»å…¥é—¨åˆ°å®è·µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>girde simpleä¿®æ”¹æ·»åŠ æ”¯æŒä¾§è¾¹æ ç›®å½•</title>
      <link>https://blog.yongs.ml/posts/girde-simple-support-for-sidebar-directory/</link>
      <pubDate>Sun, 06 Jun 2021 18:50:26 +0000</pubDate>
      
      <guid>https://blog.yongs.ml/posts/girde-simple-support-for-sidebar-directory/</guid>
      <description>ä¿®æ”¹ä¸»é¢˜æ–‡ä»¶æ”¯æŒä¾§è¾¹æ ç›®å½• simpleä¸»é¢˜æ•´ä½“è¿˜è¡Œï¼Œä½†æ–‡ç« æ— ä¾§è¾¹æ ç›®å½•ï¼Œä¸€èˆ¬å†™çš„æŠ€æœ¯</description>
      <content:encoded><![CDATA[<p>ä¿®æ”¹ä¸»é¢˜æ–‡ä»¶æ”¯æŒä¾§è¾¹æ ç›®å½•</p>
<!-- more -->
<p>simpleä¸»é¢˜æ•´ä½“è¿˜è¡Œï¼Œä½†æ–‡ç« æ— ä¾§è¾¹æ ç›®å½•ï¼Œä¸€èˆ¬å†™çš„æŠ€æœ¯æ€§æ–‡ç« å¾ˆé•¿ï¼Œå°±éœ€è¦ä¾§è¾¹æ ç›®å½•å’Œè¿™ä¸ªåŠŸèƒ½äº†ï¼Œåœ¨ç½‘ä¸Šæœäº†ä¸€ä¸‹èµ„æ–™ï¼Œå¯¹äºå‰ç«¯å°å­¦ç”Ÿçš„æˆ‘è´¹äº†å¥½é•¿æ—¶é—´æ‰æå®šï¼Œè®°å½•ä¸€ä¸‹è¿‡ç¨‹ã€‚</p>
<h3 id="1ä¿®æ”¹postejsæ–‡ä»¶">1ã€ä¿®æ”¹post.ejsæ–‡ä»¶</h3>
<p><code>head</code>æ–°å¢</p>
<p><code>&lt;script src=&quot;https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js&quot;&gt;&lt;/script&gt;</code></p>
<p>æœç´¢<code>&lt;%- post.content %&gt;</code>å¤åˆ¶ä¸€ä¸‹ä»£ç è¦†ç›–copy</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="font-weight:bold">div</span> <span style="color:#007f7f">class</span>=<span style="color:#0ff;font-weight:bold">&#34;post-content-wrapper&#34;</span>&gt;
  &lt;<span style="font-weight:bold">div</span> <span style="color:#007f7f">class</span>=<span style="color:#0ff;font-weight:bold">&#34;post-content&#34;</span> <span style="color:#007f7f">v-pre</span>&gt;
    <span style="color:#f00">&lt;</span>%- post.content %&gt;
  &lt;/<span style="font-weight:bold">div</span>&gt;
  &lt;<span style="font-weight:bold">div</span> <span style="color:#007f7f">class</span>=<span style="color:#0ff;font-weight:bold">&#34;toc-container&#34;</span>&gt;
   <span style="color:#f00">&lt;</span>%- post.toc %&gt;
 &lt;/<span style="font-weight:bold">div</span>&gt;
&lt;/<span style="font-weight:bold">div</span>&gt;
</code></pre></div><p>æ–°å¢é«˜äº®js</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">&lt;script&gt;
      hljs.initHighlightingOnLoad()

      <span style="color:#fff;font-weight:bold">let</span> mainNavLinks = <span style="color:#fff;font-weight:bold">document</span>.querySelectorAll(<span style="color:#0ff;font-weight:bold">&#34;.markdownIt-TOC a&#34;</span>);

      <span style="color:#007f7f">// This should probably be throttled.
</span><span style="color:#007f7f"></span>      <span style="color:#007f7f">// Especially because it triggers during smooth scrolling.
</span><span style="color:#007f7f"></span>      <span style="color:#007f7f">// https://lodash.com/docs/4.17.10#throttle
</span><span style="color:#007f7f"></span>      <span style="color:#007f7f">// You could do like...
</span><span style="color:#007f7f"></span>      <span style="color:#007f7f">// window.addEventListener(&#34;scroll&#34;, () =&gt; {
</span><span style="color:#007f7f"></span>      <span style="color:#007f7f">//    _.throttle(doThatStuff, 100);
</span><span style="color:#007f7f"></span>      <span style="color:#007f7f">// });
</span><span style="color:#007f7f"></span>      <span style="color:#007f7f">// Only not doing it here to keep this Pen dependency-free.
</span><span style="color:#007f7f"></span>
      <span style="color:#fff;font-weight:bold">window</span>.addEventListener(<span style="color:#0ff;font-weight:bold">&#34;scroll&#34;</span>, event =&gt; {
        <span style="color:#fff;font-weight:bold">let</span> fromTop = <span style="color:#fff;font-weight:bold">window</span>.scrollY;

        mainNavLinks.forEach((link, index) =&gt; {
          <span style="color:#fff;font-weight:bold">let</span> section = <span style="color:#fff;font-weight:bold">document</span>.getElementById(<span style="color:#fff;font-weight:bold">decodeURI</span>(link.hash).substring(<span style="color:#ff0;font-weight:bold">1</span>));
          <span style="color:#fff;font-weight:bold">let</span> nextSection = <span style="color:#fff;font-weight:bold">null</span>
          <span style="color:#fff;font-weight:bold">if</span> (mainNavLinks[index + <span style="color:#ff0;font-weight:bold">1</span>]) {
            nextSection = <span style="color:#fff;font-weight:bold">document</span>.getElementById(<span style="color:#fff;font-weight:bold">decodeURI</span>(mainNavLinks[index + <span style="color:#ff0;font-weight:bold">1</span>].hash).substring(<span style="color:#ff0;font-weight:bold">1</span>));
          }
          <span style="color:#fff;font-weight:bold">if</span> (section.offsetTop &lt;= fromTop) {
            <span style="color:#fff;font-weight:bold">if</span> (nextSection) {
              <span style="color:#fff;font-weight:bold">if</span> (nextSection.offsetTop &gt; fromTop) {
                link.classList.add(<span style="color:#0ff;font-weight:bold">&#34;current&#34;</span>);
              } <span style="color:#fff;font-weight:bold">else</span> {
                link.classList.remove(<span style="color:#0ff;font-weight:bold">&#34;current&#34;</span>);    
              }
            } <span style="color:#fff;font-weight:bold">else</span> {
              link.classList.add(<span style="color:#0ff;font-weight:bold">&#34;current&#34;</span>);
            }
          } <span style="color:#fff;font-weight:bold">else</span> {
            link.classList.remove(<span style="color:#0ff;font-weight:bold">&#34;current&#34;</span>);
          }
        });
      });

    &lt;<span style="color:#f00">/script&gt;</span>
</code></pre></div><h3 id="2å®¢æˆ·ç«¯æ–°å¢è‡ªå®šä¹‰css">2ã€å®¢æˆ·ç«¯æ–°å¢è‡ªå®šä¹‰css</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css">.toc-container  .markdownIt-TOC {
    <span style="color:#fff;font-weight:bold">position</span>: <span style="color:#fff;font-weight:bold">sticky</span>;
    <span style="color:#fff;font-weight:bold">top</span>: <span style="color:#ff0;font-weight:bold">32</span><span style="color:#fff;font-weight:bold">px</span>;
    <span style="color:#fff;font-weight:bold">width</span>: <span style="color:#ff0;font-weight:bold">200</span><span style="color:#fff;font-weight:bold">px</span>;
    <span style="color:#fff;font-weight:bold">font-size</span>: <span style="color:#ff0;font-weight:bold">12</span><span style="color:#fff;font-weight:bold">px</span>;
    <span style="color:#fff;font-weight:bold">list-style</span>: <span style="color:#fff;font-weight:bold">none</span>;
    <span style="color:#fff;font-weight:bold">padding-left</span>: <span style="color:#ff0;font-weight:bold">0</span>;
    <span style="color:#fff;font-weight:bold">padding</span>: <span style="color:#ff0;font-weight:bold">16</span><span style="color:#fff;font-weight:bold">px</span> <span style="color:#ff0;font-weight:bold">8</span><span style="color:#fff;font-weight:bold">px</span>;
 }
.toc-container  .markdownIt-TOC:before {
      <span style="color:#fff;font-weight:bold">content</span>: <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>;
      <span style="color:#fff;font-weight:bold">position</span>: <span style="color:#fff;font-weight:bold">absolute</span>;
      <span style="color:#fff;font-weight:bold">top</span>: <span style="color:#ff0;font-weight:bold">0</span>;
      <span style="color:#fff;font-weight:bold">left</span>: <span style="color:#ff0;font-weight:bold">8</span><span style="color:#fff;font-weight:bold">px</span>;
      <span style="color:#fff;font-weight:bold">bottom</span>: <span style="color:#ff0;font-weight:bold">0</span>;
      <span style="color:#fff;font-weight:bold">width</span>: <span style="color:#ff0;font-weight:bold">1</span><span style="color:#fff;font-weight:bold">px</span>;
      <span style="color:#fff;font-weight:bold">background-color</span>: <span style="color:#ff0;font-weight:bold">#ebedef</span>;
      <span style="color:#fff;font-weight:bold">opacity</span>: <span style="color:#ff0;font-weight:bold">.5</span>;
  }
.toc-container  <span style="font-weight:bold">ul</span> {
    <span style="color:#fff;font-weight:bold">list-style</span>: <span style="color:#fff;font-weight:bold">none</span>;
  }
.toc-container  <span style="font-weight:bold">li</span> {
    <span style="color:#fff;font-weight:bold">padding-left</span>: <span style="color:#ff0;font-weight:bold">16</span><span style="color:#fff;font-weight:bold">px</span>;
}
.toc-container  <span style="font-weight:bold">li</span> <span style="font-weight:bold">a</span> {
      <span style="color:#fff;font-weight:bold">color</span>: <span style="color:#ff0;font-weight:bold">#868e96</span>;
      <span style="color:#fff;font-weight:bold">padding</span>: <span style="color:#ff0;font-weight:bold">4</span><span style="color:#fff;font-weight:bold">px</span>;
      <span style="color:#fff;font-weight:bold">display</span>: <span style="color:#fff;font-weight:bold">block</span>;
      <span style="color:#fff;font-weight:bold">transition</span>: <span style="color:#fff;font-weight:bold">all</span> <span style="color:#ff0;font-weight:bold">0.3</span><span style="color:#fff;font-weight:bold">s</span>;
  }
.toc-container  <span style="font-weight:bold">li</span> <span style="font-weight:bold">a</span>:hover {
        <span style="color:#fff;font-weight:bold">background</span>: <span style="color:#ff0;font-weight:bold">#cddbef</span>;
      }
.toc-container  <span style="font-weight:bold">li</span> <span style="font-weight:bold">a</span>.current {
        <span style="color:#fff;font-weight:bold">color</span>: <span style="color:#ff0;font-weight:bold">#006CFF</span>;
        <span style="color:#fff;font-weight:bold">background</span>: <span style="color:#ff0;font-weight:bold">#fafafa</span>;
  }
.post-content-wrapper {
<span style="color:#fff;font-weight:bold">display</span>: <span style="color:#fff;font-weight:bold">flex</span>;
}
.post-content {
<span style="color:#fff;font-weight:bold">width</span>: <span style="color:#ff0;font-weight:bold">100</span><span style="color:#fff;font-weight:bold">%</span>;
<span style="color:#fff;font-weight:bold">margin-right</span>: <span style="color:#ff0;font-weight:bold">20</span><span style="color:#fff;font-weight:bold">px</span>;
}
@<span style="color:#fff;font-weight:bold">media</span> (<span style="font-weight:bold">max-width</span>: <span style="font-weight:bold">1150px</span>) {
  .toc-container {
    <span style="color:#fff;font-weight:bold">display</span>: <span style="color:#fff;font-weight:bold">none</span>;
  }
}
</code></pre></div><h3 id="3ä¿®æ”¹maincssæ–‡ä»¶">3ã€ä¿®æ”¹main.cssæ–‡ä»¶</h3>
<p>æœç´¢<code>.post-detail</code> ä¿®æ”¹<code>margin: 0 auto;</code>ä¸º</p>
<p><code>margin: 0 20px;</code></p>
<p>é‡æ–°æ¸²æŸ“ç½‘é¡µå³å¯å°½æƒ…äº«ç”¨å§ï¼</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>äº‘æœåŠ¡å™¨dockeræ­å»ºè‡ªåŠ¨é¢†äº¬è±†botäº’åŠ¨æŒ‡ä»¤</title>
      <link>https://blog.yongs.ml/posts/docker-build-jdbot/</link>
      <pubDate>Fri, 30 Apr 2021 22:49:08 +0000</pubDate>
      
      <guid>https://blog.yongs.ml/posts/docker-build-jdbot/</guid>
      <description>ä½¿ç”¨dockeréƒ¨ç½²è‡ªåŠ¨é¢†é‡‘è±†botè„šæœ¬ ä½¿ç”¨çš„ç‰ˆæœ¬ï¼š æœåŠ¡å™¨ï¼šcentos 8 docke</description>
      <content:encoded><![CDATA[<p>ä½¿ç”¨dockeréƒ¨ç½²è‡ªåŠ¨é¢†é‡‘è±†botè„šæœ¬</p>
<!-- more -->
<p>ä½¿ç”¨çš„ç‰ˆæœ¬ï¼š</p>
<p>æœåŠ¡å™¨ï¼šcentos 8</p>
<p>dockerï¼š 20.10.6</p>
<p>docker-composeï¼š 1.27.4</p>
<h3 id="1æœåŠ¡å™¨å®‰è£…dockerdocker-compose">1ã€æœåŠ¡å™¨å®‰è£…dockerï¼Œdocker-compose</h3>
<p>æ¨èä½¿ç”¨centosæœåŠ¡å™¨å®‰è£…dockerã€docker-compose</p>
<p>Dockerå®‰è£…</p>
<ul>
<li>å›½å†…ä¸€é”®å®‰è£… <code>curl -sSL https://get.daocloud.io/docker | sh</code></li>
<li>å›½å¤–ä¸€é”®å®‰è£… <code>curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</code></li>
</ul>
<p>docker-composeå®‰è£…</p>
<p><code>$ sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</code></p>
<p>è¦å®‰è£…å…¶ä»–ç‰ˆæœ¬çš„ Composeï¼Œè¯·æ›¿æ¢ 1.24.1ã€‚</p>
<p>æœ€æ–°å‘è¡Œçš„ç‰ˆæœ¬åœ°å€ï¼šhttps://github.com/docker/compose/releasesã€‚</p>
<p>å°†å¯æ‰§è¡Œæƒé™åº”ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶ï¼š</p>
<p><code>$ sudo chmod +x /usr/local/bin/docker-compose</code></p>
<p>åˆ›å»ºè½¯é“¾ï¼š</p>
<p><code>$ sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose</code></p>
<p>é€šè¿‡<code>docker-compose version</code>æŸ¥çœ‹<code>docker-compose</code>ç‰ˆæœ¬ï¼Œç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p>
<h3 id="2å®‰è£…jd_scripts">2ã€å®‰è£…jd_scripts</h3>
<p>åˆ›å»ºä¸€ä¸ªç›®å½•<code>jd_scripts</code>ç”¨äºå­˜æ”¾å¤‡ä»½é…ç½®ç­‰æ•°æ®ï¼Œè¿ç§»é‡è£…çš„æ—¶å€™åªéœ€è¦å¤‡ä»½æ•´ä¸ªjd_scriptsç›®å½•å³å¯</p>
<p>éœ€è¦æ–°å»ºçš„ç›®å½•æ–‡ä»¶ç»“æ„å‚è€ƒå¦‚ä¸‹:</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">jd_scripts
â”œâ”€â”€ logs
â”‚Â Â  â”œâ”€â”€ XXXX.log
â”‚Â Â  â””â”€â”€ XXXX.log
â”œâ”€â”€ my_crontab_list.sh
â””â”€â”€ docker-compose.yml
</code></pre></div><ul>
<li><code>jd_scripts/logs</code>å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹å°±è¡Œ</li>
<li><code>jd_scripts/docker-compose.yml</code> å‚è€ƒå†…å®¹å¦‚ä¸‹(è‡ªå·±åŠ¨æ‰‹èƒ½åŠ›ä¸è¡Œæä¸å®šè¯·ä½¿ç”¨é»˜è®¤é…ç½®)ï¼š</li>
</ul>
<p>æ ¹æ®æ–‡æ¡£ä¸€æ­¥ä¸€æ­¥ä¸‹å»å°±okäº†ï¼Œä¸‹é¢ä¸»è¦è®°å½•ä¸‹å¯èƒ½ç”¨åˆ°çš„å‘½ä»¤</p>
<p>ç›®å½•æ–‡ä»¶é…ç½®å¥½ä¹‹ååœ¨ <code>jd_scripts</code>ç›®å½•æ‰§è¡Œã€‚<br>
<code>docker-compose up -d</code> å¯åŠ¨ï¼ˆä¿®æ”¹docker-compose.ymlåéœ€è¦ä½¿ç”¨æ­¤å‘½ä»¤ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼‰ï¼›<br>
<code>docker-compose logs</code> æ‰“å°æ—¥å¿—ï¼›<br>
<code>docker-compose logs -f</code> æ‰“å°æ—¥å¿—ï¼Œ-fè¡¨ç¤ºè·Ÿéšæ—¥å¿—ï¼›
<code>docker logs -f jd_scripts</code> å’Œä¸Šé¢ä¸¤æ¡ç›¸æ¯”å¯ä»¥æ˜¾ç¤ºæ±‰å­—ï¼›
<code>docker-compose pull</code> æ›´æ–°é•œåƒï¼›<br>
<code>docker-compose stop</code> åœæ­¢å®¹å™¨ï¼›<br>
<code>docker-compose restart</code> é‡å¯å®¹å™¨ï¼›<br>
<code>docker-compose down</code> åœæ­¢å¹¶åˆ é™¤å®¹å™¨ï¼›</p>
<h3 id="3å¼€ä»£ç†æœºå™¨æ¿€æ´»tg-bot">3ã€å¼€ä»£ç†æœºå™¨ï¼Œæ¿€æ´»tg-bot</h3>
<p>è¿™é‡Œæ˜¯ä¸ªå¤§å‘ï¼Œæ‹¿ä¸ªå°æœ¬æœ¬è®°ä¸‹æ¥ï¼Œå…¶å®å°±æ˜¯dockerå†…ä»£ç†å®¿ä¸»æœºä»£ç†çš„é—®é¢˜</p>
<p>ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œå›½å†…çš„æœºå™¨ä¸èƒ½è®¿é—®tgï¼Œè€Œåˆæƒ³ä½¿ç”¨tg-botæ¥æ§åˆ¶ï¼Œæ— å¥ˆï¼Œå›½å¤–æœºå­å¤ªè´µï¼ˆç©·ï¼‰ï¼Œæœ€ä½ä¹Ÿè¦5ç¾åˆ€ï¼é‚ä¹°å›½å†…æœºå­å¼€ä»£ç†ä½¿ç”¨</p>
<h5 id="1ä¹°å›½å†…æœºå™¨æ¨èå¤§å‚çš„">1ã€ä¹°å›½å†…æœºå™¨ï¼Œæ¨èå¤§å‚çš„</h5>
<p>è¿™é‡Œåº”è¯¥æ”¾å„å¤§å‚çš„affçš„ï¼Œç•™ä¸ªå‘</p>
<h5 id="2å®‰è£…clash">2ã€å®‰è£…clash</h5>
<p>ä¸€ç›´åœ¨ä½¿ç”¨clashï¼Œç›´æ¥ç½‘ä¸Šæœç´¢clash<a href="https://github.com/Dreamacro/clash/releases">ä¸‹è½½</a>ï¼Œæ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬ä¸‹è½½ï¼Œåšä¸»ç”¨çš„æ˜¯centosï¼Œä¸‹è½½linux-amd64çš„</p>
<p>1ã€ä¸‹è½½clashï¼Œæœ€æ–°ç‰ˆæœ¬å¯å»å®˜ç½‘æ‰¾</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wget https://github.com/Dreamacro/clash/releases/download/v0.19.0/clash-linux-amd64-v0.19.0.gz
</code></pre></div><p>2ã€è§£å‹</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">gzip -d clash-linux-amd64-v0.19.0.gz
</code></pre></div><p>3ã€ç§»åŠ¨è‡³usr/bin/clashå¹¶é‡å‘½åä¸ºclash</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo mv clash-linux-amd64-v0.19.0 /usr/bin/clash
</code></pre></div><p>4ã€èµ‹äºˆclashè¿è¡Œæƒé™</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo chmod +x /usr/bin/clash
</code></pre></div><p>5ã€æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">clash -v 
</code></pre></div><h5 id="3åˆ›å»ºé…ç½®æ–‡ä»¶å®‰è£…æ§åˆ¶é¢æ¿">3ã€åˆ›å»ºé…ç½®æ–‡ä»¶ã€å®‰è£…æ§åˆ¶é¢æ¿</h5>
<p>1.åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">mkdir -p /etc/clash/
</code></pre></div><p>2.è¿›å…¥ç›®å½•</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#fff;font-weight:bold">cd</span> /etc/clash/
</code></pre></div><p>3.åˆ›å»ºé…ç½®æ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vim config.yaml
</code></pre></div><p>4.æ‰‹åŠ¨ç¼–è¾‘å¾ˆéº»çƒ¦ï¼Œå¯ç”¨winscpä¸Šä¼ </p>
<p>é…ç½®å‚æ•°è‡ªè¡ŒæŸ¥æ‰¾</p>
<p>5.ä¸‹è½½å‰ç«¯ä»£ç </p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wget https://github.com/Dreamacro/clash-dashboard/tree/gh-pages
</code></pre></div><p>6.è§£å‹</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">unzip gh-pages.zip
</code></pre></div><p>7.ä¿®æ”¹ç›®å½•å,è¿™é‡Œçš„ç›®å½•åæ˜¯ä¸Šé¢é…ç½®æ–‡ä»¶é‡Œçš„ external-ui: dashboard</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">mv clash-dashboard-gh-pages dashboard
</code></pre></div><p><a href="http://clash.razord.top/">å¯ç”¨è¿™ä¸ªé¢æ¿è¿œç¨‹æ§åˆ¶</a></p>
<h5 id="4è®¾ç½®clashå¼€æœºå¯åŠ¨">4ã€è®¾ç½®clashå¼€æœºå¯åŠ¨</h5>
<p>1.åˆ›å»ºserviceæ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo vim /usr/lib/systemd/system/clash.service
</code></pre></div><p>2.è¾“å…¥ä¸‹é¢ä»£ç </p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">[Unit]
Description=clash proxy
After=network.target

[Service]
Type=simple
ExecStart=/usr/bin/clash -d /etc/clash

[Install]
WantedBy=multi-user.target
</code></pre></div><p>3.é‡æ–°åŠ è½½ systemd æ¨¡å—</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo systemctl daemon-reload
</code></pre></div><p>4.å¯åŠ¨Clash</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo systemctl start clash.service
</code></pre></div><p>5.è®¾ç½®Clashå¼€æœºè‡ªå¯åŠ¨</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo systemctl <span style="color:#fff;font-weight:bold">enable</span> clash.service
</code></pre></div><p>6.åˆ¤æ–­æ˜¯å¦æˆåŠŸå¼€å¯ä»£ç†</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">curl -I https://www.google.com
</code></pre></div><p>è¿”å›200å³è¡¨ç¤ºä»£ç†å·²ç»æˆåŠŸ</p>
<h5 id="5è‡ªåŠ¨æ›´æ–°è®¢é˜…é…ç½®æ–‡ä»¶">5ã€è‡ªåŠ¨æ›´æ–°è®¢é˜…é…ç½®æ–‡ä»¶</h5>
<blockquote>
<p>é€šè¿‡shellè„šæœ¬è‡ªåŠ¨æ›´æ–°Clashåœ¨çº¿é…ç½®</p>
</blockquote>
<p>é€šè¿‡systemctlæ¥ç®¡ç†Clashçš„è¿›ç¨‹ï¼Œå¯¹åº”<code>clash.service</code>æ–‡ä»¶ï¼Œé€šè¿‡ä¸¤ä¸ªè„šæœ¬<code>start-clash.sh</code>å’Œ<code>stop-clash.sh</code>æ¥ç®¡ç†Clashçš„å¯åœï¼š</p>
<p>æŠŠä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¿®æ”¹ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vim /usr/lib/systemd/system/clash.service
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">[Unit]
Description=clash proxy
After=network.target

[Service]
WorkingDirectory=/å½“å‰ç”¨æˆ·ç›®å½•/.config/clash
Type=simple
ExecStart=/å½“å‰ç”¨æˆ·ç›®å½•/.config/clash/start-clash.sh
ExecStop=/å½“å‰ç”¨æˆ·ç›®å½•/.config/clash/stop-clash.sh
Environment=<span style="color:#0ff;font-weight:bold">&#34;HOME=/å½“å‰ç”¨æˆ·ç›®å½•&#34;</span>
Environment=<span style="color:#0ff;font-weight:bold">&#34;CLASH_URL=ä½ çš„è®¢é˜…é“¾æ¥&#34;</span>

[Install]
WantedBy=multi-user.target

</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vim /å½“å‰ç”¨æˆ·ç›®å½•/.config/clash/start-clash.sh
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0f0;font-weight:bold">#!/bin/bash
</span><span style="color:#0f0;font-weight:bold"></span><span style="color:#007f7f"># save this file to ${HOME}/.config/clash/start-clash.sh</span>

<span style="color:#007f7f"># save pid file</span>
<span style="color:#fff;font-weight:bold">echo</span> $$ &gt; <span style="color:#0ff;font-weight:bold">${</span>HOME<span style="color:#0ff;font-weight:bold">}</span>/.config/clash/clash.pid

diff <span style="color:#0ff;font-weight:bold">${</span>HOME<span style="color:#0ff;font-weight:bold">}</span>/.config/clash/config.yaml &lt;(curl -s <span style="color:#0ff;font-weight:bold">${</span>CLASH_URL<span style="color:#0ff;font-weight:bold">}</span>)
<span style="color:#fff;font-weight:bold">if</span> [ <span style="color:#0ff;font-weight:bold">&#34;</span>$?<span style="color:#0ff;font-weight:bold">&#34;</span> == <span style="color:#ff0;font-weight:bold">0</span> ]
<span style="color:#fff;font-weight:bold">then</span>
    /usr/bin/clash
<span style="color:#fff;font-weight:bold">else</span>
    TIME=<span style="color:#0ff;font-weight:bold">`</span>date <span style="color:#0ff;font-weight:bold">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span style="color:#0ff;font-weight:bold">`</span>
    cp <span style="color:#0ff;font-weight:bold">${</span>HOME<span style="color:#0ff;font-weight:bold">}</span>/.config/clash/config.yaml <span style="color:#0ff;font-weight:bold">&#34;</span><span style="color:#0ff;font-weight:bold">${</span>HOME<span style="color:#0ff;font-weight:bold">}</span><span style="color:#0ff;font-weight:bold">/.config/clash/config.yaml.bak</span><span style="color:#0ff;font-weight:bold">${</span>TIME<span style="color:#0ff;font-weight:bold">}</span><span style="color:#0ff;font-weight:bold">&#34;</span>
    curl -L -o <span style="color:#0ff;font-weight:bold">${</span>HOME<span style="color:#0ff;font-weight:bold">}</span>/.config/clash/config.yaml <span style="color:#0ff;font-weight:bold">${</span>CLASH_URL<span style="color:#0ff;font-weight:bold">}</span>
    /usr/bin/clash
<span style="color:#fff;font-weight:bold">fi</span>
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vim /å½“å‰ç”¨æˆ·ç›®å½•/.config/clash/stop-clash.sh
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0f0;font-weight:bold">#!/bin/bash
</span><span style="color:#0f0;font-weight:bold"></span><span style="color:#007f7f"># save this file to ${HOME}/.config/clash/stop-clash.sh</span>

<span style="color:#007f7f"># read pid file</span>
PID=<span style="color:#0ff;font-weight:bold">`</span>cat <span style="color:#0ff;font-weight:bold">${</span>HOME<span style="color:#0ff;font-weight:bold">}</span>/.config/clash/clash.pid<span style="color:#0ff;font-weight:bold">`</span>
<span style="color:#fff;font-weight:bold">kill</span> -9 <span style="color:#0ff;font-weight:bold">${</span>PID<span style="color:#0ff;font-weight:bold">}</span>
rm <span style="color:#0ff;font-weight:bold">${</span>HOME<span style="color:#0ff;font-weight:bold">}</span>/.config/clash/clash.pid
</code></pre></div><p>é…ç½®æ·»åŠ å®Œæˆåï¼Œå¦‚æœä½ çš„clash æ­£åœ¨è¿è¡Œä¸­ï¼Œéœ€è¦é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶å¹¶é‡å¯</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ systemctl daemon-reload
$ sudo systemctl restart clash.service
</code></pre></div><p>è¿™æ ·æ¯æ¬¡å¯åŠ¨clashæ—¶å°±ä¼šè‡ªåŠ¨æ›´æ–°é…ç½®æ–‡ä»¶äº†ï¼Œæ¥ä¸‹æ¥é€šè¿‡crontab è‡ªåŠ¨é‡å¯ clash.serviceå®ç°è‡ªåŠ¨æ›´æ–°èŠ‚ç‚¹</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#007f7f">#æ–°å»ºshellæ–‡ä»¶</span>
vim restart-clash.sh
</code></pre></div><p>æ–°å¢ä¸€æ¡å‘½ä»¤</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#007f7f">#/bin/sh</span>
sudo systemctl restart clash.service

</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">chmod +x restart-clash.sh
crontab -e
<span style="color:#007f7f">#æ’å…¥ä¸‹é¢å‘½ä»¤</span>
<span style="color:#007f7f">#æ¯3å°æ—¶é‡å¯ä¸€æ¬¡</span>
<span style="color:#ff0;font-weight:bold">0</span> */3 * * * restart-clash.sh
<span style="color:#007f7f">#æ¯åˆ†é’Ÿé‡å¯ä¸€æ¬¡</span>
* * * * * restart-clash.sh
</code></pre></div><p>å¤§åŠŸå‘Šæˆï¼Œå¯é€šè¿‡<code>tail -500f /var/log/cron</code>æŸ¥çœ‹å®šæ—¶ä»»åŠ¡æ˜¯å¦æ‰§è¡Œ</p>
<p><code>sudo systemctl status clash.service</code>  æŸ¥çœ‹æ˜¯å¦é‡å¯æˆåŠŸ</p>
<h3 id="4dockerå†…å¼€ä»£ç†">4ã€dockerå†…å¼€ä»£ç†</h3>
<p>ç”±äºä¸»è¦ç”¨æ¥ä½¿ç”¨tg-botï¼Œæ•…åªæ£€æµ‹tgapiå³å¯</p>
<p>1ã€åˆ¤æ–­å®¿ä¸»æœºå¯è¿æ¥tgapi</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">curl -sX POST <span style="color:#0ff;font-weight:bold">&#34;https://api.telegram.org/bot&#39;&#39;&#39;Your Token&#39;&#39;&#39;/sendMessage&#34;</span> -d <span style="color:#0ff;font-weight:bold">&#34;chat_id=&#34;</span>Some Chat id<span style="color:#0ff;font-weight:bold">&#34;&amp;text=hello&#34;</span>

curl -sX POST <span style="color:#0ff;font-weight:bold">&#34;https://api.telegram.org/botxxxxxxxxugt5A/sendMessage&#34;</span> -d <span style="color:#0ff;font-weight:bold">&#34;chat_id=48xxxxxx&amp;text=hello&#34;</span>
</code></pre></div><p>å¦‚æœè¿”å›æˆåŠŸï¼Œå³è¡¨ç¤ºæˆåŠŸ</p>
<p>2ã€è¿›å…¥å®¹å™¨</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">docker <span style="color:#fff;font-weight:bold">exec</span> -it jd_scripts /bin/sh
</code></pre></div><p>æ‰§è¡Œæ­¥éª¤1å‘½ä»¤ï¼Œå¦‚è‹¥å“åº”æ—¶é—´é•¿æˆ–å¤±è´¥ï¼Œåˆ™éœ€è¦é…ç½®ä»£ç†</p>
<p>3ã€é…ç½®å®¹å™¨ä»£ç†èµ°å®¿ä¸»æœº</p>
<p><a href="https://docs.docker.com/network/proxy/#use-environment-variables">dockerå®˜æ–¹æœ‰æ•™ç¨‹</a></p>
<p>dockerç‰ˆæœ¬å¤§äº 17.07ä»¥ä¸Šå¯ç”¨ä¸‹é¢çš„æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#fff;font-weight:bold">cd</span>
mkdir .docker
vim  ~/.docker/config.json

</code></pre></div><p>å¡«å…¥ä¸‹é¢json</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
 <span style="font-weight:bold">&#34;proxies&#34;</span>:
 {
   <span style="font-weight:bold">&#34;default&#34;</span>:
   {
     <span style="font-weight:bold">&#34;httpProxy&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;http://172.17.0.1:7890&#34;</span>,
     <span style="font-weight:bold">&#34;httpsProxy&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;http://172.17.0.1:7890&#34;</span>,
     <span style="font-weight:bold">&#34;noProxy&#34;</span>: <span style="color:#0ff;font-weight:bold">&#34;localhost,127.0.0.1&#34;</span>
<span style="color:#f00">&#34;</span>
   }
 }
}
</code></pre></div><p>ä¿å­˜æ–‡ä»¶<strong>åˆ›å»ºæˆ–è€…å¯åŠ¨æ–°å®¹å™¨æ—¶æ‰ç”Ÿæ•ˆ</strong></p>
<p>è¿™é‡Œæœ‰ä¸ªå¤§å‘ï¼Œæäº†ä¸€å¤©ï¼Œå°±æ˜¯</p>
<p><strong>ä»£ç†çš„ipä¸€å®šè¦å†™å¯¹ï¼</strong></p>
<p><strong>ä»£ç†çš„ipä¸€å®šè¦å†™å¯¹ï¼</strong></p>
<p><strong>ä»£ç†çš„ipä¸€å®šè¦å†™å¯¹!</strong></p>
<blockquote>
<p>ä¸‹åˆè°ƒè¯•çš„æ—¶å€™httpsçš„å†™æˆäº†127çš„äº†ï¼Œæœºå™¨å¯åŠ¨èµ·æ¥ï¼Œpullä»£ç çš„æ—¶å€™ï¼Œç›´æ¥æ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œå½“æ—¶è¿˜éª‚è¿™ç ´ä»£ç†ï¼Œæ²¡æ³•ï¼Œå°±æŠŠæŠ¥é”™ipä¸èµ°ä»£ç†äº†ï¼Œæ²¡æƒ³åˆ°ä¸‹é¢ä¸æŠ¥é”™äº†ï¼Œç›´æ¥æ— é™é‡å¯ï¼Œæå¾—å¤´éƒ½å¤§äº†ï¼Œè¿˜åœ¨æƒ³æ˜¯ä¸æ˜¯å†…å­˜çˆ†äº†å‘¢ï¼æ™šä¸Šï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œå®šç›ä¸€çœ‹ï¼ŒWCï¼&ldquo;httpsProxy&quot;ç«¯å£å†™çš„127&hellip;èµ¶ç´§æ”¹äº†ï¼Œé‡æ–°è·‘éï¼Œå¦¥äº†ï¼ŒbotæˆåŠŸäº†ï¼</p>
</blockquote>
<p>4ã€åˆ é™¤å®¹å™¨ï¼Œé‡æ–°å¯ç”¨</p>
<p>æ¥ä¸‹æ¥åœ¨jd_scripts ç›®å½•å†…</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">docker-compose down
docker-compose up -d
</code></pre></div><p>å¯åŠ¨æˆåŠŸåï¼Œtgbotå³å¯æ”¶åˆ°æˆåŠŸçš„æ¶ˆæ¯ï¼Œå°½æƒ…äº«ç”¨å§ï¼</p>
<h3 id="clashç›¸å…³çš„ç®¡ç†å‘½ä»¤">Clashç›¸å…³çš„ç®¡ç†å‘½ä»¤</h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#007f7f">## å¯åŠ¨Clash ##</span>
sudo systemctl start clash.service

<span style="color:#007f7f">## é‡å¯Clash ##</span>
sudo systemctl restart clash.service

<span style="color:#007f7f">## æŸ¥çœ‹Clashè¿è¡ŒçŠ¶æ€ ##</span>
sudo systemctl status clash.service

<span style="color:#007f7f">## å®æ—¶æ»šåŠ¨çŠ¶æ€ ##</span>
sudo journalctl -u clash.service -f
</code></pre></div><h3 id="dockerç›¸å…³å‘½ä»¤">dockerç›¸å…³å‘½ä»¤</h3>
<p><code>docker exec -it jd_scripts /bin/sh -c 'git -C /scripts pull &amp;&amp; node /scripts/jd_bean_change.js'</code>  æ‰‹åŠ¨è¿è¡Œä¸€è„šæœ¬</p>
<p><code>docker exec -it jd_scripts /bin/sh -c 'env'</code>  æŸ¥çœ‹è®¾ç½®çš„ç¯å¢ƒå˜é‡</p>
<p><code>docker exec -it jd_scripts /bin/sh -c 'crontab -l'</code>  æŸ¥çœ‹å·²ç”Ÿæ•ˆçš„crontab_listå®šæ—¶å™¨ä»»åŠ¡</p>
<p><code>docker exec -it jd_scripts sh -c &quot;docker_entrypoint.sh&quot;</code> æ‰‹åŠ¨æ›´æ–°jd_scriptsä»“åº“æœ€æ–°è„šæœ¬</p>
<p><code>docker exec -it jd_scripts /bin/sh</code> ä»…è¿›å…¥å®¹å™¨å‘½ä»¤</p>
<p><code>rm -rf  logs/*.log</code> åˆ é™¤logsæ–‡ä»¶å¤¹é‡Œé¢æ‰€æœ‰çš„æ—¥å¿—æ–‡ä»¶</p>
<ul>
<li>[1] <a href="https://github.com/wisz2021/jd_docker">jd_docker</a></li>
<li>[2] <a href="https://github.com/yuanlam/Clash-Linux">clashå®‰è£…å‚è€ƒ</a></li>
<li>[3] <a href="https://kebingzao.com/2019/02/22/docker-container-proxy/">dockerå†…ä»£ç†å‚è€ƒ</a></li>
<li>[4] <a href="https://akillcool.github.io/post/clash-with-auto-update-config/">clashè‡ªåŠ¨æ›´æ–°è®¢é˜…é…ç½®</a></li>
</ul>
]]></content:encoded>
    </item>
    
    
    
  </channel>
</rss>
