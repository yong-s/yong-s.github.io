[{"content":"configé…ç½®æ–‡ä»¶é‡ŒåŠ ä¸Šå¦‚ä¸‹å‚æ•°ï¼š\nfrontmatter: lastmod: - lastmod - :git - :fileModTime - :default ä¾æ¬¡å–çš„é¡ºåºä¸ºï¼š\n lastmod :æœ€åæäº¤æ—¶é—´\n:git: æ ¹æ®gitæäº¤ç‰ˆæœ¬æ—¶é—´\n:fileModTimeï¼šæ–‡ä»¶ä¿®æ”¹æ—¶é—´\n Configure Hugo | Hugo å†™çš„éƒ½æœ‰,butæ˜¯è‹±æ–‡çš„ğŸ™ƒ\n","permalink":"https://blog.yongs.ml/posts/hugo-auto-update-lastmod/","summary":"configé…ç½®æ–‡ä»¶é‡ŒåŠ ä¸Šå¦‚ä¸‹å‚æ•°ï¼š frontmatter: lastmod: - lastmod - :git - :fileModTime - :default ä¾æ¬¡å–çš„é¡ºåºä¸ºï¼š lastmod :æœ€åæäº¤","title":"Hugo è‡ªåŠ¨æ›´æ–°æ–‡ç« ä¿®æ”¹æ—¶é—´"},{"content":"åœ¨linuxserveræœåŠ¡å™¨ä¸Šå®‰è£…\nç¯å¢ƒï¼šdockerã€docker- compose\néœ€è¦äº†è§£dockeråŸºæœ¬çŸ¥è¯†ï¼Œä¸æ‡‚å¯ä»¥ç¿»ç¿»ä»¥å‰çš„åšå®¢æˆ–è€…æœä¸‹æ•™ç¨‹å­¦ä¹ \nfilebrowserå®˜ç½‘ä¸Šç»™çš„æ˜¯dockerå‘½ä»¤æ‰§è¡Œçš„ï¼Œä½†ç”¨composeä¹ æƒ¯äº†ï¼Œæ‰€ä»¥è½¬æ¢äº†ä¸€ä¸‹æ ¼å¼ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸ªå‘ï¼Œå®˜ç½‘ä¹Ÿæç¤ºäº†\n By default, we already have a configuration file with some defaults so you can just mount the root and the database. Although you can overwrite by mounting a directory with a new config file. If you don\u0026rsquo;t already have a database file, make sure to create a new empty file under the path you specified. Otherwise, Docker will create an empty folder instead of an empty file, resulting in an error when mounting the database into the container.\n ç¿»è¯‘è¿‡æ¥å°±æ˜¯éœ€è¦æå‰åˆ›å»ºæ‰€éœ€çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œå¦åˆ™ï¼ŒDockerä¼šåˆ›å»ºä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹è€Œä¸æ˜¯ç©ºçš„æ–‡ä»¶ï¼Œå¯¼è‡´åœ¨å°†æ•°æ®åº“æŒ‚è½½åˆ°å®¹å™¨ä¸­æ—¶å‡ºç°é”™è¯¯ï¼è¿™ç‚¹ä¸€å®šè¦æ³¨æ„å•Šï¼ï¼ï¼\n1ã€åˆ›å»ºdocker-composeæ–‡ä»¶ å†…å®¹å¦‚ä¸‹ï¼š\nversion: \u0026#39;3.3\u0026#39; services: filebrowser: image: filebrowser/filebrowser:s6 container_name: filebrowser volumes: - ./root:/srv - ./database/filebrowser.db:/database/filebrowser.db - ./settings.json:/config/settings.json environment: - PUID=0 - PGID=0 ports: - \u0026#39;8080:80\u0026#39; restart: always 2ã€åˆ›å»ºé»˜è®¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ å¯¹ç…§ä¸Šè¿°docker-composeçš„è·¯å¾„ï¼Œéœ€è¦åœ¨å½“å‰ç›®å½•åˆ›å»º settings.json æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n{ \u0026#34;port\u0026#34;: 80, \u0026#34;baseURL\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;address\u0026#34;: \u0026#34;0.0.0.0\u0026#34;, \u0026#34;log\u0026#34;: \u0026#34;stdout\u0026#34;, \u0026#34;database\u0026#34;: \u0026#34;/database/filebrowser.db\u0026#34;, \u0026#34;root\u0026#34;: \u0026#34;/srv\u0026#34; } åœ¨å½“å‰ç›®å½•åˆ›å»º database/filebrowser.db æ–‡ä»¶å¤¹å’Œæ–‡ä»¶\nmkdir database cd database touch filebrowser.db 3ã€è¿è¡Œæµ‹è¯•æ˜¯å¦æˆåŠŸ æ‰§è¡Œ docker- compose logs -f çœ‹ä¸‹æ—¥å¿—æ˜¯å¦æŠ¥é”™\néœ€è¦å…¶ä»–æœºå™¨è®¿é—®è®°å¾—é˜²ç«å¢™ æŠŠç«¯å£æ‰“å¼€ï¼Œæœ¬ä¾‹ç”¨çš„8080ç«¯å£\næµè§ˆå™¨è®¿é—® æœåŠ¡å™¨ip:8080 æˆåŠŸæ‰“å¼€å³å¯ï¼ŒEnjoy itï¼ğŸ‰ğŸ‰ğŸ‰\n å‚è€ƒï¼š\n1ã€filebrowserå®˜ç½‘\n2ã€filebrowser ä¸€ä¸ªè·¨å¹³å°çš„æ–‡ä»¶ç®¡ç†å™¨çš„ä½¿ç”¨æ–¹æ³•-æ£®æ—çš„ä¸ªäººåšå®¢\n ","permalink":"https://blog.yongs.ml/posts/docker-deploy-filebrowser/","summary":"åœ¨linuxserveræœåŠ¡å™¨ä¸Šå®‰è£… ç¯å¢ƒï¼šdockerã€docker- compose éœ€è¦äº†è§£do","title":"Docker Composeéƒ¨ç½²filebrowser"},{"content":" æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤\n ğŸ  å…³äºæœ¬ç«™ è¿™é‡Œä¸»è¦è®°å½•ä¸€äº›å¹³å¸¸é‡åˆ°çš„ä¸€äº›æŠ€æœ¯å‘ï¼Œæ–¹ä¾¿ä»¥åå¯ä»¥æŸ¥é˜…ğŸ˜„\næœ¬ç«™æœ€å¼€å§‹æ˜¯2019å¹´å°±æ­å»ºäº†ï¼Œå½“æ—¶ç”¨çš„hexoæ„å»ºï¼Œéƒ¨ç½²åœ¨githubï¼Œç”¨netlifyç¼“å­˜æœåŠ¡ï¼Œæ— å¥ˆå½“æ—¶ç©·ï¼Œç”¨çš„è¿˜æ˜¯Windowsæœ¬ï¼Œç”¨å‘½ä»¤å¤ªä¸çˆ½äº†ï¼Œå¯¼è‡´å†™æ–‡ç« æ²¡ä»€ä¹ˆæ¿€æƒ…ï¼ŒåŸºæœ¬æ–­æ›´ğŸ¤£\næ¥åˆ°2021å¹´ï¼Œç»å¸¸åœ¨ç½‘ä¸Šçœ‹å¤§ä½¬ä»¬çš„blogï¼Œæ—¶é—´æœ‰ç‚¹ç©ºï¼Œå°±æƒ³æŠŠblogç»™æ‹¾èµ·æ¥ï¼Œæ¥è§¦çš„æŠ€æœ¯ä¹Ÿå¤šäº†ï¼Œä¹Ÿæƒ³è®°å½•ä¸‹ä¸€äº›ç¬”è®°ï¼Œæ–¹ä¾¿åé¢éšæ—¶ç¿»é˜…ï¼Œæ­£å¥½åœ¨æ¨ä¸Šçœ‹åˆ°å¤§ä½¬ä»¬æ¨ègridea: âœï¸ A static blog writing client (ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯)\nå‚»ç“œå¼æ“ä½œï¼Œæ ¹æ®ç•Œé¢æç¤ºè®¾ç½®å°±è¡Œäº†ï¼Œä¸“æ³¨äºå†™ä½œï¼Œå½“æ—¶å°±ä¸‹ä¸‹æ¥ç”¨äº†ä¸€æ®µæ—¶é—´ï¼Œä¹Ÿæœ‰æ¯”è¾ƒé¸¡è‚‹çš„åœ°æ–¹ï¼Œæ¯”å¦‚ä¸»é¢˜å¤ªå°‘ï¼Œè‡ªå®šä¹‰ç©ºé—´å¤ªå°ï¼Œè¿˜æœ‰å°±æ˜¯windows7ä¸Šä¸å¤ªç¨³å®šï¼Œæœ‰æ—¶ä¼šå¡ï¼Œå¯èƒ½æˆ‘ç”µè„‘åƒåœ¾å§ï¼Œä¸»é¢˜å¤ªå°‘ï¼Œæœ‰çš„ä¸»é¢˜ä¸æ”¯æŒä¾§è¾¹ç›®å½•æ ï¼Œå½“æ—¶æœäº†å¥½å¤šæ–‡ç« ï¼Œæ‰æ”¹äº†ä¸€ä¸‹ä¸»é¢˜ï¼Œå…·ä½“çœ‹è¿™ç¯‡ï¼Œè¿˜æœ‰å°±æ˜¯ï¼Œä½œè€…å¥½ä¹…ä¸æ›´æ–°äº†ï¼Œä¸“æ³¨äºæwebç«¯äº†ï¼Œæ‰€ä»¥å°±åœ¨æ¢äº†Macåå°±æ¢äº†åˆ°hugoä¸Š\nhugoç”¨goå¼€å‘çš„ï¼Œæ®è¯´ç”Ÿæˆæ–‡ç« éå¸¸å¿«ï¼Œç›¸æ¯”hexoæ¥è¯´ï¼Œhugoåœ¨Macä¸Šç”¨å‘½ä»¤ä¹Ÿå¾ˆèˆ’æœï¼Œä¸»é¢˜ä¹Ÿå¾ˆå¤šï¼Œæ‰€ä»¥å°±æœæ–­æ¢äº†ä¸Šæ¥ï¼Œä¸“æ³¨å†™ä½œï¼Œä¸»é¢˜ç”¨çš„papermodï¼Œè¿™æ˜¯å›½å¤–å¼€å‘è€…å¼€å‘çš„ï¼Œä¸­æ–‡èµ„æ–™å¤ªå°‘ï¼Œä¸è¿‡ï¼Œæœäº†å¥½å¤šå¤§ä½¬çš„æ–‡ç« ï¼ŒåŸºæœ¬ä¸Šè°ƒè¯•okï¼›è¿˜æ˜¯ç”¨githubåšä»“åº“æ¥æä¾›æœåŠ¡ï¼Œç”¨markdownæ¥å†™æ–‡ç« ï¼Œvs codeæ¥é…ç½®æ–‡ä»¶ï¼Œåœ¨freenomä¸Šç™½å«–çš„ä¸€å¹´åŸŸåï¼Œç”¨è„šæœ¬è‡ªåŠ¨ç›‘æ§ï¼Œåˆ°æœŸæç¤ºï¼›ç”¨cfæ¥åšåŸŸåè§£æå’Œç¼“å­˜æœåŠ¡ã€‚\nğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è° åŒ†åŒ†çš„èš‚èš å…‹è±ç™»å¤§å­¦æ¯•ä¸š æ²¡æœ‰ç†æƒ³çš„äººä¸ä¼¤å¿ƒ æŸéçŸ¥åå°å‚è§„åˆ™é•¿æ–¹ä½“å›ºä½“ç‰©è´¨ç©ºé—´ç§»åŠ¨å·¥ç¨‹å¸ˆ\n","permalink":"https://blog.yongs.ml/about/","summary":"æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤ ğŸ  å…³äºæœ¬ç«™ è¿™é‡Œä¸»è¦è®°å½•ä¸€äº›å¹³å¸¸é‡åˆ°çš„ä¸€äº›æŠ€æœ¯å‘ï¼Œ","title":"About"},{"content":"çœ‹è¿‡å‰é¢çš„æ–‡ç« çŸ¥é“ï¼Œå¤§ä½¬çš„åº“ä»“åº“ä¹Ÿé”äº†ï¼Œä¸èƒ½pullï¼Œåªèƒ½æ¢å–ä»“åº“åœ°å€æ‰è¡Œï¼Œä¸ºäº†ä¸€åŠ³æ°¸é€¸ï¼Œç´¢æ€§æ¢äº†è‡ªå·±çš„åº“ï¼Œåªè°ˆæŠ€æœ¯ï¼Œä¸è°ˆå…¶ä»–\u0026hellip;\n1ã€åˆ›å»ºDockerfileæ–‡ä»¶ æ¯”è¾ƒæ‡’ï¼Œç›´æ¥æŠŠå¤§ä½¬çš„Dockerfileæ‹‰æ¥æ¢äº†ä»“åº“åœ°å€ï¼Œrsaè®°ç€ä¹Ÿè¦æ¢\næ¢å®Œåœ¨å½“å‰ç›®å½• docker build -t jd_scripts .\nç›´æ¥ç”Ÿæˆè‡ªå·±çš„image\ndocker images æŸ¥çœ‹é•œåƒ\n2ã€ä¿®æ”¹docker-composeæ–‡ä»¶ ä¿®æ”¹docker-composeé‡Œé¢çš„ä»“åº“åœ°å€ä¸ºè‡ªå·±çš„åœ°å€ï¼Œå…¶ä»–å‚æ•°ä¸ç”¨å˜\ndocker-compose up -d å¯åŠ¨é•œåƒ\nå®Œç¾è¿è¡Œï¼\nç»§ç»­èººå¹³ã€‚\nå»ºè®®å­¦å­¦dockerï¼ŒçœŸçš„å¥½å¼ºå¤§ï¼\né™„ä¸Šä¸€ä¸ªä¸é”™çš„dockeræ•™ç¨‹\nDocker â€”â€” ä»å…¥é—¨åˆ°å®è·µ\n","permalink":"https://blog.yongs.ml/posts/docker-generate-image/","summary":"çœ‹è¿‡å‰é¢çš„æ–‡ç« çŸ¥é“ï¼Œå¤§ä½¬çš„åº“ä»“åº“ä¹Ÿé”äº†ï¼Œä¸èƒ½pullï¼Œåªèƒ½æ¢å–ä»“åº“åœ°å€æ‰è¡Œï¼Œä¸ºäº†ä¸€åŠ³","title":"docker ç”Ÿæˆè‡ªå·±çš„é•œåƒ"},{"content":"ä¿®æ”¹ä¸»é¢˜æ–‡ä»¶æ”¯æŒä¾§è¾¹æ ç›®å½•\nsimpleä¸»é¢˜æ•´ä½“è¿˜è¡Œï¼Œä½†æ–‡ç« æ— ä¾§è¾¹æ ç›®å½•ï¼Œä¸€èˆ¬å†™çš„æŠ€æœ¯æ€§æ–‡ç« å¾ˆé•¿ï¼Œå°±éœ€è¦ä¾§è¾¹æ ç›®å½•å’Œè¿™ä¸ªåŠŸèƒ½äº†ï¼Œåœ¨ç½‘ä¸Šæœäº†ä¸€ä¸‹èµ„æ–™ï¼Œå¯¹äºå‰ç«¯å°å­¦ç”Ÿçš„æˆ‘è´¹äº†å¥½é•¿æ—¶é—´æ‰æå®šï¼Œè®°å½•ä¸€ä¸‹è¿‡ç¨‹ã€‚\n1ã€ä¿®æ”¹post.ejsæ–‡ä»¶ headæ–°å¢\n\u0026lt;script src=\u0026quot;https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\næœç´¢\u0026lt;%- post.content %\u0026gt;å¤åˆ¶ä¸€ä¸‹ä»£ç è¦†ç›–copy\n\u0026lt;div class=\u0026#34;post-content-wrapper\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;post-content\u0026#34; v-pre\u0026gt; \u0026lt;%- post.content %\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;toc-container\u0026#34;\u0026gt; \u0026lt;%- post.toc %\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; æ–°å¢é«˜äº®js\n\u0026lt;script\u0026gt; hljs.initHighlightingOnLoad() let mainNavLinks = document.querySelectorAll(\u0026#34;.markdownIt-TOC a\u0026#34;); // This should probably be throttled.  // Especially because it triggers during smooth scrolling.  // https://lodash.com/docs/4.17.10#throttle  // You could do like...  // window.addEventListener(\u0026#34;scroll\u0026#34;, () =\u0026gt; {  // _.throttle(doThatStuff, 100);  // });  // Only not doing it here to keep this Pen dependency-free.  window.addEventListener(\u0026#34;scroll\u0026#34;, event =\u0026gt; { let fromTop = window.scrollY; mainNavLinks.forEach((link, index) =\u0026gt; { let section = document.getElementById(decodeURI(link.hash).substring(1)); let nextSection = null if (mainNavLinks[index + 1]) { nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1)); } if (section.offsetTop \u0026lt;= fromTop) { if (nextSection) { if (nextSection.offsetTop \u0026gt; fromTop) { link.classList.add(\u0026#34;current\u0026#34;); } else { link.classList.remove(\u0026#34;current\u0026#34;); } } else { link.classList.add(\u0026#34;current\u0026#34;); } } else { link.classList.remove(\u0026#34;current\u0026#34;); } }); }); \u0026lt;/script\u0026gt; 2ã€å®¢æˆ·ç«¯æ–°å¢è‡ªå®šä¹‰css .toc-container .markdownIt-TOC { position: sticky; top: 32px; width: 200px; font-size: 12px; list-style: none; padding-left: 0; padding: 16px 8px; } .toc-container .markdownIt-TOC:before { content: \u0026#34;\u0026#34;; position: absolute; top: 0; left: 8px; bottom: 0; width: 1px; background-color: #ebedef; opacity: .5; } .toc-container ul { list-style: none; } .toc-container li { padding-left: 16px; } .toc-container li a { color: #868e96; padding: 4px; display: block; transition: all 0.3s; } .toc-container li a:hover { background: #cddbef; } .toc-container li a.current { color: #006CFF; background: #fafafa; } .post-content-wrapper { display: flex; } .post-content { width: 100%; margin-right: 20px; } @media (max-width: 1150px) { .toc-container { display: none; } } 3ã€ä¿®æ”¹main.cssæ–‡ä»¶ æœç´¢.post-detail ä¿®æ”¹margin: 0 auto;ä¸º\nmargin: 0 20px;\né‡æ–°æ¸²æŸ“ç½‘é¡µå³å¯å°½æƒ…äº«ç”¨å§ï¼\n","permalink":"https://blog.yongs.ml/posts/girde-simple-support-for-sidebar-directory/","summary":"ä¿®æ”¹ä¸»é¢˜æ–‡ä»¶æ”¯æŒä¾§è¾¹æ ç›®å½• simpleä¸»é¢˜æ•´ä½“è¿˜è¡Œï¼Œä½†æ–‡ç« æ— ä¾§è¾¹æ ç›®å½•ï¼Œä¸€èˆ¬å†™çš„æŠ€æœ¯","title":"girde simpleä¿®æ”¹æ·»åŠ æ”¯æŒä¾§è¾¹æ ç›®å½•"},{"content":"ä½¿ç”¨dockeréƒ¨ç½²è‡ªåŠ¨é¢†é‡‘è±†botè„šæœ¬\nä½¿ç”¨çš„ç‰ˆæœ¬ï¼š\næœåŠ¡å™¨ï¼šcentos 8\ndockerï¼š 20.10.6\ndocker-composeï¼š 1.27.4\n1ã€æœåŠ¡å™¨å®‰è£…dockerï¼Œdocker-compose æ¨èä½¿ç”¨centosæœåŠ¡å™¨å®‰è£…dockerã€docker-compose\nDockerå®‰è£…\n å›½å†…ä¸€é”®å®‰è£… curl -sSL https://get.daocloud.io/docker | sh å›½å¤–ä¸€é”®å®‰è£… curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun  docker-composeå®‰è£…\n$ sudo curl -L \u0026quot;https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)\u0026quot; -o /usr/local/bin/docker-compose\nè¦å®‰è£…å…¶ä»–ç‰ˆæœ¬çš„ Composeï¼Œè¯·æ›¿æ¢ 1.24.1ã€‚\næœ€æ–°å‘è¡Œçš„ç‰ˆæœ¬åœ°å€ï¼šhttps://github.com/docker/compose/releasesã€‚\nå°†å¯æ‰§è¡Œæƒé™åº”ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶ï¼š\n$ sudo chmod +x /usr/local/bin/docker-compose\nåˆ›å»ºè½¯é“¾ï¼š\n$ sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\né€šè¿‡docker-compose versionæŸ¥çœ‹docker-composeç‰ˆæœ¬ï¼Œç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸã€‚\n2ã€å®‰è£…jd_scripts åˆ›å»ºä¸€ä¸ªç›®å½•jd_scriptsç”¨äºå­˜æ”¾å¤‡ä»½é…ç½®ç­‰æ•°æ®ï¼Œè¿ç§»é‡è£…çš„æ—¶å€™åªéœ€è¦å¤‡ä»½æ•´ä¸ªjd_scriptsç›®å½•å³å¯\néœ€è¦æ–°å»ºçš„ç›®å½•æ–‡ä»¶ç»“æ„å‚è€ƒå¦‚ä¸‹:\njd_scripts â”œâ”€â”€ logs â”‚Â â”œâ”€â”€ XXXX.log â”‚Â â””â”€â”€ XXXX.log â”œâ”€â”€ my_crontab_list.sh â””â”€â”€ docker-compose.yml  jd_scripts/logså»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹å°±è¡Œ jd_scripts/docker-compose.yml å‚è€ƒå†…å®¹å¦‚ä¸‹(è‡ªå·±åŠ¨æ‰‹èƒ½åŠ›ä¸è¡Œæä¸å®šè¯·ä½¿ç”¨é»˜è®¤é…ç½®)ï¼š  æ ¹æ®æ–‡æ¡£ä¸€æ­¥ä¸€æ­¥ä¸‹å»å°±okäº†ï¼Œä¸‹é¢ä¸»è¦è®°å½•ä¸‹å¯èƒ½ç”¨åˆ°çš„å‘½ä»¤\nç›®å½•æ–‡ä»¶é…ç½®å¥½ä¹‹ååœ¨ jd_scriptsç›®å½•æ‰§è¡Œã€‚\ndocker-compose up -d å¯åŠ¨ï¼ˆä¿®æ”¹docker-compose.ymlåéœ€è¦ä½¿ç”¨æ­¤å‘½ä»¤ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼‰ï¼›\ndocker-compose logs æ‰“å°æ—¥å¿—ï¼›\ndocker-compose logs -f æ‰“å°æ—¥å¿—ï¼Œ-fè¡¨ç¤ºè·Ÿéšæ—¥å¿—ï¼› docker logs -f jd_scripts å’Œä¸Šé¢ä¸¤æ¡ç›¸æ¯”å¯ä»¥æ˜¾ç¤ºæ±‰å­—ï¼› docker-compose pull æ›´æ–°é•œåƒï¼›\ndocker-compose stop åœæ­¢å®¹å™¨ï¼›\ndocker-compose restart é‡å¯å®¹å™¨ï¼›\ndocker-compose down åœæ­¢å¹¶åˆ é™¤å®¹å™¨ï¼›\n3ã€å¼€ä»£ç†æœºå™¨ï¼Œæ¿€æ´»tg-bot è¿™é‡Œæ˜¯ä¸ªå¤§å‘ï¼Œæ‹¿ä¸ªå°æœ¬æœ¬è®°ä¸‹æ¥ï¼Œå…¶å®å°±æ˜¯dockerå†…ä»£ç†å®¿ä¸»æœºä»£ç†çš„é—®é¢˜\nç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œå›½å†…çš„æœºå™¨ä¸èƒ½è®¿é—®tgï¼Œè€Œåˆæƒ³ä½¿ç”¨tg-botæ¥æ§åˆ¶ï¼Œæ— å¥ˆï¼Œå›½å¤–æœºå­å¤ªè´µï¼ˆç©·ï¼‰ï¼Œæœ€ä½ä¹Ÿè¦5ç¾åˆ€ï¼é‚ä¹°å›½å†…æœºå­å¼€ä»£ç†ä½¿ç”¨\n1ã€ä¹°å›½å†…æœºå™¨ï¼Œæ¨èå¤§å‚çš„ è¿™é‡Œåº”è¯¥æ”¾å„å¤§å‚çš„affçš„ï¼Œç•™ä¸ªå‘\n2ã€å®‰è£…clash ä¸€ç›´åœ¨ä½¿ç”¨clashï¼Œç›´æ¥ç½‘ä¸Šæœç´¢clashä¸‹è½½ï¼Œæ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬ä¸‹è½½ï¼Œåšä¸»ç”¨çš„æ˜¯centosï¼Œä¸‹è½½linux-amd64çš„\n1ã€ä¸‹è½½clashï¼Œæœ€æ–°ç‰ˆæœ¬å¯å»å®˜ç½‘æ‰¾\nwget https://github.com/Dreamacro/clash/releases/download/v0.19.0/clash-linux-amd64-v0.19.0.gz 2ã€è§£å‹\ngzip -d clash-linux-amd64-v0.19.0.gz 3ã€ç§»åŠ¨è‡³usr/bin/clashå¹¶é‡å‘½åä¸ºclash\nsudo mv clash-linux-amd64-v0.19.0 /usr/bin/clash 4ã€èµ‹äºˆclashè¿è¡Œæƒé™\nsudo chmod +x /usr/bin/clash 5ã€æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ\nclash -v 3ã€åˆ›å»ºé…ç½®æ–‡ä»¶ã€å®‰è£…æ§åˆ¶é¢æ¿ 1.åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•\nmkdir -p /etc/clash/ 2.è¿›å…¥ç›®å½•\ncd /etc/clash/ 3.åˆ›å»ºé…ç½®æ–‡ä»¶\nvim config.yaml 4.æ‰‹åŠ¨ç¼–è¾‘å¾ˆéº»çƒ¦ï¼Œå¯ç”¨winscpä¸Šä¼ \né…ç½®å‚æ•°è‡ªè¡ŒæŸ¥æ‰¾\n5.ä¸‹è½½å‰ç«¯ä»£ç \nwget https://github.com/Dreamacro/clash-dashboard/tree/gh-pages 6.è§£å‹\nunzip gh-pages.zip 7.ä¿®æ”¹ç›®å½•å,è¿™é‡Œçš„ç›®å½•åæ˜¯ä¸Šé¢é…ç½®æ–‡ä»¶é‡Œçš„ external-ui: dashboard\nmv clash-dashboard-gh-pages dashboard å¯ç”¨è¿™ä¸ªé¢æ¿è¿œç¨‹æ§åˆ¶\n4ã€è®¾ç½®clashå¼€æœºå¯åŠ¨ 1.åˆ›å»ºserviceæ–‡ä»¶\nsudo vim /usr/lib/systemd/system/clash.service 2.è¾“å…¥ä¸‹é¢ä»£ç \n[Unit] Description=clash proxy After=network.target [Service] Type=simple ExecStart=/usr/bin/clash -d /etc/clash [Install] WantedBy=multi-user.target 3.é‡æ–°åŠ è½½ systemd æ¨¡å—\nsudo systemctl daemon-reload 4.å¯åŠ¨Clash\nsudo systemctl start clash.service 5.è®¾ç½®Clashå¼€æœºè‡ªå¯åŠ¨\nsudo systemctl enable clash.service 6.åˆ¤æ–­æ˜¯å¦æˆåŠŸå¼€å¯ä»£ç†\ncurl -I https://www.google.com è¿”å›200å³è¡¨ç¤ºä»£ç†å·²ç»æˆåŠŸ\n5ã€è‡ªåŠ¨æ›´æ–°è®¢é˜…é…ç½®æ–‡ä»¶  é€šè¿‡shellè„šæœ¬è‡ªåŠ¨æ›´æ–°Clashåœ¨çº¿é…ç½®\n é€šè¿‡systemctlæ¥ç®¡ç†Clashçš„è¿›ç¨‹ï¼Œå¯¹åº”clash.serviceæ–‡ä»¶ï¼Œé€šè¿‡ä¸¤ä¸ªè„šæœ¬start-clash.shå’Œstop-clash.shæ¥ç®¡ç†Clashçš„å¯åœï¼š\næŠŠä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¿®æ”¹ä¸‹ï¼š\nvim /usr/lib/systemd/system/clash.service [Unit] Description=clash proxy After=network.target [Service] WorkingDirectory=/å½“å‰ç”¨æˆ·ç›®å½•/.config/clash Type=simple ExecStart=/å½“å‰ç”¨æˆ·ç›®å½•/.config/clash/start-clash.sh ExecStop=/å½“å‰ç”¨æˆ·ç›®å½•/.config/clash/stop-clash.sh Environment=\u0026#34;HOME=/å½“å‰ç”¨æˆ·ç›®å½•\u0026#34; Environment=\u0026#34;CLASH_URL=ä½ çš„è®¢é˜…é“¾æ¥\u0026#34; [Install] WantedBy=multi-user.target vim /å½“å‰ç”¨æˆ·ç›®å½•/.config/clash/start-clash.sh #!/bin/bash # save this file to ${HOME}/.config/clash/start-clash.sh # save pid file echo $$ \u0026gt; ${HOME}/.config/clash/clash.pid diff ${HOME}/.config/clash/config.yaml \u0026lt;(curl -s ${CLASH_URL}) if [ \u0026#34;$?\u0026#34; == 0 ] then /usr/bin/clash else TIME=`date \u0026#39;+%Y-%m-%d %H:%M:%S\u0026#39;` cp ${HOME}/.config/clash/config.yaml \u0026#34;${HOME}/.config/clash/config.yaml.bak${TIME}\u0026#34; curl -L -o ${HOME}/.config/clash/config.yaml ${CLASH_URL} /usr/bin/clash fi vim /å½“å‰ç”¨æˆ·ç›®å½•/.config/clash/stop-clash.sh #!/bin/bash # save this file to ${HOME}/.config/clash/stop-clash.sh # read pid file PID=`cat ${HOME}/.config/clash/clash.pid` kill -9 ${PID} rm ${HOME}/.config/clash/clash.pid é…ç½®æ·»åŠ å®Œæˆåï¼Œå¦‚æœä½ çš„clash æ­£åœ¨è¿è¡Œä¸­ï¼Œéœ€è¦é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶å¹¶é‡å¯\n$ systemctl daemon-reload $ sudo systemctl restart clash.service è¿™æ ·æ¯æ¬¡å¯åŠ¨clashæ—¶å°±ä¼šè‡ªåŠ¨æ›´æ–°é…ç½®æ–‡ä»¶äº†ï¼Œæ¥ä¸‹æ¥é€šè¿‡crontab è‡ªåŠ¨é‡å¯ clash.serviceå®ç°è‡ªåŠ¨æ›´æ–°èŠ‚ç‚¹\n#æ–°å»ºshellæ–‡ä»¶ vim restart-clash.sh æ–°å¢ä¸€æ¡å‘½ä»¤\n#/bin/sh sudo systemctl restart clash.service chmod +x restart-clash.sh crontab -e #æ’å…¥ä¸‹é¢å‘½ä»¤ #æ¯3å°æ—¶é‡å¯ä¸€æ¬¡ 0 */3 * * * restart-clash.sh #æ¯åˆ†é’Ÿé‡å¯ä¸€æ¬¡ * * * * * restart-clash.sh å¤§åŠŸå‘Šæˆï¼Œå¯é€šè¿‡tail -500f /var/log/cronæŸ¥çœ‹å®šæ—¶ä»»åŠ¡æ˜¯å¦æ‰§è¡Œ\nsudo systemctl status clash.service æŸ¥çœ‹æ˜¯å¦é‡å¯æˆåŠŸ\n4ã€dockerå†…å¼€ä»£ç† ç”±äºä¸»è¦ç”¨æ¥ä½¿ç”¨tg-botï¼Œæ•…åªæ£€æµ‹tgapiå³å¯\n1ã€åˆ¤æ–­å®¿ä¸»æœºå¯è¿æ¥tgapi\ncurl -sX POST \u0026#34;https://api.telegram.org/bot\u0026#39;\u0026#39;\u0026#39;Your Token\u0026#39;\u0026#39;\u0026#39;/sendMessage\u0026#34; -d \u0026#34;chat_id=\u0026#34;Some Chat id\u0026#34;\u0026amp;text=hello\u0026#34; curl -sX POST \u0026#34;https://api.telegram.org/botxxxxxxxxugt5A/sendMessage\u0026#34; -d \u0026#34;chat_id=48xxxxxx\u0026amp;text=hello\u0026#34; å¦‚æœè¿”å›æˆåŠŸï¼Œå³è¡¨ç¤ºæˆåŠŸ\n2ã€è¿›å…¥å®¹å™¨\ndocker exec -it jd_scripts /bin/sh æ‰§è¡Œæ­¥éª¤1å‘½ä»¤ï¼Œå¦‚è‹¥å“åº”æ—¶é—´é•¿æˆ–å¤±è´¥ï¼Œåˆ™éœ€è¦é…ç½®ä»£ç†\n3ã€é…ç½®å®¹å™¨ä»£ç†èµ°å®¿ä¸»æœº\ndockerå®˜æ–¹æœ‰æ•™ç¨‹\ndockerç‰ˆæœ¬å¤§äº 17.07ä»¥ä¸Šå¯ç”¨ä¸‹é¢çš„æ–¹æ³•\ncd mkdir .docker vim ~/.docker/config.json å¡«å…¥ä¸‹é¢json\n{ \u0026#34;proxies\u0026#34;: { \u0026#34;default\u0026#34;: { \u0026#34;httpProxy\u0026#34;: \u0026#34;http://172.17.0.1:7890\u0026#34;, \u0026#34;httpsProxy\u0026#34;: \u0026#34;http://172.17.0.1:7890\u0026#34;, \u0026#34;noProxy\u0026#34;: \u0026#34;localhost,127.0.0.1\u0026#34; \u0026#34; } } } ä¿å­˜æ–‡ä»¶åˆ›å»ºæˆ–è€…å¯åŠ¨æ–°å®¹å™¨æ—¶æ‰ç”Ÿæ•ˆ\nè¿™é‡Œæœ‰ä¸ªå¤§å‘ï¼Œæäº†ä¸€å¤©ï¼Œå°±æ˜¯\nä»£ç†çš„ipä¸€å®šè¦å†™å¯¹ï¼\nä»£ç†çš„ipä¸€å®šè¦å†™å¯¹ï¼\nä»£ç†çš„ipä¸€å®šè¦å†™å¯¹!\n ä¸‹åˆè°ƒè¯•çš„æ—¶å€™httpsçš„å†™æˆäº†127çš„äº†ï¼Œæœºå™¨å¯åŠ¨èµ·æ¥ï¼Œpullä»£ç çš„æ—¶å€™ï¼Œç›´æ¥æ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œå½“æ—¶è¿˜éª‚è¿™ç ´ä»£ç†ï¼Œæ²¡æ³•ï¼Œå°±æŠŠæŠ¥é”™ipä¸èµ°ä»£ç†äº†ï¼Œæ²¡æƒ³åˆ°ä¸‹é¢ä¸æŠ¥é”™äº†ï¼Œç›´æ¥æ— é™é‡å¯ï¼Œæå¾—å¤´éƒ½å¤§äº†ï¼Œè¿˜åœ¨æƒ³æ˜¯ä¸æ˜¯å†…å­˜çˆ†äº†å‘¢ï¼æ™šä¸Šï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œå®šç›ä¸€çœ‹ï¼ŒWCï¼\u0026ldquo;httpsProxy\u0026quot;ç«¯å£å†™çš„127\u0026hellip;èµ¶ç´§æ”¹äº†ï¼Œé‡æ–°è·‘éï¼Œå¦¥äº†ï¼ŒbotæˆåŠŸäº†ï¼\n 4ã€åˆ é™¤å®¹å™¨ï¼Œé‡æ–°å¯ç”¨\næ¥ä¸‹æ¥åœ¨jd_scripts ç›®å½•å†…\ndocker-compose down docker-compose up -d å¯åŠ¨æˆåŠŸåï¼Œtgbotå³å¯æ”¶åˆ°æˆåŠŸçš„æ¶ˆæ¯ï¼Œå°½æƒ…äº«ç”¨å§ï¼\nClashç›¸å…³çš„ç®¡ç†å‘½ä»¤ ## å¯åŠ¨Clash ## sudo systemctl start clash.service ## é‡å¯Clash ## sudo systemctl restart clash.service ## æŸ¥çœ‹Clashè¿è¡ŒçŠ¶æ€ ## sudo systemctl status clash.service ## å®æ—¶æ»šåŠ¨çŠ¶æ€ ## sudo journalctl -u clash.service -f dockerç›¸å…³å‘½ä»¤ docker exec -it jd_scripts /bin/sh -c 'git -C /scripts pull \u0026amp;\u0026amp; node /scripts/jd_bean_change.js' æ‰‹åŠ¨è¿è¡Œä¸€è„šæœ¬\ndocker exec -it jd_scripts /bin/sh -c 'env' æŸ¥çœ‹è®¾ç½®çš„ç¯å¢ƒå˜é‡\ndocker exec -it jd_scripts /bin/sh -c 'crontab -l' æŸ¥çœ‹å·²ç”Ÿæ•ˆçš„crontab_listå®šæ—¶å™¨ä»»åŠ¡\ndocker exec -it jd_scripts sh -c \u0026quot;docker_entrypoint.sh\u0026quot; æ‰‹åŠ¨æ›´æ–°jd_scriptsä»“åº“æœ€æ–°è„šæœ¬\ndocker exec -it jd_scripts /bin/sh ä»…è¿›å…¥å®¹å™¨å‘½ä»¤\nrm -rf logs/*.log åˆ é™¤logsæ–‡ä»¶å¤¹é‡Œé¢æ‰€æœ‰çš„æ—¥å¿—æ–‡ä»¶\n [1] jd_docker [2] clashå®‰è£…å‚è€ƒ [3] dockerå†…ä»£ç†å‚è€ƒ [4] clashè‡ªåŠ¨æ›´æ–°è®¢é˜…é…ç½®  ","permalink":"https://blog.yongs.ml/posts/docker-build-jdbot/","summary":"ä½¿ç”¨dockeréƒ¨ç½²è‡ªåŠ¨é¢†é‡‘è±†botè„šæœ¬ ä½¿ç”¨çš„ç‰ˆæœ¬ï¼š æœåŠ¡å™¨ï¼šcentos 8 docke","title":"äº‘æœåŠ¡å™¨dockeræ­å»ºè‡ªåŠ¨é¢†äº¬è±†botäº’åŠ¨æŒ‡ä»¤"}]